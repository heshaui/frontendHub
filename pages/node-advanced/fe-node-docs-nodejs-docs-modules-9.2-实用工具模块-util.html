<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>实用工具模块 util - FrontendHub</title>
    <link rel="stylesheet" href="../../css/style.css">
    <link rel="stylesheet" href="../../css/content.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body class="content-page">
    <!-- 导航栏 -->
    <nav class="navbar">
        <div class="container">
            <div class="nav-brand">
                <a href="../../index.html" style="color: inherit; text-decoration: none; display: flex; align-items: center; gap: 0.5rem;">
                    <i class="fas fa-code"></i>
                    <span>FrontendHub</span>
                </a>
            </div>
            <button class="nav-toggle" id="navToggle">
                <span></span>
                <span></span>
                <span></span>
            </button>
            <ul class="nav-menu" id="navMenu">
                <li><a href="../../index.html">首页</a></li>
                <li><a href="../index.html#features">特色</a></li>
                <li><a href="../index.html#courses">课程</a></li>
                <li><a href="../index.html#resources">资源</a></li>
            </ul>
        </div>
    </nav>

    <!-- 面包屑导航 -->
    <div class="breadcrumb">
        <div class="container">
            <a href="../../index.html"><i class="fas fa-home"></i> 首页</a>
            <i class="fas fa-chevron-right"></i>
            <span>实用工具模块 util</span>
        </div>
    </div>

    <!-- 主要内容区 -->
    <main class="content-main">
        <div class="container">
            <div class="content-layout">
                <!-- 侧边栏目录 -->
                <aside class="sidebar">
                    <div class="sidebar-sticky">
                        <h3><i class="fas fa-list"></i> 目录</h3>
                        <nav class="toc" id="toc">
                            <!-- 目录将通过JavaScript自动生成 -->
                        </nav>
                    </div>
                </aside>

                <!-- 文章内容 -->
                <article class="article">
                    <header class="article-header">
                        <h1>实用工具模块 util</h1>
                        <div class="article-meta">
                            <span><i class="far fa-calendar"></i> 更新时间：2025-12-23</span>
                            <span><i class="far fa-clock"></i> 阅读时长：约 15 分钟</span>
                        </div>
                    </header>

                    <div class="article-content">
<div class="content__default"><h2 id="debuglog-section"><a href="#debuglog-section" class="header-anchor">#</a> debuglog(section)</h2> <p>很有用的调试方法。可以通过 util.debuglog(name) 来创建一个调试fn，这个fn的特点是，只有在运行程序时候，声明环境变量NODE_DEBUG=name，才会打印出调试信息。</p> <p>可以看下面的例子，直接运行 <code>node debuglog.js</code>，没有任何输出。需要<code>NODE_DEBUG=foo</code>，才会有打印信息.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> util <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'util'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> logger <span class="token operator">=</span> util<span class="token punctuation">.</span><span class="token function">debuglog</span><span class="token punctuation">(</span><span class="token string">'foo'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">logger</span><span class="token punctuation">(</span><span class="token string">'hello'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>如下所示，注意，6347 是当前进程id。</p> <div class="language-bash extra-class"><pre class="language-bash"><code>➜  <span class="token number">2016.12</span>.02-util git:<span class="token punctuation">(</span>master<span class="token punctuation">)</span> ✗ <span class="token assign-left variable">NODE_DEBUG</span><span class="token operator">=</span>foo <span class="token function">node</span> debuglog.js
FOO <span class="token number">6347</span>: hello world
</code></pre></div><p>此外，还可以一次指定多个<code>name</code>，通过逗号分隔。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> util <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'util'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> firstLogger <span class="token operator">=</span> util<span class="token punctuation">.</span><span class="token function">debuglog</span><span class="token punctuation">(</span><span class="token string">'first'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> secondLogger <span class="token operator">=</span> util<span class="token punctuation">.</span><span class="token function">debuglog</span><span class="token punctuation">(</span><span class="token string">'second'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> thirdLogger <span class="token operator">=</span> util<span class="token punctuation">.</span><span class="token function">debuglog</span><span class="token punctuation">(</span><span class="token string">'third'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">firstLogger</span><span class="token punctuation">(</span><span class="token string">'hello'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">secondLogger</span><span class="token punctuation">(</span><span class="token string">'hello'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">thirdLogger</span><span class="token punctuation">(</span><span class="token string">'hello'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>运行如下：</p> <div class="language-bash extra-class"><pre class="language-bash"><code>FOO <span class="token number">6347</span>: hello world
➜  <span class="token number">2016.12</span>.02-util git:<span class="token punctuation">(</span>master<span class="token punctuation">)</span> ✗ <span class="token assign-left variable">NODE_DEBUG</span><span class="token operator">=</span>first,second <span class="token function">node</span> debuglog.js
FIRST <span class="token number">6456</span>: hello
SECOND <span class="token number">6456</span>: hello
</code></pre></div><h2 id="将方法标识为作废-util-deprecate-fn-str"><a href="#将方法标识为作废-util-deprecate-fn-str" class="header-anchor">#</a> 将方法标识为作废：util.deprecate(fn, str)</h2> <p>将<code>fn</code>包裹一层，并返回一个新的函数<code>fn2</code>。调用<code>fn2</code>时，同样完成<code>fn</code>原有的功能，但同时会打印出错误日志，提示方法已作废，具体的提示信息就是第二个参数<code>str</code>。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> util <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'util'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> <span class="token function-variable function">foo</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'foo'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> foo2 <span class="token operator">=</span> util<span class="token punctuation">.</span><span class="token function">deprecate</span><span class="token punctuation">(</span>foo<span class="token punctuation">,</span> <span class="token string">'foo is deprecate'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">foo2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 输出如下：</span>
<span class="token comment">// foo</span>
<span class="token comment">// (node:6608) DeprecationWarning: foo is deprecate</span>
</code></pre></div><p>如果嫌错误提示信息烦人，可以通过<code>--no-deprecation</code>参数禁掉，可以参考<a href="https://nodejs.org/api/util.html#util_util_deprecate_function_string" target="_blank" rel="noopener noreferrer">这里<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。</p> <div class="language-bash extra-class"><pre class="language-bash"><code>➜  <span class="token number">2016.12</span>.02-util git:<span class="token punctuation">(</span>master<span class="token punctuation">)</span> ✗ <span class="token function">node</span> --no-deprecation deprecate.js 
foo
</code></pre></div><h2 id="格式化打印-util-format-format-args"><a href="#格式化打印-util-format-format-args" class="header-anchor">#</a> 格式化打印：util.format(format[, ...args])</h2> <p>格式化打印大家应该比较熟悉了，基本每种语言里都有自己的实现，直接上例子。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> util <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'util'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> util<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token string">'hello %s'</span><span class="token punctuation">,</span> <span class="token string">'world'</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 输出：hello world</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> util<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token string">'1 + 1 = %d'</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 输出：1 + 1 = 2</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> util<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token string">'info: %j'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token literal-property property">nick</span><span class="token operator">:</span> <span class="token string">'chyingp'</span><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 输出：info: {"nick":"chyingp"}</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> util<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token string">'%s is %d age old'</span><span class="token punctuation">,</span> <span class="token string">'chyingp'</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 输出：chyingp is %d age old</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> util<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token string">'%s is a man'</span><span class="token punctuation">,</span> <span class="token string">'chyingp'</span><span class="token punctuation">,</span> <span class="token string">'indeed'</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 输出：chyingp is a man indeed</span>
</code></pre></div><h2 id="调试方法-util-inspect-obj-options"><a href="#调试方法-util-inspect-obj-options" class="header-anchor">#</a> 调试方法：util.inspect(obj[, options])</h2> <p>非常实用的一个方法，参数说明如下：</p> <ul><li>obj：js原始值，或者对象。</li> <li>options：配置参数，包含下面选项
<ul><li>showHidden：如果是true的话，obj的非枚举属性也会被展示出来。默认是false。</li> <li>depth：如果obj是对象，那么，depth限制对象递归展示的层级，这对可读性有一定的好处，默认是2。如果设置为null，则不做限制。</li> <li>colors：自定义配色方案。</li> <li>showProxy：</li> <li>maxArrayLength：如果obj是数组，那么限制最大可展示的数组个数。默认是100，如果设置为null，则不做限制。如果设置为0或负数，则一个都不展示。</li></ul></li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> util <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'util'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> <span class="token string">'nick'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">enumerable</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>  
  <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token string">'chyingp'</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> util<span class="token punctuation">.</span><span class="token function">inspect</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 输出：{}</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> util<span class="token punctuation">.</span><span class="token function">inspect</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token literal-property property">showHidden</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 输出：{ [nick]: 'chyingp' }</span>
</code></pre></div></div> <!----> <div class="readMore-wrapper"><span class="readMore">阅读全文</span></div>
                    </div>
                            <p>这是一个信息提示框。</p>
                        </div>

                        <div class="note warning">
                            <div class="note-title"><i class="fas fa-exclamation-triangle"></i> 注意</div>
                            <p>这是一个警告提示框。</p>
                        </div>

                        <div class="note success">
                            <div class="note-title"><i class="fas fa-check-circle"></i> 成功</div>
                            <p>这是一个成功提示框。</p>
                        </div>

                        <h2>代码示例</h2>
                        <pre><code class="language-javascript">// 示例代码
function example() {
    console.log('Hello, FrontendHub!');
}
</code></pre>
                    </div>

                    <!-- 文章底部导航 -->
                    <nav class="article-nav">
                        <a href="#" class="prev-article">
                            <i class="fas fa-chevron-left"></i>
                            <span>上一篇</span>
                        </a>
                        <a href="#" class="next-article">
                            <span>下一篇</span>
                            <i class="fas fa-chevron-right"></i>
                        </a>
                    </nav>
                </article>
            </div>
        </div>
    </main>

    <!-- 页脚 -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h4><i class="fas fa-code"></i> FrontendHub</h4>
                    <p>专注于前端技术学习与面试准备</p>
                </div>
                <div class="footer-section">
                    <h4>快速链接</h4>
                    <ul>
                        <li><a href="../../index.html">首页</a></li>
                        <li><a href="../index.html#courses">课程体系</a></li>
                        <li><a href="../index.html#resources">学习资源</a></li>
                    </ul>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2025 FrontendHub. 用于个人学习使用.</p>
            </div>
        </div>
    </footer>

    <!-- 返回顶部按钮 -->
    <button class="back-to-top" id="backToTop">
        <i class="fas fa-arrow-up"></i>
    </button>

    <script src="../../js/main.js"></script>
    <script src="../../js/content.js"></script>
</body>
</html>

