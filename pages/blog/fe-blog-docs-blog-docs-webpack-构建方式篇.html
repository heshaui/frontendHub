<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="referrer" content="no-referrer">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ„å»ºæ–¹å¼ç¯‡ - FrontendHub</title>
    <link rel="stylesheet" href="../../css/style.css">
    <link rel="stylesheet" href="../../css/content.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body class="content-page">
    <!-- å¯¼èˆªæ  -->
    <nav class="navbar">
        <div class="container">
            <div class="nav-brand">
                <a href="../../index.html" style="color: inherit; text-decoration: none; display: flex; align-items: center; gap: 0.5rem;">
                    <i class="fas fa-code"></i>
                    <span>FrontendHub</span>
                </a>
            </div>
            <button class="nav-toggle" id="navToggle">
                <span></span>
                <span></span>
                <span></span>
            </button>
            <ul class="nav-menu" id="navMenu">
                <li><a href="../../index.html">é¦–é¡µ</a></li>
                <li><a href="../index.html#features">ç‰¹è‰²</a></li>
                <li><a href="../index.html#courses">è¯¾ç¨‹</a></li>
                <li><a href="../index.html#resources">èµ„æº</a></li>
            </ul>
        </div>
    </nav>

    <!-- é¢åŒ…å±‘å¯¼èˆª -->
    <div class="breadcrumb">
        <div class="container">
            <a href="../../index.html"><i class="fas fa-home"></i> é¦–é¡µ</a>
            <i class="fas fa-chevron-right"></i>
            <span>æ„å»ºæ–¹å¼ç¯‡</span>
        </div>
    </div>

    <!-- ä¸»è¦å†…å®¹åŒº -->
    <main class="content-main">
        <div class="container">
            <div class="content-layout">
                <!-- ä¾§è¾¹æ ç›®å½• -->
                <aside class="sidebar">
                    <div class="sidebar-sticky">
                        <h3><i class="fas fa-list"></i> ç›®å½•</h3>
                        <nav class="toc" id="toc">
                            <!-- ç›®å½•å°†é€šè¿‡JavaScriptè‡ªåŠ¨ç”Ÿæˆ -->
                        </nav>
                    </div>
                </aside>

                <!-- æ–‡ç« å†…å®¹ -->
                <article class="article">
                    <header class="article-header">
                        <h1>æ„å»ºæ–¹å¼ç¯‡</h1>
                        <div class="article-meta">
                            <span><i class="far fa-calendar"></i> æ›´æ–°æ—¶é—´ï¼š2025-12-23</span>
                            <span><i class="far fa-clock"></i> é˜…è¯»æ—¶é•¿ï¼šçº¦ 15 åˆ†é’Ÿ</span>
                        </div>
                    </header>

                    <div class="article-content">
<div class="content__default"><h2 id="ä¸€ã€å‡ ç§å¼€å‘å·¥å…·"><a href="#ä¸€ã€å‡ ç§å¼€å‘å·¥å…·" class="header-anchor">#</a> ä¸€ã€å‡ ç§å¼€å‘å·¥å…·</h2> <p>æ¯æ¬¡è¦ç¼–è¯‘ä»£ç æ—¶ï¼Œæ‰‹åŠ¨è¿è¡Œ <code>npm run build</code> å°±ä¼šå˜å¾—å¾ˆéº»çƒ¦ã€‚</p> <blockquote><p>ä¸çŸ¥é“ä½ æœ‰æ²¡æœ‰ä½¿ç”¨è¿‡ç±»ä¼¼äº<code>vue-cli</code>è¿™æ ·çš„è„šæ‰‹æ¶å·¥å…·, åœ¨ä½¿ç”¨å®ƒä»¬çš„æ—¶å€™, æ¯æ¬¡åªè¦æ‰§è¡Œ<code>npm run start</code>è¿™æ ·çš„æŒ‡ä»¤å°±å¯ä»¥åˆ›å»ºä¸€ä¸ªæœ¬åœ°çš„<code>web</code>æœåŠ¡å™¨, ç„¶åæ‰“å¼€ä¸€ä¸ªä¾‹å¦‚<code>localhost:8080</code>è¿™æ ·çš„ç«¯å£é¡µé¢, åŒæ—¶è¿˜æœ‰çƒ­æ›´æ–°ç­‰åŠŸèƒ½.</p></blockquote> <p>å…¶å®è¿™äº›åŠŸèƒ½çš„å®ç°éƒ½æ˜¯<code>vue-cli</code>å†…éƒ¨ä½¿ç”¨äº†<code>webpack</code>.</p> <p><code>webpack</code>ä¸­æœ‰å‡ ä¸ªä¸åŒçš„é€‰é¡¹ï¼Œå¯ä»¥å¸®åŠ©ä½ åœ¨ä»£ç å‘ç”Ÿå˜åŒ–åè‡ªåŠ¨ç¼–è¯‘ä»£ç .</p> <h3 id="webpack-s-watch-mode-è§‚å¯Ÿè€…æ¨¡å¼"><a href="#webpack-s-watch-mode-è§‚å¯Ÿè€…æ¨¡å¼" class="header-anchor">#</a> webpack's Watch Mode(è§‚å¯Ÿè€…æ¨¡å¼)</h3> <p>è§‚å¯Ÿè€…æ¨¡å¼, åªéœ€è¦åœ¨<code>package.json</code>é‡Œé…ç½®ä¸€ä¸ªè„šæœ¬å‘½ä»¤:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token string-property property">"scripts"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
	<span class="token string-property property">"watch"</span><span class="token operator">:</span> <span class="token string">"webpack --watch"</span>
<span class="token punctuation">}</span>
</code></pre></div><p>ä½¿ç”¨<code>npm run watch</code>å‘½ä»¤ä¹‹å, ä¼šçœ‹åˆ°ç¼–è¯‘è¿‡ç¨‹, ä½†æ˜¯ä¸ä¼šé€€å‡ºå‘½ä»¤è¡Œ, è€Œæ˜¯å®æ—¶ç›‘æ§æ–‡ä»¶.</p> <p>æ¯”å¦‚ä½ åœ¨é‡æ–°ä¿®æ”¹äº†æœ¬åœ°çš„ä»£ç å¹¶ä¿å­˜å, å®ƒä¼šé‡æ–°è¿›è¡Œç¼–è¯‘, ä¸éœ€è¦æˆ‘ä»¬æ‰‹åŠ¨å†æ‰§è¡Œç¼–è¯‘æŒ‡ä»¤, ç¼ºç‚¹<strong>æ˜¯ä½ éœ€è¦æ‰‹åŠ¨åˆ·æ–°é¡µé¢</strong>æ‰èƒ½çœ‹åˆ°æ›´æ”¹æ•ˆæœ.</p> <p>(<code>--watch</code>ä¹Ÿå¯ä»¥ç®€å†™ä¸º<code>-w</code>)</p> <h3 id="webpack-dev-server"><a href="#webpack-dev-server" class="header-anchor">#</a> webpack-dev-server</h3> <p>ä½¿ç”¨<code>webpack-dev-server</code>ä¼šä¸ºä½ æä¾›ä¸€ä¸ªç®€å•çš„webæœåŠ¡å™¨, å®ƒçš„ä½œç”¨å°±æ˜¯ç›‘å¬æ–‡ä»¶çš„æ”¹å˜å¹¶è‡ªåŠ¨ç¼–è¯‘, <strong>åŒæ—¶ä¼šè‡ªåŠ¨åˆ·æ–°é¡µé¢</strong>. æ¯”è§‚å¯Ÿè€…æ¨¡å¼å‰å®³.</p> <p>ä½¿ç”¨æ­¥éª¤:</p> <ul><li>å®‰è£…: <code>$ npm i --save-dev webpack-dev-server</code></li> <li>æ·»åŠ è„šæœ¬å‘½ä»¤: <code>"start": "webpack-dev-server --open"</code></li></ul> <p><strong>ä½¿ç”¨æ­¤æŒ‡ä»¤æ•ˆæœ</strong>:</p> <p>ä¸ä¼šç”Ÿæˆ<code>dist</code>æ–‡ä»¶å¤¹, è€Œæ˜¯å¼€å¯äº†ä¸€ä¸ªæœ¬åœ°çš„webæœåŠ¡å™¨<code>localhost:8080</code></p> <p>æ¯æ¬¡ä¿®æ”¹äº†æœ¬åœ°ä»£ç ä¹‹å, éƒ½ä¼šé‡æ–°è‡ªåŠ¨ç¼–è¯‘, å¹¶åˆ·æ–°é¡µé¢</p> <p><strong>å…¶å®ƒé…ç½®é¡¹</strong>:</p> <p><code>webpack-dev-server</code>ä¹Ÿæœ‰å¾ˆå¤šé…ç½®é¡¹èƒ½åœ¨<code>webpack.config.js</code>ä¸­é…ç½®</p> <p>åªéœ€è¦åœ¨<code>devServer</code>é‡Œè¿›è¡Œé…ç½®, ä¾‹å¦‚:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">devServer</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">contentBase</span><span class="token operator">:</span> <span class="token string">'./dist'</span><span class="token punctuation">,</span> <span class="token comment">// å‘Šè¯‰æœåŠ¡å™¨ä»å“ªé‡Œæä¾›å†…å®¹</span>
        <span class="token literal-property property">host</span><span class="token operator">:</span> <span class="token string">'0.0.0.0'</span><span class="token punctuation">,</span> <span class="token comment">// é»˜è®¤æ˜¯ localhost</span>
        <span class="token literal-property property">port</span><span class="token operator">:</span> <span class="token number">8000</span><span class="token punctuation">,</span> <span class="token comment">// ç«¯å£å·, é»˜è®¤æ˜¯8080</span>
        <span class="token literal-property property">open</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// æ˜¯å¦è‡ªåŠ¨æ‰“å¼€æµè§ˆå™¨</span>
        <span class="token literal-property property">hot</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// å¯ç”¨ webpack çš„æ¨¡å—çƒ­æ›¿æ¢ç‰¹æ€§</span>
        <span class="token literal-property property">hotOnly</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token comment">// å½“ç¼–è¯‘å¤±è´¥ä¹‹åä¸è¿›è¡Œçƒ­æ›´æ–°</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>å¦‚æœä½ ä½¿ç”¨äº†è¿™ä¸ªåŠŸèƒ½ä¹‹å, ä½ å°±ä¼šå‘ç°, å®ƒå°±æœ‰ç‚¹<code>vue-cli</code>çš„æ ·å­äº†.</p> <p>æ›´å¤šå…³äº<code>devServer</code>çš„é…ç½®å¯ä»¥æŸ¥çœ‹è¿™é‡Œ: <a href="https://www.webpackjs.com/configuration/dev-server/" target="_blank" rel="noopener noreferrer">å¼€å‘ä¸­Server<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>ã€‚</p> <h3 id="webpack-dev-middleware"><a href="#webpack-dev-middleware" class="header-anchor">#</a> webpack-dev-middleware</h3> <h4 id="åŸºæœ¬ä½¿ç”¨"><a href="#åŸºæœ¬ä½¿ç”¨" class="header-anchor">#</a> åŸºæœ¬ä½¿ç”¨</h4> <p><code>webpack-dev-middleware</code> æ˜¯ä¸€ä¸ªå®¹å™¨(wrapper)ï¼Œå®ƒå¯ä»¥æŠŠ webpack å¤„ç†åçš„æ–‡ä»¶ä¼ é€’ç»™ä¸€ä¸ªæœåŠ¡å™¨(server)ã€‚</p> <p><code>webpack-dev-server</code> èƒ½å¤Ÿå¼€å¯ä¸€ä¸ªæœ¬åœ°çš„<code>web</code>æœåŠ¡å™¨, å°±æ˜¯å› ä¸ºåœ¨å†…éƒ¨ä½¿ç”¨äº†å®ƒï¼Œä½†æ˜¯, å®ƒä¹Ÿå¯ä»¥ä½œä¸ºä¸€ä¸ªåŒ…æ¥å•ç‹¬ä½¿ç”¨.</p> <p>è¿™é‡Œæˆ‘å°±ä»¥å®˜æ–¹çš„æ¡ˆä¾‹æ¥è¿›è¡Œè®²è§£.</p> <p>ä½¿ç”¨<code>webpack-dev-middleware</code>é…åˆ<code>express server</code>æ¥ä»‹ç»å®ƒçš„åŠŸèƒ½.</p> <p>ï¼ˆ<code>express</code>æ˜¯ä¸€ä¸ªå¾ˆç²¾ç®€çš„<code>Node.js</code>å¼€å‘æ¡†æ¶ï¼Œå¦‚æœä½ ä¹‹å‰æ²¡ç”¨è¿‡ä¹Ÿæ²¡å…³ç³»ï¼Œä½¿ç”¨èµ·æ¥å¾ˆç®€å•ã€‚ï¼‰</p> <p>å…ˆæ¥è¯´ä¸‹æˆ‘çš„éœ€æ±‚, æˆ‘æƒ³è¦å®ç°ä¸€ä¸ªè¿™ä¸ªåŠŸèƒ½:</p> <ul><li>é…ç½®ä¸€æ¡<code>script</code>æŒ‡ä»¤è®©å®ƒèƒ½è¿è¡Œä¸€ä¸ªæœ¬åœ°<code>web</code>æœåŠ¡å™¨(ä¹Ÿå°±æ˜¯èƒ½å¤Ÿåœ¨<code>localhost: 3000</code>ä¸­æŸ¥çœ‹é¡µé¢)</li> <li>æ¯æ¬¡ä¿®æ”¹æœ¬åœ°ä»£ç èƒ½å¤Ÿé‡æ–°ç¼–è¯‘</li> <li>ä½†æ˜¯ä¸ä¼šè‡ªåŠ¨åˆ·æ–°é¡µé¢</li></ul> <ol><li><strong>å®‰è£…æ‰€éœ€çš„ä¾èµ–</strong>:</li></ol> <div class="language- extra-class"><pre class="language-text"><code>$ npm i --save-dev webpack-dev-middleware express
</code></pre></div><ol start="2"><li><strong>åœ¨é¡¹ç›®çš„æ ¹ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ª<code>server.js</code>æ–‡ä»¶ç”¨æ¥ç¼–å†™æœ¬åœ°æœåŠ¡</strong>:</li></ol> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// server.js</span>
<span class="token keyword">const</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'express'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> webpack <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'webpack'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> webpackDevMiddleware <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'webpack-dev-middleware'</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">express</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> config <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./webpack.config'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> compiler <span class="token operator">=</span> <span class="token function">webpack</span><span class="token punctuation">(</span>config<span class="token punctuation">)</span>
<span class="token comment">// æŠŠ webpack å¤„ç†åçš„æ–‡ä»¶ä¼ é€’ç»™ä¸€ä¸ªæœåŠ¡å™¨</span>
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token function">webpackDevMiddleware</span><span class="token punctuation">(</span>compiler<span class="token punctuation">)</span><span class="token punctuation">)</span>

app<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">3000</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Example app listening on port 3000!\n'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><ol start="3"><li><strong>åœ¨<code>package.json</code>é‡Œé…ç½®æŒ‡ä»¤è¿è¡Œ<code>server.js</code></strong>:</li></ol> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">"scripts"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">"server"</span><span class="token operator">:</span> <span class="token string">"node server.js"</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="publicpathé…ç½®é¡¹"><a href="#publicpathé…ç½®é¡¹" class="header-anchor">#</a> publicPathé…ç½®é¡¹</h4> <p>åœ¨å­¦ä¹ è¿™é‡Œçš„æ—¶å€™, æˆ‘é¡ºä¾¿ä¹Ÿäº†è§£åˆ°äº†<code>webpack.config.js</code> ä¸­<code>output</code>çš„å¦ä¸€ä¸ªå±æ€§<code>publicPath</code>.</p> <p>å¼€å§‹çœ‹æ–‡æ¡£ <a href="https://www.webpackjs.com/configuration/output/#output-publicpath" target="_blank" rel="noopener noreferrer">output.outputPath<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>çš„æ—¶å€™æ²¡å¤ªçœ‹æ‡‚.</p> <p>åæ¥æˆ‘ç»“åˆ<code>webpack-dev-middleware</code>æ¥è¯•äº†ä¸€ä¸‹å®ƒ.</p> <p>é¦–å…ˆä¿®æ”¹ä¸€ä¸‹<code>webpack.config.js</code>çš„é…ç½®:</p> <div class="language-diff extra-class"><pre class="language-diff"><code>const path = require('path');
const HtmlWebpackPlugin = require('html-webpack-plugin');
const { CleanWebpackPlugin } = require('clean-webpack-plugin')

module.exports = {
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">   entry: {
</span><span class="token prefix unchanged"> </span><span class="token line">       app: './src/index.js',
</span><span class="token prefix unchanged"> </span><span class="token line">       print: './src/print.js'
</span><span class="token prefix unchanged"> </span><span class="token line">   },
</span><span class="token prefix unchanged"> </span><span class="token line">   devtool: 'inline-source-map', // ä»…å¼€å‘ç¯å¢ƒæŠ¥é”™è¿½è¸ª
</span><span class="token prefix unchanged"> </span><span class="token line">   plugins: [
</span><span class="token prefix unchanged"> </span><span class="token line">       new CleanWebpackPlugin({
</span><span class="token prefix unchanged"> </span><span class="token line">           cleanAfterEveryBuildPatterns: ['dist']
</span><span class="token prefix unchanged"> </span><span class="token line">       }),
</span><span class="token prefix unchanged"> </span><span class="token line">       new HtmlWebpackPlugin({
</span><span class="token prefix unchanged"> </span><span class="token line">           title: 'Webpack Output2',
</span><span class="token prefix unchanged"> </span><span class="token line">           filename: 'index.html',
</span><span class="token prefix unchanged"> </span><span class="token line">           template: 'src/index.html'
</span><span class="token prefix unchanged"> </span><span class="token line">       })
</span><span class="token prefix unchanged"> </span><span class="token line">   ],
</span><span class="token prefix unchanged"> </span><span class="token line">   output: {
</span><span class="token prefix unchanged"> </span><span class="token line">       filename: '[name].bundle.js',
</span><span class="token prefix unchanged"> </span><span class="token line">       path: path.resolve(__dirname, 'dist'),
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">       publicPath: '/assets/'
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">   }
</span></span>}
</code></pre></div><p>ç„¶åä¿®æ”¹ä¸€ä¸‹<code>server.js</code>:</p> <div class="language-diff extra-class"><pre class="language-diff"><code>// server.js
const express = require('express')
const webpack = require('webpack')
const webpackDevMiddleware = require('webpack-dev-middleware')

const app = express()
const config = require('./webpack.config')
const compiler = webpack(config)
// æŠŠwebpack å¤„ç†åçš„æ–‡ä»¶ä¼ é€’ç»™ä¸€ä¸ªæœåŠ¡å™¨
app.use(webpackDevMiddleware(compiler 
<span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">	,{
</span><span class="token prefix inserted">+</span><span class="token line">	    publicPath: config.output.publicPath
</span><span class="token prefix inserted">+</span><span class="token line">	}
</span></span>))

app.listen(3000, function() {
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">   console.log('Example app listening on port 3000!\n');
</span></span>})
</code></pre></div><p>ä¿å­˜ä¸Šé¢ğŸ‘†ä¸¤ä¸ªæ–‡ä»¶, ç„¶åé‡æ–°æ‰§è¡Œ<code>npm run server</code>, æ‰“å¼€<code>localhost:3000</code> ä¼šå‘ç°é¡µé¢æ˜¾ç¤ºçš„æ˜¯:</p> <div class="language-html extra-class"><pre class="language-html"><code>Cannot GET /
</code></pre></div><p>ä½ éœ€è¦æ‰“å¼€<code>localhost:3000/assets/</code>æ‰èƒ½çœ‹åˆ°æ­£ç¡®çš„é¡µé¢.</p> <p>å¹¶ä¸”å¦‚æœé¡¹ç›®é‡Œæœ‰å¯¹èµ„æºçš„å¼•ç”¨çš„è¯, ä¹Ÿä¼šè‡ªåŠ¨åŠ ä¸Š<code>publicPath</code>çš„å‰ç¼€:</p> <div class="language- extra-class"><pre class="language-text"><code>icon.png =&gt; å˜ä¸º /assets/icon.png
</code></pre></div><p>æ­¤é€‰é¡¹æŒ‡å®šåœ¨æµè§ˆå™¨ä¸­æ‰€å¼•ç”¨çš„ã€Œæ­¤è¾“å‡ºç›®å½•å¯¹åº”çš„<strong>å…¬å¼€ URL</strong>ã€ã€‚</p> <p><strong>æ³¨</strong>âš ï¸:</p> <p>å¦‚æœæ²¡æœ‰é…ç½®<code>output.publicPath</code>å’Œ<code>webpack-dev-middleware</code>çš„<code>publicPath</code>, åˆ™é»˜è®¤éƒ½ä¼šæ˜¯<code>""</code>ï¼Œä»¥æ ¹ç›®å½•ä½œä¸ºé…ç½®é¡¹ã€‚</p> <p>å¦‚æœé…ç½®äº†<code>output.publicPath</code>, åˆ™<code>webpack-dev-middleware</code>ä¸­çš„<code>publicPath</code>ä¹Ÿè¦å’Œå®ƒä¸€æ ·æ‰è¡Œã€‚</p> <h2 id="äºŒã€ä¸åŒç¯å¢ƒçš„æ„å»º"><a href="#äºŒã€ä¸åŒç¯å¢ƒçš„æ„å»º" class="header-anchor">#</a> äºŒã€ä¸åŒç¯å¢ƒçš„æ„å»º</h2> <p>å¼€å‘ç¯å¢ƒå’Œç”Ÿäº§ç¯å¢ƒçš„æ„å»ºç›®æ ‡å·®å¼‚æ˜¯éå¸¸å¤§çš„.</p> <ul><li>å¼€å‘ç¯å¢ƒä¸­, æˆ‘ä»¬å¯èƒ½æœ‰å®æ—¶é‡æ–°åŠ è½½(live reloading) ã€çƒ­æ¨¡å—æ›¿æ¢(hot module replacement)ç­‰èƒ½åŠ›</li> <li>ç”Ÿäº§ç¯å¢ƒä¸­, æˆ‘ä»¬æ›´åŠ å…³æ³¨æ›´å°çš„bundle(å‹ç¼©è¾“å‡º), æ›´è½»é‡çš„source map, è¿˜æœ‰æ›´ä¼˜åŒ–çš„èµ„æºç­‰.</li></ul> <p>æ‰€ä»¥ä¸ºäº†éµå¾ªé€»è¾‘åˆ†ç¦», æˆ‘ä»¬å¯ä»¥ä¸ºæ¯ä¸ªç¯å¢ƒç¼–å†™å½¼æ­¤ç‹¬ç«‹çš„webpacké…ç½®.</p> <p>è™½è¯´æ˜¯æƒ³è¦ç¼–å†™å„è‡ªç‹¬ç«‹çš„é…ç½®, ä½†æ˜¯è‚¯å®šä¹Ÿæœ‰ä¸€äº›å…¬ç”¨çš„é…ç½®é¡¹, æˆ‘ä»¬å¯ä»¥å°†è¿™äº›å…¬ç”¨çš„é…ç½®é¡¹æå–å‡ºæ¥, ç„¶åä¸åŒçš„é…ç½®å†™åœ¨ä¸åŒçš„æ–‡ä»¶ä¸­.</p> <p><strong>(ç¬¬äºŒèŠ‚æ•™ææ¡ˆä¾‹GitHubåœ°å€: <a href="https://github.com/LinDaiDai/webpack-example/tree/webpack-merge" target="_blank" rel="noopener noreferrer">LinDaidai/webpack-example/webpak-merge<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> âš ï¸ï¼šè¯·ä»”ç»†æŸ¥çœ‹READMEè¯´æ˜)</strong></p> <h3 id="webpack-merge"><a href="#webpack-merge" class="header-anchor">#</a> webpack-merge</h3> <p>æœ€ç»ˆ, ä¸ºäº†å°†è¿™äº›é…ç½®é¡¹åˆå¹¶åœ¨ä¸€èµ·, æˆ‘ä»¬éœ€è¦ç”¨åˆ°<code>webpack-merge</code>å·¥å…·.</p> <p>é¦–å…ˆå®‰è£…è¿™ä¸ªå·¥å…·:</p> <div class="language- extra-class"><pre class="language-text"><code>$ npm i --save-dev webpack-merge
</code></pre></div><p>ç„¶åè®©æˆ‘ä»¬å°†åŸæœ¬çš„<code>webpack.config.js</code>æ‹†å¼€, ç¼–å†™æˆä¸‰ä¸ªä¸åŒçš„webpacké…ç½®æ–‡ä»¶:</p> <div class="language-diff extra-class"><pre class="language-diff"><code><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> webpack-demo
</span><span class="token prefix unchanged"> </span><span class="token line"> |- package.json
</span></span><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line"> |- webpack.config.js
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line"> |- webpack.common.js
</span><span class="token prefix inserted">+</span><span class="token line"> |- webpack.dev.js
</span><span class="token prefix inserted">+</span><span class="token line"> |- webpack.prod.js
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> |- /dist
</span><span class="token prefix unchanged"> </span><span class="token line"> |- /src
</span><span class="token prefix unchanged"> </span><span class="token line">   |- index.js
</span><span class="token prefix unchanged"> </span><span class="token line">   |- math.js
</span><span class="token prefix unchanged"> </span><span class="token line"> |- /node_modules
</span></span></code></pre></div><p><strong>webpack.common.js</strong>:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> HtmlWebpackPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'html-webpack-plugin'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> CleanWebpackPlugin <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'clean-webpack-plugin'</span><span class="token punctuation">)</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">entry</span><span class="token operator">:</span> <span class="token string">'./src/index.js'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">output</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">'[name].bundle.js'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">path</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'dist'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token keyword">new</span> <span class="token class-name">CleanWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token keyword">new</span> <span class="token class-name">HtmlWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">'webpack bundle'</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>webpack.dev.js</strong>:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> merge <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'webpack-merge'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> commonConfig <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./webpack.common'</span><span class="token punctuation">)</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token function">merge</span><span class="token punctuation">(</span>commonConfig<span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">devtool</span><span class="token operator">:</span> <span class="token string">'inline-source-map'</span><span class="token punctuation">,</span> <span class="token comment">// é”™è¯¯è¿½è¸ª</span>
    <span class="token literal-property property">devServer</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token comment">// è®¾ç½® webpack-dev-server ç›‘å¬çš„æ–‡ä»¶</span>
        <span class="token literal-property property">contentBase</span><span class="token operator">:</span> <span class="token string">'./dist'</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p><strong>webpack.prod.js</strong>:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> merge <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'webpack-merge'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> commonConfig <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./webpack.common'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> UglifyJSPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'uglifyjs-webpack-plugin'</span><span class="token punctuation">)</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token function">merge</span><span class="token punctuation">(</span>commonConfig<span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token keyword">new</span> <span class="token class-name">UglifyJSPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// å‹ç¼©è¾“å‡º</span>
    <span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>å¯ä»¥çœ‹åˆ°, <code>webpack-merge</code>çš„åŠŸèƒ½å°±æ˜¯å°†å¤šä¸ª<code>webpack</code>çš„é…ç½®åˆå¹¶æˆä¸€ä¸ª.</p> <p>ç°åœ¨è®©æˆ‘ä»¬å†æ¥é…ç½®ä¸€ä¸‹<code>package.json</code>çš„è„šæœ¬å‘½ä»¤:</p> <p><strong>package.json</strong>:</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"webpack-bundle"</span><span class="token punctuation">,</span>
    <span class="token property">"version"</span><span class="token operator">:</span> <span class="token string">"1.0.0"</span><span class="token punctuation">,</span>
    <span class="token property">"description"</span><span class="token operator">:</span> <span class="token string">""</span><span class="token punctuation">,</span>
    <span class="token property">"main"</span><span class="token operator">:</span> <span class="token string">"index.js"</span><span class="token punctuation">,</span>
    <span class="token property">"scripts"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">"start"</span><span class="token operator">:</span> <span class="token string">"webpack-dev-server --open --config webpack.dev.js"</span><span class="token punctuation">,</span>
        <span class="token property">"build"</span><span class="token operator">:</span> <span class="token string">"webpack --config webpack.prod.js"</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token property">"keywords"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token property">"author"</span><span class="token operator">:</span> <span class="token string">""</span><span class="token punctuation">,</span>
    <span class="token property">"license"</span><span class="token operator">:</span> <span class="token string">"ISC"</span><span class="token punctuation">,</span>
    <span class="token property">"devDependencies"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">"clean-webpack-plugin"</span><span class="token operator">:</span> <span class="token string">"^3.0.0"</span><span class="token punctuation">,</span>
        <span class="token property">"html-webpack-plugin"</span><span class="token operator">:</span> <span class="token string">"^3.2.0"</span><span class="token punctuation">,</span>
        <span class="token property">"uglifyjs-webpack-plugin"</span><span class="token operator">:</span> <span class="token string">"^2.2.0"</span><span class="token punctuation">,</span>
        <span class="token property">"webpack"</span><span class="token operator">:</span> <span class="token string">"^4.41.5"</span><span class="token punctuation">,</span>
        <span class="token property">"webpack-cli"</span><span class="token operator">:</span> <span class="token string">"^3.3.10"</span><span class="token punctuation">,</span>
        <span class="token property">"webpack-dev-server"</span><span class="token operator">:</span> <span class="token string">"^3.10.3"</span><span class="token punctuation">,</span>
        <span class="token property">"webpack-merge"</span><span class="token operator">:</span> <span class="token string">"^4.2.2"</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>æ‰§è¡Œ<code>npm run start</code>ä¸ºå¼€å‘ç¯å¢ƒ, ä¼šè‡ªåŠ¨æ‰“å¼€<code>localhost:8080</code>é¡µé¢å¹¶ä¸”æœ‰è‡ªåŠ¨é‡è½½åŠŸèƒ½</li> <li>æ‰§è¡Œ<code>npm run build</code>ä¸ºç”Ÿäº§ç¯å¢ƒ, ä¼šæ‰“åŒ…ç”Ÿæˆ<code>dist</code>æ–‡ä»¶å¤¹, ä¸”<code>bundle</code>ä¸­<code>js</code>ä¸ºå‹ç¼©è¿‡åçš„ä»£ç .</li></ul> <h3 id="process-env-node-env"><a href="#process-env-node-env" class="header-anchor">#</a> process.env.NODE_ENV</h3> <h4 id="åŸºæœ¬ç”¨æ³•"><a href="#åŸºæœ¬ç”¨æ³•" class="header-anchor">#</a> åŸºæœ¬ç”¨æ³•</h4> <p><code>process.env.NODE_ENV</code>çš„ä½œç”¨ä¸»è¦æ˜¯å¸®æˆ‘ä»¬åˆ¤æ–­æ˜¯å¼€å‘ç¯å¢ƒ(development)è¿˜æ˜¯ç”Ÿäº§ç¯å¢ƒ(production).</p> <p>æŠ€æœ¯ä¸Šè®²ï¼Œ<code>NODE_ENV</code> æ˜¯ä¸€ä¸ªç”± Node.js æš´éœ²ç»™æ‰§è¡Œè„šæœ¬çš„ç³»ç»Ÿç¯å¢ƒå˜é‡ã€‚</p> <ol><li>ä½ å¯ä»¥åœ¨ä»»ä½•<code>src</code>çš„æœ¬åœ°ä»£ç ä¸­å¼•ç”¨åˆ°å®ƒ:</li></ol> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// print.js</span>
<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">print</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">NODE_ENV</span><span class="token punctuation">)</span> <span class="token comment">// development æˆ–è€… prodution</span>
<span class="token punctuation">}</span>
</code></pre></div><ol start="2"><li>ä½†æ˜¯ä½ åœ¨<code>webpack.config.js</code>ä¸­å´è·å–ä¸åˆ°å®ƒ, æ‰“å°å‡ºæ¥æ˜¯<code>undefined</code>.æ‰€ä»¥åƒä»¥ä¸‹ä»£ç æ˜¯<strong>ä¸èƒ½åƒé¢„æœŸä¸€æ ·å®ç°çš„</strong>:</li></ol> <div class="language-javascript extra-class"><pre class="language-javascript"><code>process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">NODE_ENV</span> <span class="token operator">===</span> <span class="token string">'production'</span> <span class="token operator">?</span> <span class="token string">'[name].[hash].bundle.js'</span> <span class="token operator">:</span> <span class="token string">'[name].bundle.js'</span>
</code></pre></div><h4 id="webpack-definepluginæ’ä»¶"><a href="#webpack-definepluginæ’ä»¶" class="header-anchor">#</a> webpack.DefinePluginæ’ä»¶</h4> <p>ä¹‹å‰ä»‹ç»è¿‡äº†, æˆ‘ä»¬æ˜¯ä¸èƒ½åœ¨<code>webpack.config.js</code>ä¸­è·å–åˆ°<code>process.env.NODE_ENV</code>çš„å€¼çš„, ä½†æ˜¯æˆ‘ä»¬å¯ä»¥ä½¿ç”¨<code>webpack</code>å†…ç½®çš„<code>DefinePlugin</code>æ’ä»¶æ¥ä¿®æ”¹è¿™ä¸ªå˜é‡.</p> <p>ä¾‹å¦‚æˆ‘åœ¨<code>webpack.prod.js</code>ä¸­çš„é…ç½®:</p> <div class="language-diff extra-class"><pre class="language-diff"><code><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line"> const webpack = require('webpack');
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> const merge = require('webpack-merge');
</span><span class="token prefix unchanged"> </span><span class="token line"> const UglifyJSPlugin = require('uglifyjs-webpack-plugin');
</span><span class="token prefix unchanged"> </span><span class="token line"> const commonConfig = require('./webpack.common.js');
</span></span>
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> module.exports = merge(commonConfig, {
</span><span class="token prefix unchanged"> </span><span class="token line">   devtool: 'source-map',
</span><span class="token prefix unchanged"> </span><span class="token line">   plugins: [
</span><span class="token prefix unchanged"> </span><span class="token line">     new UglifyJSPlugin({
</span><span class="token prefix unchanged"> </span><span class="token line">       sourceMap: true
</span></span><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">     })
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">     }),
</span><span class="token prefix inserted">+</span><span class="token line">     new webpack.DefinePlugin({
</span><span class="token prefix inserted">+</span><span class="token line">       'process.env.NODE_ENV': JSON.stringify('production')
</span><span class="token prefix inserted">+</span><span class="token line">     })
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">   ]
</span><span class="token prefix unchanged"> </span><span class="token line"> });
</span></span></code></pre></div><p>ä½¿ç”¨<code>webpack.DefinePlugin()</code>æ–¹æ³•ä¿®æ”¹äº†<code>process.env.NODE_ENV</code>.</p> <p>ä½ å¯ä»¥è®¾ç½®æˆ<code>JSON.stringify('production')</code>, ä¹Ÿå¯ä»¥è®¾ç½®æˆ:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>DefinePlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token string-property property">'process.env'</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token string-property property">'NODE_ENV'</span><span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">"production"</span><span class="token template-punctuation string">`</span></span>
      <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h4 id="å‘½ä»¤è¡Œé…ç½®æ¨¡å¼mode"><a href="#å‘½ä»¤è¡Œé…ç½®æ¨¡å¼mode" class="header-anchor">#</a> å‘½ä»¤è¡Œé…ç½®æ¨¡å¼mode</h4> <p>é™¤äº†ä½¿ç”¨<code>webpack.DefinePlugin</code>æ’ä»¶æ¥ä¿®æ”¹ç¯å¢ƒå˜é‡çš„æ¨¡å¼, è¿˜å¯ä»¥åœ¨å‘½ä»¤è¡Œä¸­ä¿®æ”¹å®ƒ:</p> <div class="language- extra-class"><pre class="language-text"><code>webpack --mode=production
æˆ–è€…
webpack --mode=development
</code></pre></div><p>ä½¿ç”¨äº†<code>--mode</code>è®¾ç½®ç¯å¢ƒå˜é‡æ¨¡å¼, åœ¨æœ¬åœ°ä»£ç ä¸Šè·å–åˆ°çš„<code>process.env.NODE_ENV</code>çš„å€¼å°±æ˜¯<code>mode</code>çš„å€¼.</p> <p><strong>ä¸è¿‡å¦‚æœä½ åŒæ—¶åœ¨å‘½ä»¤è¡Œä¸­è®¾ç½®çš„<code>--mode</code>, åˆä½¿ç”¨äº†<code>webpac.definePlugin</code>æ’ä»¶, åè€…çš„ä¼˜å…ˆçº§é«˜ç‚¹.</strong></p> <h4 id="å‘½ä»¤è¡Œä¼ é€’ç¯å¢ƒå˜é‡"><a href="#å‘½ä»¤è¡Œä¼ é€’ç¯å¢ƒå˜é‡" class="header-anchor">#</a> å‘½ä»¤è¡Œä¼ é€’ç¯å¢ƒå˜é‡</h4> <p>å¦‚æœæˆ‘ä»¬åœ¨å‘½ä»¤è¡Œä¸­é€šè¿‡<code>--env</code>æ¥è®¾ç½®ä¸€äº›å˜é‡å€¼, è¿™äº›å˜é‡å€¼èƒ½ä½¿æˆ‘ä»¬åœ¨webpack.config.jsçš„é…ç½®ä¸­è®¿é—®åˆ°.</p> <p><strong>åœ¨webpackå‘½ä»¤è¡Œé…ç½®ä¸­, é€šè¿‡è®¾ç½® <code>--env</code> å¯ä»¥ä½¿ä½ æ ¹æ®éœ€è¦ï¼Œä¼ å…¥å°½å¯èƒ½å¤šçš„ç¯å¢ƒå˜é‡</strong></p> <p>ä¾‹å¦‚æˆ‘æ–°å»ºäº†ä¸€ä¸ªå‘½ä»¤è¡Œ:</p> <div class="language-diff extra-class"><pre class="language-diff"><code>{
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">   "scripts": {
</span><span class="token prefix unchanged"> </span><span class="token line">       "start": "webpack-dev-server --open --config webpack.dev.js",
</span><span class="token prefix unchanged"> </span><span class="token line">       "build": "webpack --config webpack.prod.js",
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">       "local": "webpack --env.custom=local --env.production --progress --config webpack.local.js"
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">   }
</span></span>}
</code></pre></div><p>æ‹†å¼€æ¥çœ‹:</p> <ul><li><code>--env.custom=local</code> ç»™ç¯å¢ƒå˜é‡ä¸­è®¾ç½®ä¸€ä¸ªè‡ªå®šä¹‰çš„å±æ€§ <code>custom</code>, å®ƒçš„å€¼ä¸º<code>local</code></li> <li><code>--env.production</code>  è®¾ç½®<code>env.production == true</code>(è¿™é‡Œçš„<code>env</code>å¹¶ä¸ä¼šå½±å“<code>process.env</code>)</li> <li><code>--progress</code> æ‰“å°å‡ºç¼–è¯‘è¿›åº¦çš„ç™¾åˆ†æ¯”å€¼</li> <li><code>--config webpack.local.js</code> ä»¥<code>webpack.local.js</code>ä¸­çš„å†…å®¹æ‰§è¡Œwebpackæ„å»º</li></ul> <p>åŒæ—¶æˆ‘åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ª<code>wepack.local.js</code>:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> commonConfig <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./webpack.common'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> merge <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'webpack-merge'</span><span class="token punctuation">)</span>

module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token parameter">env</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'custom: '</span><span class="token punctuation">,</span> env<span class="token punctuation">.</span>custom<span class="token punctuation">)</span> <span class="token comment">// 'local'</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Production: '</span><span class="token punctuation">,</span> env<span class="token punctuation">.</span>production<span class="token punctuation">)</span> <span class="token comment">// true</span>
    <span class="token keyword">return</span> <span class="token function">merge</span><span class="token punctuation">(</span>commonConfig<span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>å¯ä»¥çœ‹åˆ°å®ƒä¸æ™®éçš„<code>webpack.config.js</code>çš„åŒºåˆ«åœ¨äº, å®ƒå¯¼å‡ºçš„æ˜¯ä¸€ä¸ªå‡½æ•°, ä¸”è¿™ä¸ªå‡½æ•°ä¸­èƒ½è®¿é—®<code>env</code>ç¯å¢ƒå˜é‡.</p> <p>è¿™æ ·æˆ‘ä»¬å°±å¯ä»¥å°†åœ¨å‘½ä»¤è¡Œä¸­è®¾ç½®çš„å˜é‡è·å–åˆ°äº†.</p> <h4 id="å‘½ä»¤è¡Œä¼ é€’ç¯å¢ƒå˜é‡åˆ¤æ–­node-env"><a href="#å‘½ä»¤è¡Œä¼ é€’ç¯å¢ƒå˜é‡åˆ¤æ–­node-env" class="header-anchor">#</a> å‘½ä»¤è¡Œä¼ é€’ç¯å¢ƒå˜é‡åˆ¤æ–­NODE_ENV</h4> <p>è¿˜è®°å¾—æˆ‘ä»¬ä¹‹å‰è¯´, åœ¨<code>webpack.config.js</code>ä¸­æ˜¯ä¸èƒ½è·å–åˆ°ç¯å¢ƒå˜é‡<code>process.env.NODE_ENV</code> , ä¹Ÿå°±æ˜¯ä¸èƒ½åšä»¥ä¸‹åˆ¤æ–­:</p> <div class="language- extra-class"><pre class="language-text"><code>process.env.NODE_ENV === 'production' ? '[name].[hash].bundle.js' : '[name].bundle.js'
</code></pre></div><p>ä½†æ˜¯ç°åœ¨æˆ‘ä»¬åœ¨å‘½ä»¤è¡Œé‡Œä¼ é€’ä¸€ä¸ªå˜é‡è¿›å», æ¯”å¦‚å«åš<code>NODE_ENV</code>, è¿™æ ·å°±å¯ä»¥åœ¨<code>webpack.config.js</code>é‡Œä½œåŒºåˆ†äº†.</p> <p>è®©æˆ‘ä»¬åœ¨æ ¹ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªåä¸º<code>webpack.combine.js</code>çš„é…ç½®æ–‡ä»¶:</p> <p><strong>webpack.combine.js</strong>:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> HtmlWebpackPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'html-webpack-plugin'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> CleanWebpackPlugin <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'clean-webpack-plugin'</span><span class="token punctuation">)</span>

module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token parameter">env</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">entry</span><span class="token operator">:</span> <span class="token string">'./src/index.js'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">output</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token literal-property property">filename</span><span class="token operator">:</span> env<span class="token punctuation">.</span><span class="token constant">NODE_ENV</span> <span class="token operator">===</span> <span class="token string">'production'</span> <span class="token operator">?</span> <span class="token string">'[name].[hash].bundle.js'</span> <span class="token operator">:</span> <span class="token string">'[name].bundle.js'</span><span class="token punctuation">,</span>
            <span class="token literal-property property">path</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'dist'</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>
            <span class="token keyword">new</span> <span class="token class-name">CleanWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token keyword">new</span> <span class="token class-name">HtmlWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
                <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">'åˆå¹¶æˆåŒä¸€ä¸ªwebpacké…ç½®'</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°<code>ouput.filename</code>,å¯ä»¥é€šè¿‡<code>NODE_ENV</code>æ¥åˆ¤æ–­.</p> <p>æ‰€ä»¥æˆ‘éœ€è¦åœ¨<code>package.json</code> ä¸­è¿›è¡Œå‚æ•°çš„ä¼ é€’:</p> <div class="language-diff extra-class"><pre class="language-diff"><code>{
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">   "name": "webpack-bundle",
</span><span class="token prefix unchanged"> </span><span class="token line">   "version": "1.0.0",
</span><span class="token prefix unchanged"> </span><span class="token line">   "description": "",
</span><span class="token prefix unchanged"> </span><span class="token line">   "main": "index.js",
</span><span class="token prefix unchanged"> </span><span class="token line">   "scripts": {
</span><span class="token prefix unchanged"> </span><span class="token line">       "test": "echo \"Error: no test specified\" &amp;&amp; exit 1",
</span><span class="token prefix unchanged"> </span><span class="token line">       "start": "webpack-dev-server --open --config webpack.dev.js",
</span><span class="token prefix unchanged"> </span><span class="token line">       "build": "webpack --config webpack.prod.js",
</span><span class="token prefix unchanged"> </span><span class="token line">       "local": "webpack --env.custom=local --env.production=false --mode=development --progress --config webpack.local.js",
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">       "combine-dev": "webpack --env.NODE_ENV=development --config webpack.combine.js",
</span><span class="token prefix inserted">+</span><span class="token line">       "combine-prod": "webpack --env.NODE_ENV=production --config webpack.combine.js"
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">   },
</span><span class="token prefix unchanged"> </span><span class="token line">   "keywords": [],
</span><span class="token prefix unchanged"> </span><span class="token line">   "author": "",
</span><span class="token prefix unchanged"> </span><span class="token line">   "license": "ISC",
</span><span class="token prefix unchanged"> </span><span class="token line">   "devDependencies": {
</span><span class="token prefix unchanged"> </span><span class="token line">       "clean-webpack-plugin": "^3.0.0",
</span><span class="token prefix unchanged"> </span><span class="token line">       "html-webpack-plugin": "^3.2.0",
</span><span class="token prefix unchanged"> </span><span class="token line">       "lodash": "^4.17.15",
</span><span class="token prefix unchanged"> </span><span class="token line">       "uglifyjs-webpack-plugin": "^2.2.0",
</span><span class="token prefix unchanged"> </span><span class="token line">       "webpack": "^4.41.5",
</span><span class="token prefix unchanged"> </span><span class="token line">       "webpack-cli": "^3.3.10",
</span><span class="token prefix unchanged"> </span><span class="token line">       "webpack-dev-server": "^3.10.3",
</span><span class="token prefix unchanged"> </span><span class="token line">       "webpack-merge": "^4.2.2"
</span><span class="token prefix unchanged"> </span><span class="token line">   }
</span></span>}
</code></pre></div><p>ç°åœ¨åˆ†åˆ«æ‰§è¡Œ<code>combine-dev</code>å’Œ<code>combine-prod</code>, å¯ä»¥çœ‹åˆ°ç”Ÿæˆçš„bundleåˆä¸åŒçš„æ•ˆæœ.</p> <p><code>combine-dev</code>ç”Ÿæˆçš„jsæ–‡ä»¶æ˜¯<code>main.bundle.js</code></p> <p><code>combine-prod</code>ç”Ÿæˆçš„jsæ–‡ä»¶æ˜¯<code>main.a79eb0c94212b905d48b.bundle.js</code></p> <p><strong>ä½†æ˜¯æœ‰ä¸€ç‚¹éœ€è¦æ³¨æ„çš„æ˜¯è¿™é‡Œçš„env.NODE_ENVå¹¶ä¸æ˜¯process.env.NODE_ENV</strong>, æ‰€ä»¥å®ƒå¹¶ä¸èƒ½æ”¹å˜<code>process.env</code>.</p> <p>ä¹Ÿå°±æ˜¯è¯´ä¸ç®¡ä½ é€šè¿‡å“ªç§æ–¹å¼ç”Ÿæˆçš„é¡µé¢, ä½ åœ¨é¡µé¢ä¸­è·å–åˆ°çš„<code>process.env.NODE_ENV</code>éƒ½è¿˜æ˜¯<code>production</code>.</p> <h3 id="ç¬¬äºŒèŠ‚æ€»ç»“"><a href="#ç¬¬äºŒèŠ‚æ€»ç»“" class="header-anchor">#</a> ç¬¬äºŒèŠ‚æ€»ç»“</h3> <ul><li>å¯ä»¥å®‰è£…<code>webpack-merge</code>å·¥å…·å¸®åŠ©æˆ‘ä»¬å°†å¤šä¸ªé…ç½®æ–‡ä»¶åˆå¹¶æˆä¸€ä¸ª</li> <li>åœ¨<code>webpack.config.js</code>è·å–ä¸åˆ°ç¯å¢ƒå˜é‡<code>process</code></li> <li>å¯ä»¥é€šè¿‡<code>webpack.DefinePlugin</code>æ’ä»¶å¸®åŠ©æˆ‘ä»¬ä¿®æ”¹<code>process.env</code>çš„å€¼</li> <li>è¿˜å¯ä»¥é€šè¿‡å‘½ä»¤è¡Œ<code>CLI</code>ä¸­çš„ <code>--mode</code> æ¥ä¿®æ”¹ç¯å¢ƒå˜é‡çš„æ¨¡å¼</li> <li>è‹¥æ˜¯<code>webpack.config.js</code>å¯¼å‡ºçš„æ˜¯ä¸€ä¸ªå‡½æ•°, åˆ™å…è®¸æˆ‘ä»¬åœ¨å‘½ä»¤è¡Œä¸­ç”¨ <code>--env</code> ä¼ é€’ç¯å¢ƒå˜é‡</li></ul></div> <!----> <div class="readMore-wrapper"><span class="readMore">é˜…è¯»å…¨æ–‡</span></div>
                    </div>
                            <p>è¿™æ˜¯ä¸€ä¸ªä¿¡æ¯æç¤ºæ¡†ã€‚</p>
                        </div>

                        <div class="note warning">
                            <div class="note-title"><i class="fas fa-exclamation-triangle"></i> æ³¨æ„</div>
                            <p>è¿™æ˜¯ä¸€ä¸ªè­¦å‘Šæç¤ºæ¡†ã€‚</p>
                        </div>

                        <div class="note success">
                            <div class="note-title"><i class="fas fa-check-circle"></i> æˆåŠŸ</div>
                            <p>è¿™æ˜¯ä¸€ä¸ªæˆåŠŸæç¤ºæ¡†ã€‚</p>
                        </div>

                        <h2>ä»£ç ç¤ºä¾‹</h2>
                        <pre><code class="language-javascript">// ç¤ºä¾‹ä»£ç 
function example() {
    console.log('Hello, FrontendHub!');
}
</code></pre>
                    </div>

                    <!-- æ–‡ç« åº•éƒ¨å¯¼èˆª -->
                    <nav class="article-nav">
                        <a href="#" class="prev-article">
                            <i class="fas fa-chevron-left"></i>
                            <span>ä¸Šä¸€ç¯‡</span>
                        </a>
                        <a href="#" class="next-article">
                            <span>ä¸‹ä¸€ç¯‡</span>
                            <i class="fas fa-chevron-right"></i>
                        </a>
                    </nav>
                </article>
            </div>
        </div>
    </main>

    <!-- é¡µè„š -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h4><i class="fas fa-code"></i> FrontendHub</h4>
                    <p>ä¸“æ³¨äºå‰ç«¯æŠ€æœ¯å­¦ä¹ ä¸é¢è¯•å‡†å¤‡</p>
                </div>
                <div class="footer-section">
                    <h4>å¿«é€Ÿé“¾æ¥</h4>
                    <ul>
                        <li><a href="../../index.html">é¦–é¡µ</a></li>
                        <li><a href="../index.html#courses">è¯¾ç¨‹ä½“ç³»</a></li>
                        <li><a href="../index.html#resources">å­¦ä¹ èµ„æº</a></li>
                    </ul>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2025 FrontendHub. ç”¨äºä¸ªäººå­¦ä¹ ä½¿ç”¨.</p>
            </div>
        </div>
    </footer>

    <!-- è¿”å›é¡¶éƒ¨æŒ‰é’® -->
    <button class="back-to-top" id="backToTop">
        <i class="fas fa-arrow-up"></i>
    </button>

    <script src="../../js/main.js"></script>
    <script src="../../js/content.js"></script>
</body>
</html>

