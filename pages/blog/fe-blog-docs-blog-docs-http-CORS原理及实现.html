<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CORSåŸç†åŠå®ç° - FrontendHub</title>
    <link rel="stylesheet" href="../../css/style.css">
    <link rel="stylesheet" href="../../css/content.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body class="content-page">
    <!-- å¯¼èˆªæ  -->
    <nav class="navbar">
        <div class="container">
            <div class="nav-brand">
                <a href="../../index.html" style="color: inherit; text-decoration: none; display: flex; align-items: center; gap: 0.5rem;">
                    <i class="fas fa-code"></i>
                    <span>FrontendHub</span>
                </a>
            </div>
            <button class="nav-toggle" id="navToggle">
                <span></span>
                <span></span>
                <span></span>
            </button>
            <ul class="nav-menu" id="navMenu">
                <li><a href="../../index.html">é¦–é¡µ</a></li>
                <li><a href="../index.html#features">ç‰¹è‰²</a></li>
                <li><a href="../index.html#courses">è¯¾ç¨‹</a></li>
                <li><a href="../index.html#resources">èµ„æº</a></li>
            </ul>
        </div>
    </nav>

    <!-- é¢åŒ…å±‘å¯¼èˆª -->
    <div class="breadcrumb">
        <div class="container">
            <a href="../../index.html"><i class="fas fa-home"></i> é¦–é¡µ</a>
            <i class="fas fa-chevron-right"></i>
            <span>CORSåŸç†åŠå®ç°</span>
        </div>
    </div>

    <!-- ä¸»è¦å†…å®¹åŒº -->
    <main class="content-main">
        <div class="container">
            <div class="content-layout">
                <!-- ä¾§è¾¹æ ç›®å½• -->
                <aside class="sidebar">
                    <div class="sidebar-sticky">
                        <h3><i class="fas fa-list"></i> ç›®å½•</h3>
                        <nav class="toc" id="toc">
                            <!-- ç›®å½•å°†é€šè¿‡JavaScriptè‡ªåŠ¨ç”Ÿæˆ -->
                        </nav>
                    </div>
                </aside>

                <!-- æ–‡ç« å†…å®¹ -->
                <article class="article">
                    <header class="article-header">
                        <h1>CORSåŸç†åŠå®ç°</h1>
                        <div class="article-meta">
                            <span><i class="far fa-calendar"></i> æ›´æ–°æ—¶é—´ï¼š2025-12-23</span>
                            <span><i class="far fa-clock"></i> é˜…è¯»æ—¶é•¿ï¼šçº¦ 15 åˆ†é’Ÿ</span>
                        </div>
                    </header>

                    <div class="article-content">
<div class="content__default"><h2 id="corsåŸç†åŠå®ç°"><a href="#corsåŸç†åŠå®ç°" class="header-anchor">#</a> CORSåŸç†åŠå®ç°</h2> <h3 id="corsè·¨åŸŸçš„åŸç†"><a href="#corsè·¨åŸŸçš„åŸç†" class="header-anchor">#</a> CORSè·¨åŸŸçš„åŸç†</h3> <p>è·¨åŸŸèµ„æºå…±äº«(<code>CORS</code>)æ˜¯ä¸€ç§æœºåˆ¶ï¼Œæ˜¯W3Cæ ‡å‡†ã€‚å®ƒå…è®¸æµè§ˆå™¨å‘è·¨æºæœåŠ¡å™¨ï¼Œå‘å‡º<code>XMLHttpRequest</code>æˆ–<code>Fetch</code>è¯·æ±‚ã€‚å¹¶ä¸”æ•´ä¸ª<code>CORS</code>é€šä¿¡è¿‡ç¨‹éƒ½æ˜¯æµè§ˆå™¨è‡ªåŠ¨å®Œæˆçš„ï¼Œä¸éœ€è¦ç”¨æˆ·å‚ä¸ã€‚</p> <p>è€Œä½¿ç”¨è¿™ç§<code>è·¨åŸŸèµ„æºå…±äº«</code>çš„å‰ææ˜¯ï¼Œæµè§ˆå™¨å¿…é¡»æ”¯æŒè¿™ä¸ªåŠŸèƒ½ï¼Œå¹¶ä¸”æœåŠ¡å™¨ç«¯ä¹Ÿå¿…é¡»åŒæ„è¿™ç§<code>"è·¨åŸŸ"</code>è¯·æ±‚ã€‚å› æ­¤å®ç°<code>CORS</code>çš„å…³é”®æ˜¯æœåŠ¡å™¨éœ€è¦æœåŠ¡å™¨ã€‚é€šå¸¸æ˜¯æœ‰ä»¥ä¸‹å‡ ä¸ªé…ç½®ï¼š</p> <ul><li><strong>Access-Control-Allow-Origin</strong></li> <li><strong>Access-Control-Allow-Methods</strong></li> <li><strong>Access-Control-Allow-Headers</strong></li> <li><strong>Access-Control-Allow-Credentials</strong></li> <li><strong>Access-Control-Max-Age</strong></li></ul> <p>å…·ä½“å¯çœ‹ï¼šhttps://developer.mozilla.org/zh-CN/docs/Web/HTTP/Access_control_CORS#Preflighted_requests</p> <p>è¿‡ç¨‹åˆ†æï¼š</p> <ul><li><p>æµè§ˆå™¨å…ˆæ ¹æ®åŒæºç­–ç•¥å¯¹å‰ç«¯é¡µé¢å’Œåå°äº¤äº’åœ°å€åšåŒ¹é…ï¼Œè‹¥åŒæºï¼Œåˆ™ç›´æ¥å‘é€æ•°æ®è¯·æ±‚ï¼›è‹¥ä¸åŒæºï¼Œåˆ™å‘é€è·¨åŸŸè¯·æ±‚ã€‚</p></li> <li><p>æœåŠ¡å™¨æ”¶åˆ°æµè§ˆå™¨è·¨åŸŸè¯·æ±‚åï¼Œæ ¹æ®è‡ªèº«é…ç½®è¿”å›å¯¹åº”æ–‡ä»¶å¤´ã€‚è‹¥æœªé…ç½®è¿‡ä»»ä½•å…è®¸è·¨åŸŸï¼Œåˆ™æ–‡ä»¶å¤´é‡Œä¸åŒ…å« <code>Access-Control-Allow-origin</code> å­—æ®µï¼Œè‹¥é…ç½®è¿‡åŸŸåï¼Œåˆ™è¿”å› <code>Access-Control-Allow-origin + å¯¹åº”é…ç½®è§„åˆ™é‡Œçš„åŸŸåçš„æ–¹å¼</code>ã€‚</p></li> <li><p>æµè§ˆå™¨æ ¹æ®æ¥å—åˆ°çš„ å“åº”å¤´é‡Œçš„ <code>Access-Control-Allow-origin</code> å­—æ®µåšåŒ¹é…ï¼Œè‹¥æ— è¯¥å­—æ®µï¼Œè¯´æ˜ä¸å…è®¸è·¨åŸŸï¼Œä»è€ŒæŠ›å‡ºä¸€ä¸ªé”™è¯¯ï¼›è‹¥æœ‰è¯¥å­—æ®µï¼Œåˆ™å¯¹å­—æ®µå†…å®¹å’Œå½“å‰åŸŸååšæ¯”å¯¹ï¼Œå¦‚æœåŒæºï¼Œåˆ™è¯´æ˜å¯ä»¥è·¨åŸŸï¼Œæµè§ˆå™¨æ¥å—è¯¥å“åº”ï¼›è‹¥ä¸åŒæºï¼Œåˆ™è¯´æ˜è¯¥åŸŸåä¸å¯è·¨åŸŸï¼Œæµè§ˆå™¨ä¸æ¥å—è¯¥å“åº”ï¼Œå¹¶æŠ›å‡ºä¸€ä¸ªé”™è¯¯ã€‚</p></li></ul> <p>å¦å¤–åœ¨<code>CORS</code>ä¸­æœ‰<code>ç®€å•è¯·æ±‚</code>å’Œ<code>éç®€å•è¯·æ±‚</code>ï¼Œç®€å•è¯·æ±‚æ˜¯ä¸ä¼šè§¦å‘<code>CORS</code>çš„é¢„æ£€è¯·æ±‚çš„ï¼Œè€Œéç®€å•è¯·æ±‚ä¼šã€‚</p> <p><code>â€œéœ€é¢„æ£€çš„è¯·æ±‚â€</code>è¦æ±‚å¿…é¡»é¦–å…ˆä½¿ç”¨ <a href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Methods/OPTIONS" target="_blank" rel="noopener noreferrer"><code>OPTIONS</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>  æ–¹æ³•å‘èµ·ä¸€ä¸ªé¢„æ£€è¯·æ±‚åˆ°æœåŠ¡å™¨ï¼Œä»¥è·çŸ¥æœåŠ¡å™¨æ˜¯å¦å…è®¸è¯¥å®é™…è¯·æ±‚ã€‚"é¢„æ£€è¯·æ±‚â€œçš„ä½¿ç”¨ï¼Œå¯ä»¥é¿å…è·¨åŸŸè¯·æ±‚å¯¹æœåŠ¡å™¨çš„ç”¨æˆ·æ•°æ®äº§ç”Ÿæœªé¢„æœŸçš„å½±å“ã€‚</p> <h3 id="corsçš„å“ªäº›æ˜¯ç®€å•è¯·æ±‚"><a href="#corsçš„å“ªäº›æ˜¯ç®€å•è¯·æ±‚" class="header-anchor">#</a> CORSçš„å“ªäº›æ˜¯ç®€å•è¯·æ±‚ï¼Ÿ</h3> <p>ç®€å•è¯·æ±‚ä¸ä¼šè§¦å‘<code>CORS</code>çš„é¢„æ£€è¯·æ±‚ï¼Œè‹¥è¯·æ±‚æ»¡è¶³æ‰€æœ‰ä¸‹è¿°æ¡ä»¶ï¼Œåˆ™è¯¥è¯·æ±‚å¯è§†ä¸ºâ€œç®€å•è¯·æ±‚â€ï¼š</p> <p><strong>ç®€å•å›ç­”</strong>ï¼š</p> <ul><li>åªèƒ½ä½¿ç”¨<code>GET</code>ã€<code>HEAD</code>ã€<code>POST</code>æ–¹æ³•ã€‚ä½¿ç”¨<code>POST</code>æ–¹æ³•å‘æœåŠ¡å™¨å‘é€æ•°æ®æ—¶ï¼Œ<code>Content-Type</code>åªèƒ½ä½¿ç”¨<code>application/x-www-form-urlencoded</code>ã€<code>multipart/form-data</code>æˆ–<code>text/plain</code>ç¼–ç æ ¼å¼ã€‚</li> <li>è¯·æ±‚æ—¶ä¸èƒ½ä½¿ç”¨è‡ªå®šä¹‰çš„<code>HTTP Headers</code></li></ul> <p><strong>è¯¦ç»†å›ç­”</strong>ï¼š</p> <ul><li><p>(ä¸€) ä½¿ç”¨ä¸‹åˆ—æ–¹æ³•ä¹‹ä¸€</p> <ul><li><code>GET</code></li> <li><code>HEAD</code></li> <li><code>POST</code></li></ul></li> <li><p>(äºŒ) äººä¸ºè®¾ç½®ä»¥ä¸‹é›†åˆå¤–çš„è¯·æ±‚å¤´</p> <ul><li><code>Accept</code></li> <li><code>Accept-Language</code></li> <li><code>Content-Language</code></li> <li><code>Content-Type</code>(ä½†æ˜¯æœ‰é™åˆ¶)</li> <li><code>DPR</code></li> <li><code>Downlink</code></li> <li><code>Save-Data</code></li> <li><code>Viewport-Width</code></li> <li><code>Width</code></li></ul></li> <li><p>(ä¸‰) <code>Content-Type</code>çš„å€¼ä»…é™äºä¸‹é¢çš„ä¸‰è€…ä¹‹ä¸€</p> <ul><li><code>text/plain</code></li> <li><code>multipart/form-data</code></li> <li><code>application/x-www-form-urlencoded</code></li></ul></li> <li><p>è¯·æ±‚ä¸­çš„ä»»æ„<a href="https://developer.mozilla.org/zh-CN/docs/Web/API/XMLHttpRequestUpload" target="_blank" rel="noopener noreferrer"><code>XMLHttpRequestUpload</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> å¯¹è±¡å‡æ²¡æœ‰æ³¨å†Œä»»ä½•äº‹ä»¶ç›‘å¬å™¨ï¼›<a href="https://developer.mozilla.org/zh-CN/docs/Web/API/XMLHttpRequestUpload" target="_blank" rel="noopener noreferrer"><code>XMLHttpRequestUpload</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> å¯¹è±¡å¯ä»¥ä½¿ç”¨ <a href="https://developer.mozilla.org/zh-CN/docs/Web/API/XMLHttpRequest/upload" target="_blank" rel="noopener noreferrer"><code>XMLHttpRequest.upload</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> å±æ€§è®¿é—®ã€‚</p></li> <li><p>è¯·æ±‚ä¸­æ²¡æœ‰ä½¿ç”¨ <a href="https://developer.mozilla.org/zh-CN/docs/Web/API/ReadableStream" target="_blank" rel="noopener noreferrer"><code>ReadableStream</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> å¯¹è±¡ã€‚</p></li></ul> <p>é™¤äº†ä¸Šé¢è¿™äº›è¯·æ±‚å¤–ï¼Œéƒ½æ˜¯éç®€å•è¯·æ±‚ã€‚</p> <h3 id="corsçš„é¢„æ£€è¯·æ±‚å…·ä½“æ˜¯æ€æ ·çš„"><a href="#corsçš„é¢„æ£€è¯·æ±‚å…·ä½“æ˜¯æ€æ ·çš„" class="header-anchor">#</a> CORSçš„é¢„æ£€è¯·æ±‚å…·ä½“æ˜¯æ€æ ·çš„ï¼Ÿ</h3> <p>è‹¥æ˜¯è·¨åŸŸçš„éç®€å•è¯·æ±‚çš„è¯ï¼Œæµè§ˆå™¨ä¼šé¦–å…ˆå‘æœåŠ¡å™¨å‘é€ä¸€ä¸ªé¢„æ£€è¯·æ±‚ï¼Œä»¥è·çŸ¥æœåŠ¡å™¨æ˜¯å¦å…è®¸è¯¥å®é™…è¯·æ±‚ã€‚</p> <p>æ•´ä¸ªè¿‡ç¨‹å¤§æ¦‚æ˜¯ï¼š</p> <ul><li>æµè§ˆå™¨ç»™æœåŠ¡å™¨å‘é€ä¸€ä¸ª<code>OPTIONS</code>æ–¹æ³•çš„è¯·æ±‚ï¼Œè¯¥è¯·æ±‚ä¼šæºå¸¦ä¸‹é¢ä¸¤ä¸ªé¦–éƒ¨å­—æ®µï¼š
<ul><li><code>Access-Control-Request-Method</code>: å®é™…è¯·æ±‚è¦ç”¨åˆ°çš„æ–¹æ³•</li> <li><code>Access-Control-Request-Headers</code>: å®é™…è¯·æ±‚ä¼šæºå¸¦å“ªäº›é¦–éƒ¨å­—æ®µ</li></ul></li> <li>è‹¥æ˜¯æœåŠ¡å™¨æ¥å—åç»­è¯·æ±‚ï¼Œåˆ™è¿™æ¬¡é¢„è¯·æ±‚çš„å“åº”ä½“ä¸­ä¼šæºå¸¦ä¸‹é¢çš„ä¸€äº›å­—æ®µï¼š
<ul><li><code>Access-Control-Allow-Methods</code>: æœåŠ¡å™¨å…è®¸ä½¿ç”¨çš„æ–¹æ³•</li> <li><code>Access-Control-Allow-Origin</code>: æœåŠ¡å™¨å…è®¸è®¿é—®çš„åŸŸå</li> <li><code>Access-Control-Allow-Headers</code>: æœåŠ¡å™¨å…è®¸çš„é¦–éƒ¨å­—æ®µ</li> <li><code>Access-Control-Max-Age</code>: è¯¥å“åº”çš„æœ‰æ•ˆæ—¶é—´(s),åœ¨æœ‰æ•ˆæ—¶é—´å†…æµè§ˆå™¨æ— éœ€å†ä¸ºåŒä¸€ä¸ªè¯·æ±‚å‘é€é¢„æ£€è¯·æ±‚</li></ul></li> <li>é¢„æ£€è¯·æ±‚å®Œæ¯•ä¹‹åï¼Œå†å‘é€å®é™…è¯·æ±‚</li></ul> <p>è¿™é‡Œæœ‰ä¸¤ç‚¹è¦æ³¨æ„ï¼š</p> <p>ä¸€ï¼š</p> <p><code>Access-Control-Request-Method</code>æ²¡æœ‰<code>s</code></p> <p><code>Access-Control-Allow-Methods</code>æœ‰<code>s</code></p> <p>äºŒï¼š</p> <p>å…³äº<code>Access-Control-Max-Age</code>ï¼Œæµè§ˆå™¨è‡ªèº«ä¹Ÿæœ‰ç»´æŠ¤ä¸€ä¸ªæœ€å¤§æœ‰æ•ˆæ—¶é—´ï¼Œå¦‚æœè¯¥é¦–éƒ¨å­—æ®µçš„å€¼è¶…è¿‡äº†æœ€å¤§æœ‰æ•ˆæ—¶é—´ï¼Œå°†ä¸ä¼šç”Ÿæ•ˆï¼Œè€Œæ˜¯ä»¥æœ€å¤§æœ‰æ•ˆæ—¶é—´ä¸ºä¸»ã€‚</p> <h3 id="corsç®€å•è¯·æ±‚çš„æ¡ˆä¾‹"><a href="#corsç®€å•è¯·æ±‚çš„æ¡ˆä¾‹" class="header-anchor">#</a> CORSç®€å•è¯·æ±‚çš„æ¡ˆä¾‹</h3> <p>è¿˜æ˜¯åœ¨åŸæœ¬<code>JSONP</code>çš„é‚£ä¸ªæ¡ˆä¾‹ä¸Šã€‚</p> <p>æˆ‘åœ¨æ ¹ç›®å½•ä¸‹æ–°å»ºäº†ä¸€ä¸ªæ–‡ä»¶å¤¹<code>cors</code>ï¼Œå¹¶å¾€é‡Œé¢æ·»åŠ äº†ä¸€ä¸ª<code>index.html</code>æ–‡ä»¶ï¼š</p> <p><strong>/cors/index.html</strong></p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>en<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>UTF-8<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>viewport<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>width=device-width, initial-scale=1.0<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>CORS<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>getName<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>è·å–name<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>https://cdn.bootcss.com/axios/0.19.2/axios.min.js<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
    getName<span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token comment">// ç®€å•è¯·æ±‚</span>
      axios<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"http://127.0.0.1:8080/api/corsname"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>ä¸ºäº†åé¢ä¹Ÿæ–¹ä¾¿è°ƒè¯•ï¼Œç”¨<code>node</code>ç®€å•å†™äº†ä¸€ä¸ªå‰ç«¯çš„æœ¬åœ°æœåŠ¡å’Œåç«¯çš„æœ¬åœ°æœåŠ¡ã€‚</p> <p>åœ¨æ ¹ç›®å½•ä¸‹æ–°å»º<code>client.js</code>æ–‡ä»¶ï¼Œå¹¶å†™å…¥ï¼š</p> <p><strong>./client.js</strong>:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> Koa <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'koa'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'fs'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Koa</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">ctx</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>ctx<span class="token punctuation">.</span>method <span class="token operator">===</span> <span class="token string">'GET'</span> <span class="token operator">&amp;&amp;</span> ctx<span class="token punctuation">.</span>path <span class="token operator">===</span> <span class="token string">'/'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    ctx<span class="token punctuation">.</span>body <span class="token operator">=</span> fs<span class="token punctuation">.</span><span class="token function">readFileSync</span><span class="token punctuation">(</span><span class="token string">'./index.html'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>ctx<span class="token punctuation">.</span>method <span class="token operator">===</span> <span class="token string">'GET'</span> <span class="token operator">&amp;&amp;</span> ctx<span class="token punctuation">.</span>path <span class="token operator">===</span> <span class="token string">'/cors'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    ctx<span class="token punctuation">.</span>body <span class="token operator">=</span> fs<span class="token punctuation">.</span><span class="token function">readFileSync</span><span class="token punctuation">(</span><span class="token string">'./cors/index.html'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'client 8000...'</span><span class="token punctuation">)</span>
app<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">8000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>åœ¨æ ¹ç›®å½•ä¸‹æ–°å»º<code>index.html</code>æ–‡ä»¶ï¼Œå¹¶å†™å…¥ï¼š</p> <p><strong>./index.html</strong>:</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>en<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>UTF-8<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>viewport<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>width=device-width, initial-scale=1.0<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>Client<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/cors<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>CORSè·¨åŸŸ<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>(ä»¥ä¸Šï¼šå®ç°äº†ä¸€ä¸ªç®€å•çš„å‰ç«¯è·¯ç”±æ•ˆæœ)</p> <p>åœ¨æ ¹ç›®å½•ä¸‹æ–°å»º<code>server.js</code>æ–‡ä»¶ï¼Œå¹¶å†™å…¥ï¼š</p> <p><strong>./server.js</strong>:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> Koa <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'koa'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Koa</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">ctx<span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  ctx<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">"Access-Control-Allow-Origin"</span><span class="token punctuation">,</span> ctx<span class="token punctuation">.</span>header<span class="token punctuation">.</span>origin<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// ctx.set("Access-Control-Allow-Methods", "PUT,POST,GET,DELETE,OPTIONS");</span>
  <span class="token comment">// ctx.set("Access-Control-Request-Method", "PUT,POST,GET,DELETE,OPTIONS");</span>
  ctx<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>
    <span class="token string">"Access-Control-Allow-Headers"</span><span class="token punctuation">,</span> 
    <span class="token string">"Origin, X-Requested-With, Content-Type, Access, cc"</span>
  <span class="token punctuation">)</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>ctx<span class="token punctuation">.</span>method <span class="token operator">===</span> <span class="token string">'OPTIONS'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    ctx<span class="token punctuation">.</span>status <span class="token operator">=</span> <span class="token number">204</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">await</span> <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>ctx<span class="token punctuation">.</span>path <span class="token operator">===</span> <span class="token string">'/api/corsname'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    ctx<span class="token punctuation">.</span>body <span class="token operator">=</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token string">'LinDaiDai'</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'server 8080...'</span><span class="token punctuation">)</span>
app<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">8080</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>å¹¶ç»™<code>package.json</code>ä¸­é…ç½®ä¸¤ä¸ªå¯åŠ¨æŒ‡ä»¤ï¼š</p> <p><strong>package.json</strong>:</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">"scripts"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
  	<span class="token property">"client"</span><span class="token operator">:</span> <span class="token string">"node ./client.js"</span><span class="token punctuation">,</span>
  	<span class="token property">"server"</span><span class="token operator">:</span> <span class="token string">"node ./server.js"</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>OKğŸ‘Œï¼Œæ¥åˆ†åˆ«å¯åŠ¨ä¸€ä¸‹<code>npm run client</code>å’Œ<code>npm run server</code></p> <p>å¹¶æ‰“å¼€é¡µé¢çš„<code>127.0.0.1:8000/cors</code>ï¼ˆæˆ–è€…æ‰“å¼€<code>127.0.0.1:8000</code>ç„¶åç‚¹å‡»<code>CORS</code>è¿™ä¸ª<code>a</code>æ ‡ç­¾ï¼‰</p> <p>ç‚¹å‡»<code>è·å–name</code>æŒ‰é’®ï¼Œå¯ä»¥çœ‹åˆ°èƒ½å¤Ÿæ­£å¸¸è·å–åˆ°æœ¬åœ°æœåŠ¡å™¨çš„æ•°æ®äº†ã€‚</p> <h3 id="corséç®€å•è¯·æ±‚çš„æ¡ˆä¾‹"><a href="#corséç®€å•è¯·æ±‚çš„æ¡ˆä¾‹" class="header-anchor">#</a> CORSéç®€å•è¯·æ±‚çš„æ¡ˆä¾‹</h3> <p>æ¥ç€è®©æˆ‘ä»¬æ¥æ”¹é€ ä¸€ä¸‹<code>./cors/index.html</code>ä¸­çš„æŒ‰é’®ç‚¹å‡»è¯·æ±‚ï¼Œè®©å®ƒå˜æˆä¸€ä¸ªéç®€å•è¯·æ±‚ï¼š</p> <p><strong>./cors/index.html</strong>:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>getName<span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// ç®€å•è¯·æ±‚</span>
  <span class="token comment">// axios.get("http://127.0.0.1:8080/api/corsname");</span>

  <span class="token comment">// éç®€å•è¯·æ±‚</span>
  axios<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'http://127.0.0.1:8080/api/corsname'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">headers</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">cc</span><span class="token operator">:</span> <span class="token string">'lindaidai'</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>æ­¤æ—¶ï¼Œæ‰“å¼€é¡µé¢ç‚¹å‡»æŒ‰é’®ä¼šå‘ç°å‘é€äº†ä¸¤æ¬¡<code>corsname</code>çš„è¯·æ±‚ï¼š</p> <p>ï¼ˆä¸€ï¼‰é¢„æ£€è¯·æ±‚ï¼š</p> <p><img src="https://s.poetries.top/uploads/2025/10/0ab2dde992a6c957.png" alt=""></p> <p>ï¼ˆäºŒï¼‰å®é™…è¯·æ±‚ï¼š</p> <p><img src="https://s.poetries.top/uploads/2025/10/9667d53cb7f72726.png" alt=""></p> <h3 id="corsé™„å¸¦èº«ä»½å‡­è¯çš„æ¡ˆä¾‹"><a href="#corsé™„å¸¦èº«ä»½å‡­è¯çš„æ¡ˆä¾‹" class="header-anchor">#</a> CORSé™„å¸¦èº«ä»½å‡­è¯çš„æ¡ˆä¾‹</h3> <p>å¯¹äºè·¨åŸŸ <a href="https://developer.mozilla.org/zh-CN/docs/Web/API/XMLHttpRequest" target="_blank" rel="noopener noreferrer"><code>XMLHttpRequest</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> æˆ– <a href="https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API" target="_blank" rel="noopener noreferrer">Fetch<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> è¯·æ±‚ï¼Œæµè§ˆå™¨<strong>ä¸ä¼š</strong>å‘é€èº«ä»½å‡­è¯ä¿¡æ¯ã€‚å¦‚æœè¦å‘é€å‡­è¯ä¿¡æ¯ï¼Œéœ€è¦è®¾ç½® <code>XMLHttpRequest</code>çš„æŸä¸ªç‰¹æ®Šæ ‡å¿—ä½ã€‚</p> <p>ä¾‹å¦‚æˆ‘ä»¬æƒ³è¦åœ¨è·¨åŸŸè¯·æ±‚ä¸­å¸¦ä¸Š<code>cookie</code>ï¼Œéœ€è¦æ»¡è¶³3ä¸ªæ¡ä»¶ï¼š</p> <ul><li>webï¼ˆæµè§ˆå™¨ï¼‰è¯·æ±‚è®¾ç½®<code>withCredentials</code>ä¸º<code>true</code></li> <li>æœåŠ¡å™¨è®¾ç½®é¦–éƒ¨å­—æ®µ<code>Access-Control-Allow-Credentials</code>ä¸º<code>true</code></li> <li>æœåŠ¡å™¨çš„<code>Access-Control-Allow-Origin</code>ä¸èƒ½ä¸º<code>*</code></li></ul> <p>æ‰€ä»¥ä¸ºäº†æ¨¡æ‹Ÿè¿™ä¸ªæ•ˆæœï¼Œè®©æˆ‘ä»¬æ¥å†™ä¸€ä¸ªå°å°çš„ç™»å½•+è·å–æ•°æ®çš„åŠŸèƒ½å§ã€‚</p> <p>é¦–å…ˆå¯¹äºwebç«¯ï¼Œæˆ‘æ–°å¢äº†ä¸€ä¸ªç™»å½•æŒ‰é’®ï¼Œå¹¶ä¸”é…ç½®äº†ä¸€ä¸‹<code>axios</code>ï¼š</p> <p><strong>./cors/index.html</strong>:</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>en<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>UTF-8<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>viewport<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>width=device-width, initial-scale=1.0<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>CORS<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>getName<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>è·å–name<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>login<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>ç™»å½•<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>https://cdn.bootcss.com/axios/0.19.2/axios.min.js<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
    axios<span class="token punctuation">.</span>defaults<span class="token punctuation">.</span>withCredentials <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    axios<span class="token punctuation">.</span>defaults<span class="token punctuation">.</span>baseURL <span class="token operator">=</span> <span class="token string">'http://127.0.0.1:8080'</span>
    login<span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      axios<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">'/api/login'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    getName<span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      axios<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/api/corsname'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>æ¥ç€ä¸ºäº†æ›´æ–¹ä¾¿çš„æ¨¡æ‹Ÿåå°è¯·æ±‚ï¼Œæˆ‘éœ€è¦åœ¨é¡¹ç›®ä¸­å®‰è£…ä¸¤ä¸ªä¸­é—´ä»¶ï¼š</p> <div class="language- extra-class"><pre class="language-text"><code>cnpm i --save-dev koa-router koa-body
</code></pre></div><p>æ¥ç€ä¿®æ”¹ä¸€ä¸‹<code>server.js</code>çš„åå°é…ç½®ï¼š</p> <p><strong>./server.js</strong>:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> Koa <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"koa"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"koa-router"</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> koaBody <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"koa-body"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Koa</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token constant">TOKEN</span> <span class="token operator">=</span> <span class="token string">"112233"</span><span class="token punctuation">;</span> <span class="token comment">// æ¨¡æ‹Ÿå†™æ­»ä¸€ä¸ªtoken</span>

app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">ctx<span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  ctx<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">"Access-Control-Allow-Origin"</span><span class="token punctuation">,</span> ctx<span class="token punctuation">.</span>header<span class="token punctuation">.</span>origin<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// ctx.set("Access-Control-Allow-Methods", "PUT,POST,GET,DELETE,OPTIONS");</span>
  ctx<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">"Access-Control-Request-Method"</span><span class="token punctuation">,</span> <span class="token string">"PUT,POST,GET,DELETE,OPTIONS"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  ctx<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>
    <span class="token string">"Access-Control-Allow-Headers"</span><span class="token punctuation">,</span>
    <span class="token string">"Origin, X-Requested-With, Content-Type, Access, cc"</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
  ctx<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">"Access-Control-Allow-Credentials"</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// è¿™æ­¥å¾ˆé‡è¦</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>ctx<span class="token punctuation">.</span>method <span class="token operator">===</span> <span class="token string">"OPTIONS"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    ctx<span class="token punctuation">.</span>status <span class="token operator">=</span> <span class="token number">204</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">await</span> <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">ctx<span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// è‹¥æ˜¯ç™»å½•æ¥å£åˆ™è·³è¿‡åé¢çš„tokenéªŒè¯</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>ctx<span class="token punctuation">.</span>path <span class="token operator">===</span> <span class="token string">"/api/login"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">await</span> <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// å¯¹æ‰€æœ‰éç™»å½•çš„è¯·æ±‚éªŒè¯token</span>
  <span class="token keyword">const</span> cookies <span class="token operator">=</span> ctx<span class="token punctuation">.</span>cookies<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"token"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>cookies<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>cookies <span class="token operator">&amp;&amp;</span> cookies <span class="token operator">===</span> <span class="token constant">TOKEN</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">await</span> <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  ctx<span class="token punctuation">.</span>body <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">code</span><span class="token operator">:</span> <span class="token number">401</span><span class="token punctuation">,</span>
    <span class="token literal-property property">msg</span><span class="token operator">:</span> <span class="token string">"æƒé™é”™è¯¯"</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// å¦‚æœä¸åŠ multipartï¼štrue ctx.request.bodyä¼šè·å–ä¸åˆ°å€¼</span>
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token function">koaBody</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">multipart</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

router<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"/api/corsname"</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">ctx</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  ctx<span class="token punctuation">.</span>body <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token string">"LinDaiDai"</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

router<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">"/api/login"</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">ctx</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  ctx<span class="token punctuation">.</span>cookies<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">"token"</span><span class="token punctuation">,</span> <span class="token constant">TOKEN</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">expires</span><span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token operator">+</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1000</span> <span class="token operator">*</span> <span class="token number">60</span> <span class="token operator">*</span> <span class="token number">60</span> <span class="token operator">*</span> <span class="token number">24</span> <span class="token operator">*</span> <span class="token number">7</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  ctx<span class="token punctuation">.</span>body <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">msg</span><span class="token operator">:</span> <span class="token string">"æˆåŠŸ"</span><span class="token punctuation">,</span>
    <span class="token literal-property property">code</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>router<span class="token punctuation">.</span><span class="token function">routes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"server 8080..."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
app<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">8080</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>ç°åœ¨è®©æˆ‘ä»¬é‡å¯ä¸€ä¸‹æœåŠ¡ï¼Œç„¶åæ‰“å¼€é¡µé¢çœ‹çœ‹æ•ˆæœï¼š</p> <p>ï¼ˆä¸€ï¼‰ç‚¹å‡»ç™»å½•ï¼š</p> <p><img src="https://s.poetries.top/uploads/2025/10/ad1d19c3e0dd9af4.png" alt=""></p> <p>ï¼ˆäºŒï¼‰ç‚¹å‡»è·å–nameï¼š</p> <p><img src="https://s.poetries.top/uploads/2025/10/038d3e9cf8093e73.png" alt=""></p> <p>ï¼ˆä¸‰ï¼‰æŸ¥çœ‹cookieï¼š</p> <p><img src="https://s.poetries.top/uploads/2025/10/4af867877552c852.png" alt=""></p> <h3 id="å¦‚ä½•å‡å°‘corsé¢„è¯·æ±‚çš„æ¬¡æ•°"><a href="#å¦‚ä½•å‡å°‘corsé¢„è¯·æ±‚çš„æ¬¡æ•°" class="header-anchor">#</a> å¦‚ä½•å‡å°‘CORSé¢„è¯·æ±‚çš„æ¬¡æ•°ï¼Ÿ</h3> <p>æ–¹æ¡ˆä¸€ï¼šå‘å‡ºç®€å•è¯·æ±‚(è¿™ä¸æ˜¯åºŸè¯å—...)</p> <p>æ–¹æ¡ˆäºŒï¼šæœåŠ¡ç«¯è®¾ç½®<code>Access-Control-Max-Age</code>å­—æ®µï¼Œåœ¨æœ‰æ•ˆæ—¶é—´å†…æµè§ˆå™¨æ— éœ€å†ä¸ºåŒä¸€ä¸ªè¯·æ±‚å‘é€é¢„æ£€è¯·æ±‚ã€‚ä½†æ˜¯å®ƒæœ‰å±€é™æ€§ï¼šåªèƒ½ä¸ºåŒä¸€ä¸ªè¯·æ±‚ç¼“å­˜ï¼Œæ— æ³•é’ˆå¯¹æ•´ä¸ªåŸŸæˆ–è€…æ¨¡ç³ŠåŒ¹é… URL åšç¼“å­˜ã€‚</p> <h2 id="å‚è€ƒæ–‡ç« "><a href="#å‚è€ƒæ–‡ç« " class="header-anchor">#</a> å‚è€ƒæ–‡ç« </h2> <ul><li>https://cloud.tencent.com/developer/article/1454464</li> <li>https://juejin.im/post/5e948bbbf265da47f2561705#heading-12</li></ul></div> <!----> <div class="readMore-wrapper"><span class="readMore">é˜…è¯»å…¨æ–‡</span></div>
                    </div>
                            <p>è¿™æ˜¯ä¸€ä¸ªä¿¡æ¯æç¤ºæ¡†ã€‚</p>
                        </div>

                        <div class="note warning">
                            <div class="note-title"><i class="fas fa-exclamation-triangle"></i> æ³¨æ„</div>
                            <p>è¿™æ˜¯ä¸€ä¸ªè­¦å‘Šæç¤ºæ¡†ã€‚</p>
                        </div>

                        <div class="note success">
                            <div class="note-title"><i class="fas fa-check-circle"></i> æˆåŠŸ</div>
                            <p>è¿™æ˜¯ä¸€ä¸ªæˆåŠŸæç¤ºæ¡†ã€‚</p>
                        </div>

                        <h2>ä»£ç ç¤ºä¾‹</h2>
                        <pre><code class="language-javascript">// ç¤ºä¾‹ä»£ç 
function example() {
    console.log('Hello, FrontendHub!');
}
</code></pre>
                    </div>

                    <!-- æ–‡ç« åº•éƒ¨å¯¼èˆª -->
                    <nav class="article-nav">
                        <a href="#" class="prev-article">
                            <i class="fas fa-chevron-left"></i>
                            <span>ä¸Šä¸€ç¯‡</span>
                        </a>
                        <a href="#" class="next-article">
                            <span>ä¸‹ä¸€ç¯‡</span>
                            <i class="fas fa-chevron-right"></i>
                        </a>
                    </nav>
                </article>
            </div>
        </div>
    </main>

    <!-- é¡µè„š -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h4><i class="fas fa-code"></i> FrontendHub</h4>
                    <p>ä¸“æ³¨äºå‰ç«¯æŠ€æœ¯å­¦ä¹ ä¸é¢è¯•å‡†å¤‡</p>
                </div>
                <div class="footer-section">
                    <h4>å¿«é€Ÿé“¾æ¥</h4>
                    <ul>
                        <li><a href="../../index.html">é¦–é¡µ</a></li>
                        <li><a href="../index.html#courses">è¯¾ç¨‹ä½“ç³»</a></li>
                        <li><a href="../index.html#resources">å­¦ä¹ èµ„æº</a></li>
                    </ul>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2025 FrontendHub. ç”¨äºä¸ªäººå­¦ä¹ ä½¿ç”¨.</p>
            </div>
        </div>
    </footer>

    <!-- è¿”å›é¡¶éƒ¨æŒ‰é’® -->
    <button class="back-to-top" id="backToTop">
        <i class="fas fa-arrow-up"></i>
    </button>

    <script src="../../js/main.js"></script>
    <script src="../../js/content.js"></script>
</body>
</html>

