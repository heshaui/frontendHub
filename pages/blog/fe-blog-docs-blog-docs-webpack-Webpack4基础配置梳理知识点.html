<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Webpack4åŸºç¡€é…ç½®æ¢³ç†çŸ¥è¯†ç‚¹ - FrontendHub</title>
    <link rel="stylesheet" href="../../css/style.css">
    <link rel="stylesheet" href="../../css/content.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body class="content-page">
    <!-- å¯¼èˆªæ  -->
    <nav class="navbar">
        <div class="container">
            <div class="nav-brand">
                <a href="../../index.html" style="color: inherit; text-decoration: none; display: flex; align-items: center; gap: 0.5rem;">
                    <i class="fas fa-code"></i>
                    <span>FrontendHub</span>
                </a>
            </div>
            <button class="nav-toggle" id="navToggle">
                <span></span>
                <span></span>
                <span></span>
            </button>
            <ul class="nav-menu" id="navMenu">
                <li><a href="../../index.html">é¦–é¡µ</a></li>
                <li><a href="../index.html#features">ç‰¹è‰²</a></li>
                <li><a href="../index.html#courses">è¯¾ç¨‹</a></li>
                <li><a href="../index.html#resources">èµ„æº</a></li>
            </ul>
        </div>
    </nav>

    <!-- é¢åŒ…å±‘å¯¼èˆª -->
    <div class="breadcrumb">
        <div class="container">
            <a href="../../index.html"><i class="fas fa-home"></i> é¦–é¡µ</a>
            <i class="fas fa-chevron-right"></i>
            <span>Webpack4åŸºç¡€é…ç½®æ¢³ç†çŸ¥è¯†ç‚¹</span>
        </div>
    </div>

    <!-- ä¸»è¦å†…å®¹åŒº -->
    <main class="content-main">
        <div class="container">
            <div class="content-layout">
                <!-- ä¾§è¾¹æ ç›®å½• -->
                <aside class="sidebar">
                    <div class="sidebar-sticky">
                        <h3><i class="fas fa-list"></i> ç›®å½•</h3>
                        <nav class="toc" id="toc">
                            <!-- ç›®å½•å°†é€šè¿‡JavaScriptè‡ªåŠ¨ç”Ÿæˆ -->
                        </nav>
                    </div>
                </aside>

                <!-- æ–‡ç« å†…å®¹ -->
                <article class="article">
                    <header class="article-header">
                        <h1>Webpack4åŸºç¡€é…ç½®æ¢³ç†çŸ¥è¯†ç‚¹</h1>
                        <div class="article-meta">
                            <span><i class="far fa-calendar"></i> æ›´æ–°æ—¶é—´ï¼š2025-12-23</span>
                            <span><i class="far fa-clock"></i> é˜…è¯»æ—¶é•¿ï¼šçº¦ 15 åˆ†é’Ÿ</span>
                        </div>
                    </header>

                    <div class="article-content">
<div class="content__default"><h2 id="å‰è¨€"><a href="#å‰è¨€" class="header-anchor">#</a> å‰è¨€</h2> <p>webpackåœ¨å‰ç«¯åŒ–è¿‡ç¨‹ä¸­ååˆ†é‡è¦ï¼Œæ‰€ä»¥èŠ±äº†ä¸€æ®µæ—¶é—´å­¦ä¹ webpackï¼Œä»¥åŠwebpack4æ–°ç‰¹æ€§ï¼Œæœ¬æ–‡æ˜¯æŒ‰ç…§ä»æ˜“åˆ°éš¾çš„è¿‡ç¨‹ï¼Œæ¢³ç†éƒ¨åˆ†webpackæ¦‚å¿µï¼Œå¸¸è§çš„loaderï¼Œpluginsï¼Œwebpack4æ–°ç‰¹æ–°ï¼Œè¿˜æœ‰éƒ¨åˆ†é«˜çº§æ¦‚å¿µã€‚</p> <p>webpackéœ€è¦æŒæ¡çš„æ ¸å¿ƒæ¦‚å¿µğŸ‘‡</p> <ul><li><code>Entry</code>:webpackå¼€å§‹æ„å»ºçš„å…¥å£æ¨¡å—</li> <li><code>Output</code>: å¦‚ä½•å‘½åè¾“å‡ºæ–‡ä»¶ï¼Œä»¥åŠè¾“å‡ºç›®å½•ï¼Œæ¯”å¦‚å¸¸è§çš„distç›®å½•ã€‚</li> <li><code>Loaders</code>:ä½œç”¨åœ¨äºè§£ææ–‡ä»¶ï¼Œå°†æ— æ³•å¤„ç†çš„éjsæ–‡ä»¶ï¼Œå¤„ç†æˆwebpackèƒ½å¤Ÿå¤„ç†çš„æ¨¡å—ã€‚</li> <li><code>Plugins</code>:æ›´å¤šçš„æ˜¯ä¼˜åŒ–ï¼Œæå–ç²¾å(å…¬å…±æ¨¡å—å»é‡)ï¼Œå‹ç¼©å¤„ç†(css/js/html)ç­‰ï¼Œå¯¹webpackåŠŸèƒ½çš„æ‰©å±•ã€‚</li> <li><code>Chunk</code>: ä¸ªäººè§‰å¾—è¿™ä¸ªæ˜¯webpack 4 çš„<code>Code Splitting</code> äº§ç‰©ï¼ŒæŠ›å¼ƒäº†webpack3çš„<code>CommonsChunkPlugin</code>,å®ƒæœ€å¤§çš„ç‰¹ç‚¹å°±æ˜¯é…ç½®ç®€å•ï¼Œå½“ä½ è®¾ç½® <code>mode</code> æ˜¯ <code>production</code>ï¼Œé‚£ä¹ˆ webpack 4 å°±ä¼šè‡ªåŠ¨å¼€å¯ <code>Code Splitting</code>ï¼Œå¯ä»¥å®Œæˆå°†æŸäº›å…¬å…±æ¨¡å—å»é‡ï¼Œæ‰“åŒ…æˆä¸€ä¸ªå•ç‹¬çš„<code>chunk</code>ã€‚</li></ul> <p>æ­¤æ¬¡å­¦ä¹ webpack4æ–°ç‰¹æ€§ï¼ŒåŸºæœ¬ä¸ŠæŒ‰ç…§<a href="https://www.webpackjs.com/" target="_blank" rel="noopener noreferrer">å®˜ç½‘<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>æ¥é…ç½®çš„ã€‚</p> <hr> <p>å¦‚æœä½ è·Ÿæˆ‘ä¸€æ ·ï¼Œåœ¨é…ç½®è‡ªå·±çš„webpackä¸­é‡åˆ°é—®é¢˜ï¼Œå¯ä»¥æ¥è¿™é‡Œæ‰¾ä¸€æ‰¾æ€è·¯ï¼Œ<strong>å¸Œæœ›æœ¬æ–‡å¯¹ä½ æ›´å¤šçš„æ˜¯æŠ›ç –å¼•ç‰</strong>ï¼Œå¯¹ä½ å­¦ä¹ webpack4æ–°ç‰¹æ€§æœ‰æ‰€å¸®åŠ©ã€‚</p> <h2 id="webpackåŸºç¡€çŸ¥è¯†"><a href="#webpackåŸºç¡€çŸ¥è¯†" class="header-anchor">#</a> WebpackåŸºç¡€çŸ¥è¯†</h2> <h3 id="ä»€ä¹ˆæ˜¯webpack"><a href="#ä»€ä¹ˆæ˜¯webpack" class="header-anchor">#</a> ä»€ä¹ˆæ˜¯webpack</h3> <p>webpackå…¶å®æˆ‘ç†è§£å°±æ˜¯<strong>æ¨¡å—æ‰“åŒ…å·¥å…·</strong>ï¼Œå°†å¤šä¸ªæ¨¡å—æ‰“åŒ…åˆ°ç”Ÿæˆä¸€ä¸ªæœ€ç»ˆçš„bundle.jsé—®é¢˜ã€‚</p> <p>ç›®å‰æ¥çœ‹ï¼Œwebpack4.0å·²ç»å¯ä»¥æ‰“åŒ…ä»»ä½•å½¢å¼çš„æ¨¡å—ã€‚</p> <h3 id="å¦‚ä½•å®‰è£…webpack"><a href="#å¦‚ä½•å®‰è£…webpack" class="header-anchor">#</a> å¦‚ä½•å®‰è£…Webpack</h3> <p>é¦–å…ˆç¡®ä¿ä½ æœ‰nodeç¯å¢ƒï¼Œåœ¨ç»ˆç«¯è¿è¡Œä¸‹é¢æŒ‡ä»¤</p> <div class="language- extra-class"><pre class="language-text"><code>node -v
npm -v
</code></pre></div><p>å‡ºç°äº†ä¸¤ä¸ªç‰ˆæœ¬å·åï¼Œæ¥ä¸‹æ¥å°±å¯ä»¥ç»§ç»­å­¦ä¹ webpackäº†ï¼ŒnpmåŒ…ç®¡ç†å·¥å…·æ˜¯å¿…é¡»çš„ã€‚</p> <h3 id="åˆå§‹åŒ–é¡¹ç›®"><a href="#åˆå§‹åŒ–é¡¹ç›®" class="header-anchor">#</a> åˆå§‹åŒ–é¡¹ç›®</h3> <div class="language- extra-class"><pre class="language-text"><code>npm init 
</code></pre></div><p>è¿™ä¸ªæ„æ€å°±æ˜¯ä¸ºäº†ä½¿é¡¹ç›®ç¬¦åˆè§„èŒƒï¼Œ<strong>åˆå§‹åŒ–ä¸€ä¸ªé¡¹ç›®</strong>ï¼Œè¿™æ ·å­ä½¿é¡¹ç›®ç¬¦åˆè§„èŒƒã€‚</p> <p>æ¥ä¸‹æ¥å°±å‘ç°ï¼Œåœ¨è¯¥æ ¹ç›®å½•ä¸‹ï¼Œä¼š<strong>ç”Ÿæˆä¸€ä¸ªpackage.jsonæ–‡ä»¶</strong>ï¼Œè¿™ä¸ªæ–‡ä»¶æè¿°äº†nodeé¡¹ç›®ï¼ŒnodeåŒ…çš„ä¸€äº›ä¿¡æ¯ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œ<strong>npm init ç”Ÿæˆçš„å°±æ˜¯ä¸€ä¸ªpackage.jsonæ–‡ä»¶ã€‚</strong></p> <p><strong>package.jsonå±æ€§è¯´æ˜</strong></p> <div class="language- extra-class"><pre class="language-text"><code>	name - åŒ…å.
    version - åŒ…çš„ç‰ˆæœ¬å·ã€‚
    description - åŒ…çš„æè¿°ã€‚
    homepage - åŒ…çš„å®˜ç½‘URLã€‚
    author - åŒ…çš„ä½œè€…ï¼Œå®ƒçš„å€¼æ˜¯ä½ åœ¨https://npmjs.orgç½‘ç«™çš„æœ‰æ•ˆè´¦æˆ·åï¼Œéµå¾ªâ€œè´¦æˆ·å&lt;é‚®ä»¶&gt;â€çš„è§„åˆ™ï¼Œ		ä¾‹å¦‚ï¼šzhangsan &lt;zhangsan@163.com&gt;ã€‚
    contributors - åŒ…çš„å…¶ä»–è´¡çŒ®è€…ã€‚
    dependencies / devDependencies - ç”Ÿäº§/å¼€å‘ç¯å¢ƒä¾èµ–åŒ…åˆ—è¡¨ã€‚å®ƒä»¬å°†ä¼šè¢«å®‰è£…åœ¨ node_module ç›®å½•ä¸‹ã€‚
    main - main å­—æ®µæŒ‡å®šäº†ç¨‹åºçš„ä¸»å…¥å£æ–‡ä»¶ï¼Œrequire('moduleName') å°±ä¼šåŠ è½½è¿™ä¸ªæ–‡ä»¶ã€‚è¿™ä¸ªå­—æ®µçš„é»˜è®¤å€¼æ˜¯æ¨¡å—æ ¹ç›®å½•ä¸‹é¢çš„ index.jsã€‚
    keywords - å…³é”®å­—
</code></pre></div><h3 id="æ¥ä¸‹æ¥å°±æ˜¯å®‰è£…webpack"><a href="#æ¥ä¸‹æ¥å°±æ˜¯å®‰è£…webpack" class="header-anchor">#</a> æ¥ä¸‹æ¥å°±æ˜¯å®‰è£…webpack</h3> <div class="language- extra-class"><pre class="language-text"><code> npm install webpack webpack-cli -g   // å…¨å±€å®‰è£…webpack
</code></pre></div><p>ä¸è¿‡å»ºè®®è¿˜æ˜¯ä¸è¦è¿™æ ·å­å®‰è£…ï¼Œå½“ä½ æœ‰å¤šä¸ªé¡¹ç›®çš„æ—¶å€™ï¼Œä½ å…¶ä¸­ä¸€ä¸ªwebpackä¾èµ–ç‰ˆæœ¬æ˜¯3.xæœ¬ç‰ˆï¼Œå½“å‰ç‰ˆæœ¬æ˜¯4.0ç‰ˆæœ¬çš„è¯ï¼Œé‚£ä¹ˆè¿™ä¸ªé¡¹ç›®æ˜¯è¿è¡Œä¸èµ·æ¥çš„ã€‚</p> <p>é‚£ä¹ˆå…ˆå¸è½½å…¨å±€å®‰è£…çš„webpackï¼Œç„¶ååœ¨å½“å‰ä½ è¦è¿è¡Œçš„é¡¹ç›®å†å•ç‹¬å®‰è£…ã€‚</p> <div class="language- extra-class"><pre class="language-text"><code> npm uninstall webpack webpack-cli -g   //å¸è½½å…¨å±€webpack
</code></pre></div><p>æ€ä¹ˆå…¨å±€å®‰è£…å‘¢ğŸ‘‡</p> <div class="language- extra-class"><pre class="language-text"><code> npm install webpack webpack-cli -D   // å±€éƒ¨å®‰è£…
</code></pre></div><p>è¦æƒ³æŸ¥çœ‹ç‰ˆæœ¬çš„è¯ï¼Œ<strong>webpack -v</strong>è¿™ä¸ªå‘½ä»¤æ­¤æ—¶ä¸è¡Œï¼Œå› ä¸ºnodeæ­¤æ—¶ä¼šå»å…¨å±€æŸ¥æ‰¾ï¼Œå‘ç°æ‰¾ä¸åˆ°webpackåŒ…ï¼Œå› ä¸ºæˆ‘ä»¬ä¹‹å‰å·²ç»å¸è½½å…¨å±€çš„webpackï¼Œæ‰€ä»¥æˆ‘ä»¬å¾—ç”¨ä¸€ä¸ªæ–°å‘½ä»¤ã€‚</p> <div class="language- extra-class"><pre class="language-text"><code>npx webpack -v
</code></pre></div><p>è¿™ä¸ªæ—¶å€™ï¼Œå°±å¯ä»¥çœ‹åˆ°å¯¹äºç‰ˆæœ¬å·ã€‚</p> <p>å¦‚ä½•æŸ¥çœ‹åŒ…çš„ç‰ˆæœ¬å‘¢</p> <div class="language- extra-class"><pre class="language-text"><code>npm info webpack   // æŸ¥çœ‹webpackåŒ…ç‰ˆæœ¬
</code></pre></div><h3 id="webpacké…ç½®æ–‡ä»¶"><a href="#webpacké…ç½®æ–‡ä»¶" class="header-anchor">#</a> webpacké…ç½®æ–‡ä»¶</h3> <p>webpack.config.jså°±æ˜¯webpackçš„é»˜è®¤é…ç½®æ–‡ä»¶ï¼Œæˆ‘ä»¬å¯ä»¥è‡ªå®šä¹‰é…ç½®æ–‡ä»¶ï¼Œæ¯”å¦‚æ–‡ä»¶çš„å…¥å£ï¼Œå‡ºå£ã€‚</p> <div class="language- extra-class"><pre class="language-text"><code>const path = require('path')
module.exports = {
    entry : './index.js',
    output : {
        filename : 'bundle.js',
        path : path.join(__dirname, 'dist')
    }
}
</code></pre></div><p>è¿™ä¸ªå°±æ˜¯æœ€åŸºæœ¬çš„é…ç½®ï¼Œæ‰“åŒ…ä¸€ä¸ªindex.jsæ–‡ä»¶ï¼Œä¹Ÿå°±æ˜¯entryï¼Œoutputæ‰“åŒ…çš„å…¥å£ï¼Œå‡ºå£é…ç½®ä¿¡æ¯ã€‚</p> <p>é‚£ä¹ˆè¿™ä¸ªæ—¶å€™ï¼Œåœ¨å‘½ä»¤è¡Œä¸­è¿è¡Œ<code>npx webpack</code>ï¼Œå°±ä¼šå»æ‰¾webpack.config.jsæ–‡ä»¶ä¸­çš„é…ç½®ä¿¡æ¯ã€‚</p> <p><strong>é»˜è®¤çš„é…ç½®æ–‡ä»¶å¿…é¡»æ˜¯webpack.config.jsè¿™ä¸ªåç§°</strong>ï¼Œä½†æ˜¯ä½ è‡ªå·±å†™äº†ä¸€ä¸ªwebpacké…ç½®æ–‡ä»¶ä¿¡æ¯ï¼Œé‚£è¡Œä¸è¡Œå‘¢ï¼Ÿå½“ç„¶æ˜¯å¯ä»¥çš„ï¼Œé‚£ä½ å¾—è¿è¡Œä»¥ä¸‹å‘½ä»¤ğŸ‘‡</p> <div class="language- extra-class"><pre class="language-text"><code>npx webpack --config webpack.config.js
// --config åé¢å°±æ˜¯ä½ è‡ªå·±é…ç½®çš„webpackæ–‡ä»¶ä¿¡æ¯
</code></pre></div><h3 id="npm-scripts"><a href="#npm-scripts" class="header-anchor">#</a> npm scripts</h3> <p><strong>npm scripts</strong> æœ‰æ—¶å€™ï¼Œä½ ç”¨è¿‡vueï¼ŒReactçš„è¯ï¼Œ ç»å¸¸ä½¿ç”¨çš„éƒ½æ˜¯npm run devçš„å½¢å¼ï¼Œé‚£ä¹ˆæˆ‘ä»¬æ˜¯ä¸æ˜¯ä¹Ÿèƒ½é…ç½®è¿™æ ·å­çš„ä¿¡æ¯å‘¢ï¼Ÿæˆ‘ä»¬åªéœ€è¦åœ¨package.jsonæ–‡ä»¶ä¸­é…ç½®scriptså‘½ä»¤å°±è¡ŒğŸ‘‡</p> <div class="language- extra-class"><pre class="language-text"><code>"scripts": {
    "dev": "webpack --config webpack.config.js"
  },
</code></pre></div><p>è¿™ä¸ªæ—¶å€™ï¼Œä½ åœ¨è¿è¡Œnpm run devï¼Œå®ƒä¼šè¢«ç¿»è¯‘æˆå¯¹äºçš„æŒ‡ä»¤ï¼Œä¹Ÿä¼šæ‰“åŒ…å¯¹åº”çš„æ–‡ä»¶ã€‚</p> <p><strong>webpackæ‰“åŒ…ä¸‰ç§å‘½ä»¤</strong></p> <ul><li>webpack index.js (å…¨å±€)</li> <li>npx webpack index.js</li> <li>npm run dev</li></ul> <h3 id="webpack-cli"><a href="#webpack-cli" class="header-anchor">#</a> webpack-cli</h3> <p>è¿™ä¸ªæ—¶å€™ï¼Œä½ ä¹Ÿè®¸å°±ä¼šå‘ç°è¿™ä¸ªwebpack-cliä½œç”¨äº†å§ï¼Œä¸ä¸‹è½½è¿™ä¸ªåŒ…çš„è¯ï¼Œä½ åœ¨å‘½ä»¤è¡Œè¿è¡ŒwebpackæŒ‡ä»¤æ˜¯ä¸ç”Ÿæ•ˆçš„ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œ<strong>webpack-cliä½œç”¨å°±æ˜¯å¯ä»¥åœ¨å‘½ä»¤è¡Œè¿è¡Œwebpackå‘½ä»¤å¹¶ä¸”ç”Ÿæ•ˆã€‚</strong></p> <p>ä¸ä¸‹è½½çš„è¯ï¼Œåœ¨å‘½ä»¤è¡Œä¸­ä½¿ç”¨webpackå‘½ä»¤æ˜¯ä¸å…è®¸çš„ã€‚</p> <h3 id="webpacké…ç½®ç¯å¢ƒ"><a href="#webpacké…ç½®ç¯å¢ƒ" class="header-anchor">#</a> webpacké…ç½®ç¯å¢ƒ</h3> <p>ä¸»è¦åˆ†ä¸º<strong>development</strong>å’Œ<strong>production</strong>ä¸¤ç§ç¯å¢ƒï¼Œé»˜è®¤æƒ…å†µä¸‹æ˜¯productionç¯å¢ƒï¼Œ**ä¸¤è€…çš„åŒºåˆ«å°±æ˜¯ï¼Œåè€…ä¼šå¯¹æ‰“åŒ…åçš„æ–‡ä»¶å‹ç¼©ã€‚**é‚£ä¹ˆæˆ‘ä»¬å»é…ç½®ä¸€ä¸‹ğŸ‘‡</p> <div class="language- extra-class"><pre class="language-text"><code>const path = require('path')
module.exports = {
    mode : 'development',
    entry : './index.js',
    output : {
        filename : 'bundle.js',
        path : path.join(__dirname, 'bundle')
    }
}
</code></pre></div><p>è¿™ä¸ªæ—¶å€™ï¼Œå†å»çœ‹çš„è¯ï¼Œå°±ä¼šå‘ç°ï¼Œ<strong>bundle.jsæ–‡ä»¶æ²¡æœ‰å‹ç¼©ä»£ç </strong>ã€‚</p> <hr> <h2 id="webpackæ ¸å¿ƒæ¦‚å¿µloader"><a href="#webpackæ ¸å¿ƒæ¦‚å¿µloader" class="header-anchor">#</a> webpackæ ¸å¿ƒæ¦‚å¿µloader</h2> <h3 id="ä»€ä¹ˆæ˜¯loader"><a href="#ä»€ä¹ˆæ˜¯loader" class="header-anchor">#</a> ä»€ä¹ˆæ˜¯loader</h3> <p><strong>loaderå°±æ˜¯ä¸€ä¸ªæ‰“åŒ…çš„æ–¹æ¡ˆï¼Œå®ƒçŸ¥é“å¯¹äºæŸä¸ªç‰¹å®šçš„æ–‡ä»¶è¯¥å¦‚ä½•å»æ‰“åŒ…ã€‚</strong> æœ¬èº«webpackä¸æ¸…æ¥šå¯¹äºä¸€äº›æ–‡ä»¶å¦‚ä½•å¤„ç†ï¼ŒloaderçŸ¥é“æ€ä¹ˆå¤„ç†ï¼Œæ‰€ä»¥webpackå°±ä¼šå»æ±‚åŠ©äºloaderã€‚</p> <p>webpackæ˜¯é»˜è®¤çŸ¥é“å¦‚ä½•æ‰“åŒ…jsæ–‡ä»¶çš„ï¼Œä½†æ˜¯å¯¹äºä¸€äº›ï¼Œæ¯”å¦‚å›¾ç‰‡ï¼Œå­—ä½“å›¾æ ‡çš„æ¨¡å—ï¼Œwebpackå°±ä¸çŸ¥é“å¦‚ä½•æ‰“åŒ…äº†ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¦‚ä½•è®©webpackè¯†åˆ«å›¾ç‰‡ç­‰å…¶ä»–æ ¼å¼çš„æ¨¡å—å‘¢ï¼Ÿ</p> <p>é‚£ä¹ˆå°±å»é…ç½®æ–‡ä»¶webpack.config.jsé…ç½®ç›¸åº”çš„ä¿¡æ¯ï¼Œé…ç½®moduleğŸ‘‡</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">mode</span><span class="token operator">:</span> <span class="token string">'production'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">entry</span><span class="token operator">:</span> <span class="token string">'./src/index.js'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">module</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">rules</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
            <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.(png|jpg|gif)$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
            <span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                <span class="token literal-property property">loader</span><span class="token operator">:</span> <span class="token string">'file-loader'</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">output</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">'bundle.js'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">path</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'dist'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>æˆ‘ä»¬éœ€è¦file-loaderçš„è¯ï¼Œä¹Ÿå°±æ˜¯ä¾èµ–äºå®ƒï¼Œæ‰€ä»¥å…ˆä¸‹è½½å®ƒ</p> <div class="language- extra-class"><pre class="language-text"><code>npm install file-loader -D
</code></pre></div><p>ç„¶åæˆ‘ä»¬çœ‹çœ‹index.jsæ˜¯å¦‚ä½•å†™çš„ğŸ‘‡</p> <div class="language- extra-class"><pre class="language-text"><code>import acator from './å¤´åƒ.jpg'
console.log(acator)
</code></pre></div><p>é€šè¿‡è¿™ä¸ªæˆ‘ä»¬å‘ç°ï¼Œåœ¨æ§åˆ¶å°ï¼Œæ‰“å°çš„ç»“æœæ˜¯</p> <div class="language- extra-class"><pre class="language-text"><code>3f16daf5233d30f46509b1bf2c4e08a5.jpg
</code></pre></div><p>è¯´æ˜file-loaderå¸®æˆ‘ä»¬å›¾ç‰‡æ¨¡å—æ‰“åŒ…åˆ°äº†distç›®å½•ä¸‹ï¼Œå¹¶ä¸”index.jsä¸­ï¼Œè¿™ä¸ªacatorå˜é‡ï¼Œç»“æœæ˜¯ä¸€ä¸ªåç§°ï¼Œè¿™æ ·å­çš„è¯ï¼Œå°±å¯ä»¥å®Œæˆæ‰“åŒ…ï¼Œåç»­éœ€è¦è¯¥å›¾ç‰‡ä¹Ÿè½»æ¾æå®šã€‚</p> <p><strong>æ€»ç»“</strong></p> <p>webpackæ— æ³•è¯†åˆ«éjsç»“å°¾çš„æ¨¡å—ï¼Œæ‰€ä»¥éœ€è¦loaderè®©webpackè¯†åˆ«å‡ºæ¥ï¼Œè¿™æ ·å­å°±å¯ä»¥å®Œæˆæ‰“åŒ…ã€‚</p> <ul><li>é‡åˆ°éjsç»“å°¾çš„æ¨¡å—ï¼Œwebpackä¼šå»moduleä¸­æ‰¾ç›¸åº”çš„è§„åˆ™ï¼ŒåŒ¹é…åˆ°äº†å¯¹äºçš„è§„åˆ™ï¼Œç„¶åå»æ±‚åŠ©äºå¯¹åº”çš„loader</li> <li>å¯¹åº”çš„loaderå°±ä¼šå°†è¯¥æ¨¡å—æ‰“åŒ…åˆ°ç›¸åº”çš„ç›®å½•ä¸‹ï¼Œä¸Šé¢çš„ä¾‹å­å°±æ˜¯distç›®å½•ï¼Œå¹¶ä¸”å‘¢ï¼Œ<strong>è¿”å›çš„æ˜¯è¯¥æ¨¡å—çš„è·¯å¾„</strong>,æ‹¿ä¸Šé¢çš„ä¾‹å­æ¥è¯´ï¼Œå°±æ˜¯<code>acator</code> å˜é‡çš„å€¼å°±æ˜¯è·¯å¾„ã€‚</li></ul> <h3 id="å¦‚ä½•é…ç½®file-loader"><a href="#å¦‚ä½•é…ç½®file-loader" class="header-anchor">#</a> å¦‚ä½•é…ç½®file-loader</h3> <p>å½“ç„¶å°±æ˜¯çœ‹webpackå®˜ç½‘äº†ï¼Œè¿™é‡Œé¢æ–‡æ¡£å¾ˆè¯¦ç»†ï¼Œ<a href="https://www.webpackjs.com/loaders/file-loader/" target="_blank" rel="noopener noreferrer">ç‚¹è¿™é‡Œ<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>ä¸¾ä¸ªä¾‹å­ï¼Œæ¯”å¦‚ï¼Œä½ æƒ³å°†æ–‡ä»¶æ‰“åŒ…åç§°ä¸æ”¹å˜ï¼Œå¹¶ä¸”åŠ ä¸ªåç¼€çš„è¯ï¼Œå¯ä»¥è¿™ä¹ˆæ¥é…ç½®optionsğŸ‘‡</p> <div class="language-js extra-class"><pre class="language-js"><code>			<span class="token punctuation">{</span>
                <span class="token literal-property property">loader</span><span class="token operator">:</span> <span class="token string">'file-loader'</span><span class="token punctuation">,</span>
                <span class="token literal-property property">options</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                    <span class="token comment">// nameå°±æ˜¯åŸå§‹åç§°,hashä½¿ç”¨çš„æ˜¯MD5ç®—æ³•,extå°±æ˜¯åç¼€</span>
                    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'[name]_[hash].[ext]'</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
</code></pre></div><p>æˆ‘ä»¬å¼•å…¥ç…§ç‰‡çš„æ˜¯ä¸‹é¢ğŸ‘‡</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> acator <span class="token keyword">from</span> <span class="token string">'./å¤´åƒ.jpg'</span>
</code></pre></div><p>é‚£ä¹ˆæœ€åæ‰“åŒ…å®Œçš„åç§°æ˜¯è¯´æ˜å‘¢ğŸ‘‡</p> <div class="language- extra-class"><pre class="language-text"><code>å¤´åƒ_3f16daf5233d30f46509b1bf2c4e08a5.jpg
</code></pre></div><p>åœ¨ä¸¾ä¸ªä¾‹å­ï¼Œæ¯”å¦‚ä½ æƒ³å°†å›¾ç‰‡è¿™äº›æ¨¡å—éƒ½æ‰“åŒ…åˆ°distç›®å½•ä¸‹çš„imagesä¸‹ï¼Œæ˜¯ä¸æ˜¯ä¹Ÿæ˜¯å¯ä»¥é…ç½®ä¸‹</p> <div class="language-js extra-class"><pre class="language-js"><code>			<span class="token punctuation">{</span>
                <span class="token literal-property property">loader</span><span class="token operator">:</span> <span class="token string">'file-loader'</span><span class="token punctuation">,</span>
                <span class="token literal-property property">options</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'[name]_[hash].[ext]'</span><span class="token punctuation">,</span>
                    <span class="token literal-property property">outputPath</span><span class="token operator">:</span> <span class="token string">'images/'</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
</code></pre></div><p>è¿™æ ·å­çš„è¯ï¼Œå°±ä¼šåœ¨dist/images/ ç›®å½•ä¸‹æ‰¾åˆ°å¯¹åº”çš„æ‰“åŒ…å¥½å›¾ç‰‡ã€‚</p> <p>æ¯”å¦‚ä¸åŒçš„ç¯å¢ƒä¸‹ï¼Œæ‰“åŒ…çš„å›¾ç‰‡ä½ç½®ä¹Ÿå¯ä»¥ä¸ä¸€æ ·ï¼ŒğŸ‘‡</p> <div class="language- extra-class"><pre class="language-text"><code>if (env === 'development') {
        return '[path][name].[ext]'
}
</code></pre></div><p>å‰©ä¸‹çš„å°±å»å®˜ç½‘ï¼Œè‡ªå·±é…ç½®å§ã€‚</p> <h3 id="å¦‚ä½•é…ç½®url-loader"><a href="#å¦‚ä½•é…ç½®url-loader" class="header-anchor">#</a> å¦‚ä½•é…ç½®url-loader</h3> <p>ä¸Šé¢å¯¹äºå›¾ç‰‡çš„æ¨¡å—æ‰“åŒ…ï¼Œæˆ‘ä»¬åŒæ ·å¯ä»¥å»ä½¿ç”¨url-loaderï¼Œé‚£ä¹ˆå®ƒä¸file-loaderåŒºåˆ«æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ</p> <div class="language-js extra-class"><pre class="language-js"><code>			<span class="token punctuation">{</span>
                <span class="token literal-property property">loader</span><span class="token operator">:</span> <span class="token string">'url-loader'</span><span class="token punctuation">,</span>
                <span class="token literal-property property">options</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'[name]_[hash].[ext]'</span><span class="token punctuation">,</span>
                    <span class="token literal-property property">outputPath</span><span class="token operator">:</span> <span class="token string">'images/'</span><span class="token punctuation">,</span>
                    <span class="token literal-property property">limit</span> <span class="token operator">:</span> <span class="token number">102400</span>  <span class="token comment">//100KB</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
</code></pre></div><p>å”¯ä¸€çš„åŒºåˆ«å°±åœ¨äºï¼Œè¦æ‰“åŒ…çš„å›¾ç‰‡æ˜¯å¦ä¼šæ‰“åŒ…åˆ°imagesç›®å½•ä¸‹ï¼Œè¿˜æ˜¯ä»¥Base64æ ¼å¼æ‰“åŒ…åˆ°bundle.jsæ–‡ä»¶ä¸­ï¼Œè¿™ä¸ªå°±çœ‹limité…ç½®é¡¹äº†ã€‚</p> <ul><li>å½“ä½ æ‰“åŒ…çš„å›¾ç‰‡å¤§å°æ¯”limité…ç½®çš„å‚æ•°å¤§ï¼Œé‚£ä¹ˆè·Ÿfile-loaderä¸€æ ·ã€‚</li> <li>å½“å›¾ç‰‡è¾ƒå°æ—¶ï¼Œé‚£ä¹ˆå°±ä¼šä»¥Base64æ‰“åŒ…åˆ°bundle.jsæ–‡ä»¶ä¸­ã€‚</li></ul> <p>æ›´å¤šçš„url-loader<a href="https://www.webpackjs.com/loaders/url-loader/" target="_blank" rel="noopener noreferrer">çœ‹å®˜ç½‘<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h3 id="å¦‚ä½•é…ç½®css-loader"><a href="#å¦‚ä½•é…ç½®css-loader" class="header-anchor">#</a> å¦‚ä½•é…ç½®css-loader</h3> <p>æ¯”å¦‚ä½ å¼•å…¥äº†ä¸€ä¸ªcssæ¨¡å—ï¼Œè¿™ä¸ªæ—¶å€™ï¼Œå°±éœ€è¦å»ä¸‹è½½ç›¸åº”çš„æ¨¡å—loaderã€‚</p> <div class="language- extra-class"><pre class="language-text"><code>cnpm install css-loader style-loader -D   // ä¸‹è½½å¯¹åº”çš„æ¨¡å—
</code></pre></div><p>ç„¶åå°±æ˜¯é…ç½®moduleğŸ‘‡</p> <div class="language- extra-class"><pre class="language-text"><code>		{
            test: /\.css$/,
            use: ['style-loader','css-loader']
        }
</code></pre></div><p>è¿™æ ·å­çš„è¯ï¼Œä½ åœ¨index.js å¯¼å…¥æ ·å¼å°±å¯ä»¥ç”Ÿæ•ˆå•¦ï¼Œæˆ‘ä»¬çœ‹çœ‹æ˜¯å¦‚ä½•å¯¼å…¥çš„ğŸ‘‡</p> <div class="language- extra-class"><pre class="language-text"><code>import acator from './å¤´åƒ.jpg'
import './index.css'
const img = new Image()
img.src = acator
img.classList.add('imgtitle')
document.body.appendChild(img)
</code></pre></div><p>è¿™ä¸ªimgtitleå°±æ˜¯æ ·å¼ï¼Œå¦‚ä¸‹ğŸ‘‡</p> <div class="language- extra-class"><pre class="language-text"><code>.imgtitle{
    width: 100px;
    height: 100px;
}
</code></pre></div><p>é€šè¿‡ä¸¤ä¸ªloaderï¼Œå°±å®ç°äº†webpackæ‰“åŒ…cssæ–‡ä»¶ï¼Œé‚£æˆ‘ä»¬åˆ†æä»¥ä¸‹ä¸¤ä¸ªloaderåŠŸèƒ½ã€‚</p> <ul><li>css-loaderä¸»è¦ä½œç”¨å°±æ˜¯å°†å¤šä¸ªcssæ–‡ä»¶æ•´åˆåˆ°ä¸€èµ·ï¼Œå½¢æˆä¸€ä¸ªcssæ–‡ä»¶ã€‚</li> <li>style-loaderä¼šæŠŠæ•´åˆçš„csséƒ¨åˆ†æŒ‚è½½åˆ°headæ ‡ç­¾ä¸­ã€‚</li></ul> <p>é‚£ä¹ˆå¦‚æœä½ ä½¿ç”¨scssé¢„ç¼–è¯‘cssçš„è¯ï¼Œwebpackæ˜¯æ— æ³•æ‰“åŒ…è¯¥æ–‡ä»¶çš„ï¼Œæ‰€ä»¥åˆéœ€è¦å®‰è£…æ–°çš„loaderğŸ‘‡</p> <h3 id="å¦‚ä½•é…ç½®sass-loader"><a href="#å¦‚ä½•é…ç½®sass-loader" class="header-anchor">#</a> å¦‚ä½•é…ç½®sass-loader</h3> <p>æˆ‘ä»¬çœ‹å®˜ç½‘scss-loaderéœ€è¦ä¸‹è½½å“ªäº›ï¼Œ<a href="https://www.webpackjs.com/loaders/sass-loader/" target="_blank" rel="noopener noreferrer">ç‚¹è¿™é‡Œ<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <div class="language- extra-class"><pre class="language-text"><code>npm install sass-loader node-sass --save-dev
</code></pre></div><p>ä¸Šé¢æ˜¯å®‰è£…sass-loaderï¼Œéœ€è¦åŒæ—¶å®‰è£…node-sassï¼Œç„¶åå°±å»é…ç½®å¯¹åº”çš„module</p> <div class="language-js extra-class"><pre class="language-js"><code>		<span class="token punctuation">{</span>
            <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.scss$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
            <span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'style-loader'</span><span class="token punctuation">,</span><span class="token string">'css-loader'</span><span class="token punctuation">,</span><span class="token string">'sass-loader'</span><span class="token punctuation">]</span>
        <span class="token punctuation">}</span>
</code></pre></div><p>è¿™æ ·å­çš„è¯ï¼Œä½ åƒä¸‹é¢å»å¯¼å…¥scssæ ·å¼æ–‡ä»¶ï¼Œæ˜¯å¯ä»¥æ‰“åŒ…å®Œæˆçš„ğŸ‘‡</p> <div class="language- extra-class"><pre class="language-text"><code>// index.js 
import acator from './å¤´åƒ.jpg'
// console.log(acator)
import './index.scss'   // å¯¼å…¥scssæ–‡ä»¶

const img = new Image()
img.src = acator
img.classList.add('imgtitle')
document.body.appendChild(img)
</code></pre></div><p>æ¨¡å—çš„åŠ è½½å°±æ˜¯ä»å³åƒå·¦æ¥çš„ï¼Œæ‰€ä»¥å…ˆåŠ è½½sass-loaderç¿»è¯‘æˆcssæ–‡ä»¶ï¼Œç„¶åä½¿ç”¨css-loaderæ‰“åŒ…æˆä¸€ä¸ªcssæ–‡ä»¶ï¼Œåœ¨é€šè¿‡style-loaderæŒ‚è½½åˆ°é¡µé¢ä¸Šå»ã€‚</p> <p>æ¥ä¸‹æ¥åˆæœ‰æ–°çš„é—®é¢˜äº†ï¼Œå¦‚æœåœ¨scssæ–‡ä»¶ä¸­ä½¿ç”¨css3æ–°ç‰¹æ–°çš„è¯ï¼Œæ˜¯ä¸æ˜¯éœ€è¦åŠ ä¸Šå‚å•†å‰ç¼€å‘¢ï¼Ÿè¿™ä¸ªæ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦æ€ä¹ˆå»å‘¢ï¼Ÿåº”è¯¥åŠ ä¸Šä¸€ä¸ªä»€ä¹ˆloaderå‘¢ï¼Ÿçœ‹ä¸‹é¢</p> <h3 id="å¦‚ä½•é…ç½®postcss-loader"><a href="#å¦‚ä½•é…ç½®postcss-loader" class="header-anchor">#</a> å¦‚ä½•é…ç½®postcss-loader</h3> <p>è¿™ä¸ªloaderè§£å†³çš„å°±æ˜¯åŠ ä¸Šå‚å•†å‰ç¼€ï¼Œæˆ‘ä»¬çœ‹webpackå®˜ç½‘æ˜¯æ€ä¹ˆåšçš„ğŸ‘‰<a href="https://www.webpackjs.com/loaders/postcss-loader/" target="_blank" rel="noopener noreferrer">ç‚¹è¿™é‡Œ<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <div class="language- extra-class"><pre class="language-text"><code>npm i -D postcss-loader autoprefixer
</code></pre></div><p>ç„¶åå‘¢ï¼Œè¿˜éœ€è¦å»ºä¸€ä¸ª<strong>postcss.config.js</strong>ï¼Œè¿™ä¸ªé…ç½®æ–‡ä»¶(<strong>ä½ç½®è·Ÿwebpack.config.jsä¸€ä¸ªä½ç½®</strong>)é…ç½®å¦‚ä¸‹ä¿¡æ¯ğŸ‘‡</p> <div class="language- extra-class"><pre class="language-text"><code>// postcss.config.js
// éœ€è¦é…ç½®è¿™ä¸ªæ’ä»¶ä¿¡æ¯
module.exports = {
    plugins: [
        require('autoprefixer')({
            overrideBrowserslist: [
                "Android 4.1",
                "iOS 7.1",
                "Chrome &gt; 31",
                "ff &gt; 31",
                "ie &gt;= 8"
            ]
        })
    ]
};
</code></pre></div><p>ä¸€å¼€å§‹æˆ‘è®¾ç½®çš„è¯ï¼Œæ˜¯ä¸ç”Ÿæ•ˆçš„ï¼ŒåŸå› å°±æ˜¯<strong>æ²¡æœ‰è®¾ç½®æ”¯æŒçš„æµè§ˆå™¨</strong>ï¼Œç„¶åçœ‹çœ‹ä¸‹é¢ğŸ‘‡</p> <div class="language-js extra-class"><pre class="language-js"><code>		<span class="token punctuation">{</span>
            <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.scss$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
            <span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'style-loader'</span><span class="token punctuation">,</span><span class="token string">'css-loader'</span><span class="token punctuation">,</span><span class="token string">'sass-loader'</span><span class="token punctuation">,</span><span class="token string">'postcss-loader'</span><span class="token punctuation">]</span>
        <span class="token punctuation">}</span>
</code></pre></div><p>æœ€åå°±å¯ä»¥çœ‹è§æ¯”å¦‚css3ä¼šåŠ ä¸Šå‚å•†å‰ç¼€äº†ğŸ‘‡</p> <div class="language- extra-class"><pre class="language-text"><code>-webkit-transform: translate(100px, 100px);
-ms-transform: translate(100px, 100px);
transform: translate(100px, 100px);
</code></pre></div><p>ä¸€äº›å…¶ä»–é—®é¢˜ï¼Œæœ‰æ—¶å€™ï¼Œä½ ä¼šé‡åˆ°è¿™æ ·å­çš„ä¸€ä¸ªé—®é¢˜ï¼Œä½ ä¸åœ¨æŸä¸ªscssæ–‡ä»¶ä¸­åˆå¯¼å…¥æ–°çš„scssæ–‡ä»¶ï¼Œè¿™ä¸ªæ—¶å€™ï¼Œæ‰“åŒ…çš„è¯ï¼Œå®ƒå°±ä¸ä¼šå¸®ä½ é‡æ–°å®‰è£…postcss-loaderå¼€å§‹æ‰“åŒ…ï¼Œè¿™ä¸ªæ—¶å€™ï¼Œæˆ‘ä»¬åº”è¯¥å¦‚ä½•å»è®¾ç½®å‘¢ï¼Œæˆ‘ä»¬å…ˆæ¥çœ‹ä¾‹å­ğŸ‘‡</p> <div class="language-scss extra-class"><pre class="language-scss"><code><span class="token comment">// index.scss</span>
<span class="token keyword">@import</span> <span class="token string">'./creare.scss'</span><span class="token punctuation">;</span>
<span class="token selector">body </span><span class="token punctuation">{</span>
    <span class="token selector">.imgtitle </span><span class="token punctuation">{</span>
        <span class="token property">width</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span>
        <span class="token property">height</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span>
        <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">translate</span><span class="token punctuation">(</span>100px<span class="token punctuation">,</span> 100px<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>æˆ‘ä»¬çŸ¥é“ï¼Œæˆ‘ä»¬é…ç½®çš„loaderè§„åˆ™ä¸­ï¼Œæ˜¯ç¬¦åˆè¿™æ ·å­çš„é¢„æœŸ</li> <li>å½“jsä»£ç ä¸­å¼•å…¥scssæ¨¡å—çš„è¯ï¼Œä¼šæŒ‰ç…§è¿™æ ·å­çš„è§„åˆ™å»åš</li> <li>é‚£ä¹ˆå¦‚ä½•åœ¨scssæ–‡ä»¶ä¸­å¼•å…¥scssæ–‡ä»¶ï¼Œé‚£ä¹ˆè§„åˆ™è‚¯å®šä¸ä¼šä»postcss-loaderå¼€å§‹æ‰“åŒ…ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦é…ç½®ä¸€äº›ä¿¡æ¯ã€‚</li></ul> <div class="language-js extra-class"><pre class="language-js"><code>		<span class="token punctuation">{</span>
            <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.scss$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
            <span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'style-loader'</span><span class="token punctuation">,</span>
                <span class="token punctuation">{</span>
                    <span class="token literal-property property">loader</span><span class="token operator">:</span> <span class="token string">'css-loader'</span><span class="token punctuation">,</span>
                    <span class="token literal-property property">options</span><span class="token operator">:</span><span class="token punctuation">{</span>
                        <span class="token literal-property property">importLoaders</span><span class="token operator">:</span><span class="token number">2</span><span class="token punctuation">,</span>
                        <span class="token literal-property property">modules</span> <span class="token operator">:</span> <span class="token boolean">true</span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">}</span><span class="token punctuation">,</span>
                <span class="token string">'sass-loader'</span><span class="token punctuation">,</span>
                <span class="token string">'postcss-loader'</span>
            <span class="token punctuation">]</span>
        <span class="token punctuation">}</span>
</code></pre></div><p>æˆ‘ä»¬éœ€è¦åœ¨css-loaderä¸­é…ç½®optionsï¼ŒåŠ å…¥<strong>importLoaders :2</strong>ï¼Œ è¿™æ ·å­å°±ä¼šèµ°postcss-loaderï¼Œå’Œsass-loaderï¼Œè¿™æ ·å­çš„è¯­æ³•ï¼Œ<strong>æ— è®ºä½ æ˜¯åœ¨jsä¸­å¼•å…¥scssæ–‡ä»¶ï¼Œè¿˜æ˜¯åœ¨scssä¸­å¼•å…¥scssæ–‡ä»¶ï¼Œéƒ½ä¼šé‡æ–°ä¾æ¬¡ä»ä¸‹å¾€ä¸Šæ‰§è¡Œæ‰€ä»¥loaderã€‚</strong></p> <p>é‚£ä¹ˆ<code>modules:true</code>è¿™ä¸ªé…ç½®æ˜¯ä»€ä¹ˆä½œç”¨å‘¢ï¼Ÿæœ‰æ—¶å€™ï¼Œä½ å¸Œæœ›ä½ çš„cssæ ·å¼ä½œç”¨çš„æ˜¯å½“å‰çš„æ¨¡å—ä¸­ï¼Œè€Œä¸æ˜¯å…¨å±€çš„è¯ï¼Œå°±éœ€è¦åŠ ä¸Šè¿™ä¸ªé…ç½®äº†ï¼Œçœ‹ä¸‹æ¡ˆä¾‹ğŸ‘‡</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// index.js</span>
<span class="token keyword">import</span> acator <span class="token keyword">from</span> <span class="token string">'./å¤´åƒ.jpg'</span>
<span class="token keyword">import</span> create <span class="token keyword">from</span> <span class="token string">'./create'</span>

<span class="token keyword">import</span> style <span class="token keyword">from</span> <span class="token string">'./index.scss'</span>  <span class="token comment">// é€šè¿‡modules:true é¿å…äº†cssä½œç”¨åŸŸcreateä¸­çš„æ¨¡å—</span>
<span class="token keyword">const</span> img <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Image</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
img<span class="token punctuation">.</span>src <span class="token operator">=</span> acator
img<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>style<span class="token punctuation">.</span>imgtitle<span class="token punctuation">)</span>
document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>img<span class="token punctuation">)</span>
<span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><p>é‚£ä¹ˆcreateæ¨¡å—æ˜¯ä»€ä¹ˆå‘¢ğŸ‘‡</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> acator <span class="token keyword">from</span> <span class="token string">'./å¤´åƒ.jpg'</span>
<span class="token keyword">import</span> style <span class="token keyword">from</span> <span class="token string">'./index.scss'</span>
<span class="token keyword">function</span> <span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> img <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Image</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    img<span class="token punctuation">.</span>src <span class="token operator">=</span> acator
    img<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>style<span class="token punctuation">.</span>imgtitle<span class="token punctuation">)</span>
    document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>img<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> create<span class="token punctuation">;</span>
</code></pre></div><p>å¯ä»¥çœ‹å‡ºæ¥ï¼Œè¿™ä¸ªcreateæ¨¡å—ï¼Œå°±æ˜¯åˆ›å»ºä¸€ä¸ªimgæ ‡ç­¾ï¼Œå¹¶ä¸”è®¾ç½®å•ç‹¬çš„æ ·å¼ã€‚ç»™<code>modules : true</code>åï¼Œæˆ‘ä»¬éœ€è¦æ¥ç€å¾€ä¸‹åšçš„å°±æ˜¯importè¯­æ³•ä¸Šæœ‰äº›æ”¹å˜ã€‚</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> style <span class="token keyword">from</span> <span class="token string">'./index.scss'</span>
</code></pre></div><p>ç„¶åé€šè¿‡styleè¿™ä¸ªå¯¹è±¡å˜é‡ä¸­å»æ‰¾ï¼Œæ‰¾åˆ°scssä¸­è®¾ç½®çš„åç§°å³å¯ã€‚</p> <p><strong>æ€»ç»“</strong></p> <ul><li><code>importLoaders:2</code>è¯¥é…ç½®ä¿¡æ¯è§£å†³çš„å°±æ˜¯åœ¨scssæ–‡ä»¶ä¸­åˆå¼•å…¥scssæ–‡ä»¶ï¼Œä¼šé‡æ–°ä»postcss-loaderå¼€å§‹æ‰“åŒ…</li> <li><code>modules:true</code>ä¼šä½œç”¨åŸŸå½“å‰çš„cssç¯å¢ƒä¸­ï¼Œæ ·å¼ä¸ä¼šå…¨å±€å¼•å…¥ï¼Œè¯­æ³•ä¸Šä¹Ÿéœ€è¦ä½¿ç”¨å¦‚ä¸‹å¼•å…¥</li> <li>import style from './index.scss'</li></ul> <p>æ¯”å¦‚å­—ä½“å›¾æ ‡æ€ä¹ˆé…ç½®ä¿¡æ¯å‘¢ï¼Ÿå¯¹äºå­—ä½“å›¾æ ‡å¤§æ‰“åŒ…ï¼Œå¯ä»¥ä½¿ç”¨file-loaderå®ŒæˆğŸ‘‡</p> <div class="language-js extra-class"><pre class="language-js"><code>		<span class="token punctuation">{</span>
            <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.(woff|woff2|eot|ttf|otf)$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
            <span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token punctuation">[</span>
                <span class="token string">'file-loader'</span>
            <span class="token punctuation">]</span>
        <span class="token punctuation">}</span>
</code></pre></div><p>æ›´å¤šçš„é™æ€èµ„æºçš„æ‰“åŒ…é…ç½®ï¼Œå¯ä»¥çœ‹å®˜ç½‘æ˜¯å¦‚ä½•ä½¿ç”¨çš„ï¼ŒğŸ‘‰ï¼ˆ<a href="">é™æ€loaderç®¡ç†èµ„æº</a>ï¼‰</p> <hr> <h2 id="webpackæ ¸å¿ƒæ¦‚å¿µplugins"><a href="#webpackæ ¸å¿ƒæ¦‚å¿µplugins" class="header-anchor">#</a> webpackæ ¸å¿ƒæ¦‚å¿µplugins</h2> <p>å¦‚ä½•ä½¿ç”¨pluginsè®©æ‰“åŒ…æ›´åŠ ä¾¿æ·å‘¢ï¼Œpluginsæ„æ€å°±æ˜¯æ’ä»¶æ„æ€ï¼Œå¾ˆå¤§ç¨‹åº¦ä¸Šæ–¹ä¾¿äº†æˆ‘ä»¬ï¼Œé‚£æˆ‘ä»¬æ¥çœ‹çœ‹å§ã€‚</p> <p>plugins: <strong>å¯ä»¥åœ¨webpackè¿è¡Œåˆ°æŸä¸ªæ—¶åˆ»çš„æ—¶å€™,å¸®ä½ åšä¸€äº›äº‹æƒ….</strong></p> <h3 id="å¦‚ä½•ä½¿ç”¨htmlwebpackplugin"><a href="#å¦‚ä½•ä½¿ç”¨htmlwebpackplugin" class="header-anchor">#</a> å¦‚ä½•ä½¿ç”¨HtmlWebpackPlugin</h3> <p><strong>è¿™ä¸ªæ’ä»¶çš„ä½œç”¨ï¼Œå°±æ˜¯ä¸ºä½ ç”Ÿæˆä¸€ä¸ªHTMLæ–‡ä»¶ï¼Œç„¶åå°†æ‰“åŒ…å¥½çš„jsæ–‡ä»¶è‡ªåŠ¨å¼•å…¥åˆ°è¿™ä¸ªhtmlæ–‡ä»¶ä¸­ã€‚</strong></p> <p>å¦‚ä½•é…ç½®å‘¢ï¼Ÿå¯ä»¥çœ‹<a href="https://www.webpackjs.com/plugins/html-webpack-plugin/" target="_blank" rel="noopener noreferrer">webpackå®˜ç½‘<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>é¦–å…ˆç¬¬ä¸€æ­¥ä¸‹è½½HtmlWebpackPlugin</p> <div class="language-bash extra-class"><pre class="language-bash"><code>cnpm <span class="token function">install</span> --save-dev html-webpack-plugin
</code></pre></div><p>ç„¶ååœ¨webpack.config.jsä¸­é…ç½®å¦‚ä¸‹ä¿¡æ¯ğŸ‘‡</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> HtmlWebpackPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'html-webpack-plugin'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> webpackConfig <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">entry</span><span class="token operator">:</span> <span class="token string">'index.js'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">output</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">path</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'./dist'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">'index_bundle.js'</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token keyword">new</span> <span class="token class-name">HtmlWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            <span class="token literal-property property">template</span><span class="token operator">:</span> <span class="token string">'src/index.html'</span>  <span class="token comment">// ä»¥src/ç›®å½•ä¸‹çš„index.htmlä¸ºæ¨¡æ¿æ‰“åŒ…</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>ç„¶åè¿è¡Œnpm run devï¼Œå°±ä¼šå‘ç°åœ¨distç›®å½•ä¸‹ï¼Œè‡ªåŠ¨å¸®ä½ ç”Ÿæˆä¸€ä¸ªHTMLæ¨¡å—ï¼Œå¹¶ä¸”å¼•å…¥bundle.jsæ–‡ä»¶ã€‚</p> <p><code>template: 'src/index.html'</code> è¿™ä¸ªé…ç½®ä¿¡æ¯çš„ä½œç”¨å°±æ˜¯å‘Šè¯‰ä½ ï¼Œä»¥å…·ä½“å“ªä¸ªindex.htmlä¸ºæ¨¡æ¿å»æ‰“åŒ…</p> <h3 id="å¦‚ä½•ä½¿ç”¨cleanwebpackplugin"><a href="#å¦‚ä½•ä½¿ç”¨cleanwebpackplugin" class="header-anchor">#</a> å¦‚ä½•ä½¿ç”¨CleanWebpackPlugin</h3> <p>è¿™ä¸ªæ’ä»¶çš„ä½œç”¨å°±æ˜¯ä¼šå¸®ä½ åˆ é™¤æŸä¸ªç›®å½•çš„æ–‡ä»¶,æ˜¯åœ¨æ‰“åŒ…å‰åˆ é™¤æ‰€æœ‰ä¸Šä¸€æ¬¡æ‰“åŒ…å¥½çš„æ–‡ä»¶ã€‚</p> <div class="language- extra-class"><pre class="language-text"><code>cnpm i clean-webpack-plugin -D
//"clean-webpack-plugin": "^3.0.0",æˆ‘çš„æ˜¯è¿™ä¸ªç‰ˆæœ¬
</code></pre></div><p>ç„¶åé…ç½®clean-webpack-pluginçš„è¯,éœ€è¦å»å¯¹äºç½‘ç«™ä¸ŠæŸ¥çœ‹å¦‚ä½•é…ç½®çš„,å¯ä»¥ç‚¹è¿™é‡ŒğŸ‘‰ <a href="https://www.npmjs.com/package/clean-webpack-plugin" target="_blank" rel="noopener noreferrer">npmä¸Š<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>é…ç½®ä¿¡æ¯å¦‚ä¸‹ğŸ‘‡,è¿™ä¸ªæ˜¯æœ€æ–°çš„clean-webpack-pluginé…ç½®</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token punctuation">{</span>CleanWebpackPlugin<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'clean-webpack-plugin'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// pluginsæ–°å¢åŠ è¿™ä¸€é¡¹ï¼Œwebpack4ç‰ˆæœ¬ä¸éœ€è¦é…ç½®è·¯å¾„</span>
<span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token keyword">new</span> <span class="token class-name">CleanWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
</code></pre></div><p>æœ€æ–°çš„webpack4ç‰ˆæœ¬æ˜¯ä¸éœ€è¦å»é…ç½®è·¯å¾„çš„ï¼Œè‡ªåŠ¨å¸®æˆ‘ä»¬æ¸…é™¤æ‰“åŒ…å¥½çš„distç›®å½•ä¸‹æ–‡ä»¶ã€‚</p> <hr> <h2 id="webpackæ ¸å¿ƒæ¦‚å¿µ"><a href="#webpackæ ¸å¿ƒæ¦‚å¿µ" class="header-anchor">#</a> webpackæ ¸å¿ƒæ¦‚å¿µ</h2> <h3 id="entryå’ŒoutputåŸºæœ¬é…ç½®"><a href="#entryå’ŒoutputåŸºæœ¬é…ç½®" class="header-anchor">#</a> entryå’ŒoutputåŸºæœ¬é…ç½®</h3> <p>æœ‰æ—¶å€™,ä½ éœ€è¦å¤šä¸ªå…¥å£æ–‡ä»¶,é‚£ä¹ˆæˆ‘ä»¬åˆæ˜¯æ€ä¹ˆå»å®Œæˆçš„å‘¢?è¿™ä¸ªæ—¶å€™,å°±éœ€è¦æ¥çœ‹ä¸€çœ‹entryå’Œoutputé…ç½®é¡¹</p> <p>å½“ç„¶äº†,webpackå®˜ç½‘ä¹Ÿæ˜¯æœ‰æ–‡æ¡£çš„,<a href="https://www.webpackjs.com/configuration/output/" target="_blank" rel="noopener noreferrer">outç‚¹è¿™é‡Œ<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>ä»¥åŠ<a href="https://www.webpackjs.com/configuration/entry-context/" target="_blank" rel="noopener noreferrer">entryç‚¹è¿™é‡Œ<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token literal-property property">entry</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">index</span> <span class="token operator">:</span><span class="token string">'./src/index.js'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">bundle</span> <span class="token operator">:</span> <span class="token string">'./src/create.js'</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token literal-property property">output</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">'[name].js'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">publicPath</span><span class="token operator">:</span> <span class="token string">"https://cdn.example.com/assets/"</span><span class="token punctuation">,</span>
        <span class="token literal-property property">path</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'dist'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>    
</code></pre></div><p><strong>æ€»ç»“</strong></p> <ul><li>entryè¿™æ ·å­é…ç½®å°±å¯ä»¥æ¥å—å¤šä¸ªæ‰“åŒ…çš„æ–‡ä»¶å…¥å£,åŒæ—¶çš„è¯,outputè¾“å‡ºæ–‡ä»¶çš„filenameéœ€è¦ä½¿ç”¨å ä½ç¬¦name</li> <li>è¿™æ ·å­å°±ä¼šç”Ÿæˆä¸¤ä¸ªæ–‡ä»¶,ä¸ä¼šæŠ¥é”™,å¯¹äºçš„åå­—å°±æ˜¯entryåç§°å¯¹åº”</li> <li>å¦‚æœåå°å·²ç»å°†èµ„æºæŒ‚è½½åˆ°äº†cdnä¸Š,é‚£ä¹ˆä½ çš„publicPathå°±ä¼šæŠŠè·¯å¾„å‰åšä¿®æ”¹åŠ ä¸ŠpublicPathå€¼</li></ul> <h3 id="å¦‚ä½•ä½¿ç”¨devtoolé…ç½®source-map"><a href="#å¦‚ä½•ä½¿ç”¨devtoolé…ç½®source-map" class="header-anchor">#</a> å¦‚ä½•ä½¿ç”¨devtoolé…ç½®source-map</h3> <p>devtoolé…ç½®source-map,è§£å†³çš„é—®é¢˜å°±æ˜¯,å½“ä½ ä»£ç å‡ºç°é—®é¢˜æ—¶,ä¼šæ˜ å°„åˆ°ä½ çš„åŸæ–‡ä»¶ç›®å½•ä¸‹çš„é”™è¯¯,å¹¶éæ˜¯æ‰“åŒ…å¥½çš„é”™è¯¯,è¿™ç‚¹ä¹Ÿå¾ˆæ˜¾ç„¶,å¦‚æœä¸è®¾ç½®çš„è¯,åªä¼šæ˜¾ç¤ºæ‰“åŒ…åbundle.jsæ–‡ä»¶ä¸­æŠ¥é”™,å¯¹åº”æŸ¥æ‰¾é”™è¯¯è€Œè¨€,æ˜¯å¾ˆä¸åˆ©çš„</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token literal-property property">devtool</span><span class="token operator">:</span><span class="token string">'inline-cheap-source-map'</span>
</code></pre></div><p>å¯¹åº”ä¸åŒçš„ç¯å¢ƒ,è®¾ç½®devtoolæ˜¯å¾ˆæœ‰å¿…è¦çš„,å¼€å‘ç¯å¢ƒä¸­,æˆ‘ä»¬éœ€è¦çœ‹æˆ‘ä»¬ä»£ç æ˜¯å“ªé‡ŒæŠ¥é”™è¯¯,æ‰€ä»¥éœ€è¦é…ç½®</p> <p><a href="https://www.webpackjs.com/configuration/devtool/" target="_blank" rel="noopener noreferrer">webpackå®˜ç½‘æœ‰æ–‡æ¡£ä»‹ç»<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>é‚£æˆ‘ä»¬ç»™å‡ºç»“è®ºğŸ‘‡</p> <ul><li>developmentç¯å¢ƒä¸‹,é…ç½® <code>devtool:'cheap-module-eval-source-map'</code></li> <li>productionç¯å¢ƒä¸‹,é…ç½® <code>devtool:'cheap-module-source-map'</code></li></ul> <div class="language- extra-class"><pre class="language-text"><code>// development devtool:'cheap-module-eval-source-map'
// production  devtool:'cheap-module-source-map'
</code></pre></div><h3 id="å¦‚ä½•ä½¿ç”¨webpack-dev-server"><a href="#å¦‚ä½•ä½¿ç”¨webpack-dev-server" class="header-anchor">#</a> å¦‚ä½•ä½¿ç”¨webpack-dev-server</h3> <p>webpack-dev-server èƒ½å¤Ÿç”¨äºå¿«é€Ÿå¼€å‘åº”ç”¨ç¨‹åºã€‚å¾ˆå¤šçš„é…ç½®éƒ½åœ¨webpackå®˜ç½‘æœ‰,<a href="https://www.webpackjs.com/configuration/dev-server/" target="_blank" rel="noopener noreferrer">ç‚¹å‡»è¿™é‡Œ<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>é¦–å…ˆå…ˆä¸‹è½½å®ƒ</p> <div class="language-java extra-class"><pre class="language-java"><code>cnpm i clean<span class="token operator">-</span>webpack<span class="token operator">-</span>plugin <span class="token operator">-</span><span class="token class-name">D</span>
</code></pre></div><p>å®ƒçš„ä½œç”¨å¾ˆå¤š,å¯ä»¥å¼€å¯ä¸€ä¸ªæœåŠ¡å™¨,è€Œä¸”å¯ä»¥å®æ—¶å»ç›‘å¬æ‰“åŒ…æ–‡ä»¶æ˜¯å¦æ”¹å˜,æ”¹å˜çš„è¯,å°±ä¼šå‡ºç°å»æ›´æ–°.</p> <div class="language- extra-class"><pre class="language-text"><code>devServer: {
        contentBase: path.join(__dirname, "dist"),   // distç›®å½•å¼€å¯æœåŠ¡å™¨
        compress: true,    // æ˜¯å¦ä½¿ç”¨gzipå‹ç¼©
        port: 9000,    // ç«¯å£å·
        open : true   // è‡ªåŠ¨æ‰“å¼€ç½‘é¡µ
    },
</code></pre></div><p>å¾ˆå¤šçš„é…ç½®é¡¹,å¯ä»¥å»å®˜æ–¹æ–‡æ¡£æŸ¥çœ‹,æ¯”å¦‚proxyä»£ç†ç­‰é…ç½®é¡¹,æ›´å¤šæ–‡æ¡£<a href="https://www.webpackjs.com/configuration/dev-server/" target="_blank" rel="noopener noreferrer">ç‚¹å‡»è¿™é‡Œ<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>ç„¶ååœ¨package.jsonä¸­scriptsé…ç½®é¡¹å¦‚ä¸‹</p> <div class="language- extra-class"><pre class="language-text"><code>"start": "webpack-dev-server"
</code></pre></div><p><strong>è¿™ä¸ªdevServerå¯ä»¥å®æ—¶æ£€æµ‹æ–‡ä»¶æ˜¯å¦å‘ç”Ÿå˜åŒ–</strong></p> <p>åŒæ—¶ä½ éœ€è¦æ³¨æ„çš„å†…å®¹å°±æ˜¯ä½¿ç”¨webpack-dev-serveræ‰“åŒ…çš„è¯,ä¸ä¼šç”Ÿæˆdistç›®å½•,è€Œæ˜¯å°†<strong>ä½ çš„æ–‡ä»¶æ‰“åŒ…åˆ°å†…å­˜ä¸­</strong></p> <p><strong>æ€»ç»“</strong></p> <ul><li>devServerå¯ä»¥å¼€å¯ä¸€ä¸ªæœ¬åœ°æœåŠ¡å™¨,åŒæ—¶å¸®æˆ‘ä»¬æ›´æ–°åŠ è½½æœ€æ–°èµ„æº</li> <li>æ‰“åŒ…çš„æ–‡ä»¶ä¼šæ”¾åœ¨å†…å­˜ä¸­,ä¸ä¼šç”Ÿæˆdistç›®å½•</li></ul> <h3 id="æ¨¡å—çƒ­æ›¿æ¢-hot-module-replacement"><a href="#æ¨¡å—çƒ­æ›¿æ¢-hot-module-replacement" class="header-anchor">#</a> æ¨¡å—çƒ­æ›¿æ¢(hot module replacement)</h3> <p>æ¨¡å—çƒ­æ›¿æ¢(HMR - Hot Module Replacement)åŠŸèƒ½ä¼šåœ¨åº”ç”¨ç¨‹åºè¿è¡Œè¿‡ç¨‹ä¸­æ›¿æ¢ã€æ·»åŠ æˆ–åˆ é™¤<a href="https://www.webpackjs.com/concepts/modules/" target="_blank" rel="noopener noreferrer">æ¨¡å—<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>ï¼Œè€Œæ— éœ€é‡æ–°åŠ è½½æ•´ä¸ªé¡µé¢ã€‚</p> <p>é¡¾åæ€ä¹‰å®ƒè¯´çš„å°±æ˜¯,å¤šä¸ªæ¨¡å—ä¹‹å‰,å½“ä½ ä¿®æ”¹ä¸€ä¸ªæ¨¡å—,è€Œä¸æƒ³é‡æ–°åŠ è½½æ•´ä¸ªé¡µé¢æ—¶,å°±å¯ä»¥ä½¿ç”¨<code>hot module replacement</code></p> <p>ä¸¾ä¸ªä¾‹å­,å½“ä½ ä¿®æ”¹äº†cssä»£ç ä¸­ä¸€äº›æ ·å¼,ä¸é…ç½®HMRæ¨¡å—çƒ­æ›¿æ¢çš„è¯,æ•´ä¸ªé¡µé¢éƒ½ä¼šé‡æ–°å»æ¸²æŸ“,è¿™æ ·å­æ˜¯æ²¡æœ‰å¿…è¦çš„,é‚£ä¹ˆæˆ‘ä»¬æ¥ä¸‹æ¥å°±å»é…ç½®ğŸ‘‡</p> <div class="language- extra-class"><pre class="language-text"><code>devServer: {
        contentBase: path.join(__dirname, "dist"),
        compress: true,
        port: 9000,
        open: true,
        hot: true,   // å¼€å¯çƒ­æ›´æ–°
        // hotOnly: true,
    },
</code></pre></div><p>è¿™ä¸ªhotOnlyå¯ä»¥è®¾ç½®,æœ€ä¸»è¦çš„æ˜¯è®¾ç½®<code>hot:true</code></p> <p>ç„¶ååŠ å…¥ä¸¤ä¸ªæ’ä»¶,è¿™ä¸ªæ’ä»¶æ—¶webpackè‡ªå¸¦çš„,æ‰€ä»¥ä¸éœ€è¦ä¸‹è½½ğŸ‘‡</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> webpack <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'webpack'</span><span class="token punctuation">)</span>
<span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>NamedModulesPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>  <span class="token comment">// å¯é…ç½®ä¹Ÿå¯ä¸é…ç½®</span>
        <span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>HotModuleReplacementPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// è¿™ä¸ªæ˜¯å¿…é¡»é…ç½®çš„æ’ä»¶</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
</code></pre></div><p>æ·»åŠ äº† <code>NamedModulesPlugin</code>ï¼Œä»¥ä¾¿æ›´å®¹æ˜“æŸ¥çœ‹è¦ä¿®è¡¥(patch)çš„ä¾èµ–ã€‚</p> <p>é…ç½®å®Œä¸Šè¿°çš„ä¿¡æ¯ä¹‹å,é‡æ–°å»è¿è¡Œå‘½ä»¤çš„è¯,å°±ä¼šå‘ç°å¯åŠ¨äº†<code>æ¨¡å—çƒ­æ›¿æ¢</code>,ä¸åŒæ¨¡å—çš„æ–‡ä»¶æ›´æ–°,åªä¼šä¸‹è½½å½“å‰æ¨¡å—æ–‡ä»¶</p> <p>å”¯ä¸€éœ€è¦æ³¨æ„çš„å†…å®¹æ˜¯,å¯¹äºcssçš„å†…å®¹ä¿®æ”¹,css-loaderåº•å±‚ä¼šå¸®æˆ‘ä»¬åšå¥½å®æ—¶çƒ­æ›´æ–°,å¯¹äºJSæ¨¡å—çš„è¯,æˆ‘ä»¬éœ€è¦æ‰‹åŠ¨çš„å»é…ç½®ğŸ‘‡</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">if</span><span class="token punctuation">(</span>module<span class="token punctuation">.</span>hot<span class="token punctuation">)</span><span class="token punctuation">{</span>
    module<span class="token punctuation">.</span>hot<span class="token punctuation">.</span><span class="token function">accept</span><span class="token punctuation">(</span><span class="token string">'./print'</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
        <span class="token function">print</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>è¿™ä¸ªå®˜æ–¹ä¹Ÿç»™å‡ºäº†è¯­æ³•,module.hot.accept(module1,callback) è¡¨ç¤ºçš„å°±æ˜¯æ¥å—ä¸€ä¸ªéœ€è¦å®æ—¶çƒ­æ›´æ–°çš„æ¨¡å—,å½“å†…å®¹å‘ç”Ÿå˜åŒ–æ—¶,ä¼šå¸®ä½ æ£€æµ‹åˆ°,ç„¶åæ‰§è¡Œå›è°ƒå‡½æ•°</p> <p><strong>æ€»ç»“</strong></p> <ul><li>HMRæ¨¡å—çƒ­æ›¿æ¢è§£å†³çš„é—®é¢˜å°±æ˜¯,å®ƒå…è®¸åœ¨è¿è¡Œæ—¶æ›´æ–°å„ç§æ¨¡å—ï¼Œè€Œæ— éœ€è¿›è¡Œå®Œå…¨åˆ·æ–°ã€‚</li> <li>æ„æ€å°±æ˜¯ä¸éœ€è¦é‡æ–°å»æœ¬åœ°æœåŠ¡å™¨é‡æ–°å»åŠ è½½å…¶ä»–ä¸ºä¿®æ”¹çš„èµ„æº</li> <li>éœ€è¦æ³¨æ„çš„å°±æ˜¯,å¯¹äºjsæ–‡ä»¶çš„çƒ­æ›´æ–°çš„è¯,éœ€è¦æ‰‹åŠ¨çš„å»æ£€æµ‹æ›´æ–°å†…å®¹,ä¹Ÿå°±æ˜¯module.hot.acceptè¯­æ³•</li></ul> <p>æ›´å¤šçš„é…ç½®ä¿¡æ¯å»webpackå®˜ç½‘æŸ¥çœ‹,<a href="https://www.webpackjs.com/guides/hot-module-replacement/" target="_blank" rel="noopener noreferrer">ç‚¹è¿™é‡ŒæŸ¥çœ‹HMR<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h3 id="babelå¤„ç†es6è¯­æ³•"><a href="#babelå¤„ç†es6è¯­æ³•" class="header-anchor">#</a> Babelå¤„ç†ES6è¯­æ³•</h3> <p>æ¥ä¸‹æ¥æˆ‘ä»¬å°±æ¥é…ç½®å®ƒğŸ‘‡</p> <div class="language-js extra-class"><pre class="language-js"><code>npm install <span class="token operator">--</span>save<span class="token operator">-</span>dev babel<span class="token operator">-</span>loader @babel<span class="token operator">/</span>core
<span class="token comment">// @babel/core æ˜¯babelä¸­çš„ä¸€ä¸ªæ ¸å¿ƒåº“</span>

npm install <span class="token operator">--</span>save<span class="token operator">-</span>dev @babel<span class="token operator">/</span>preset<span class="token operator">-</span>env
<span class="token comment">// preset-env è¿™ä¸ªæ¨¡å—å°±æ˜¯å°†è¯­æ³•ç¿»è¯‘æˆes5è¯­æ³•,è¿™ä¸ªæ¨¡å—åŒ…æ‹¬äº†æ‰€æœ‰ç¿»è¯‘æˆes5è¯­æ³•è§„åˆ™</span>

npm install <span class="token operator">--</span>save @babel<span class="token operator">/</span>polyfill
<span class="token comment">// å°†Promise,mapç­‰ä½ç‰ˆæœ¬ä¸­æ²¡æœ‰å®ç°çš„è¯­æ³•,ç”¨polyfillæ¥å®ç°.</span>

</code></pre></div><p>é…ç½®moduleğŸ‘‡</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token literal-property property">module</span><span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">rules</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
            <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.js$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
            <span class="token literal-property property">exclude</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">node_modules</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
            <span class="token literal-property property">loader</span><span class="token operator">:</span> <span class="token string">"babel-loader"</span><span class="token punctuation">,</span>
            <span class="token literal-property property">options</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                <span class="token string-property property">"presets"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
                    <span class="token punctuation">[</span>
                        <span class="token string">"@babel/preset-env"</span><span class="token punctuation">,</span>
                        <span class="token punctuation">{</span>
                            <span class="token string-property property">"useBuiltIns"</span><span class="token operator">:</span> <span class="token string">"usage"</span>
                        <span class="token punctuation">}</span>
                    <span class="token punctuation">]</span>
                <span class="token punctuation">]</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
<span class="token comment">// excludeå‚æ•°: node_modulesç›®å½•ä¸‹çš„jsæ–‡ä»¶ä¸éœ€è¦åšè½¬es5è¯­æ³•,ä¹Ÿå°±æ˜¯æ’é™¤ä¸€äº›ç›®å½•</span>
<span class="token comment">// "useBuiltIns"å‚æ•°:</span>
</code></pre></div><ul><li><p>æœ‰äº†<code>preset-env</code>è¿™ä¸ªæ¨¡å—å,æˆ‘ä»¬å°±ä¼šå‘ç°æˆ‘ä»¬å†™çš„<strong>constè¯­æ³•è¢«ç¿»è¯‘æˆæˆvar</strong></p></li> <li><p>ä½†æ˜¯ç»†å¿ƒçš„ä¼šå‘ç°,å¯¹äºPromiseä»¥åŠmapè¿™äº›è¯­æ³•,ä½ç‰ˆæœ¬æµè§ˆå™¨æ˜¯ä¸æ”¯æŒçš„,</p></li> <li><p>æ‰€ä»¥æˆ‘ä»¬éœ€è¦<code>@babel/polyfill</code>æ¨¡å—,å¯¹Promise,mapè¿›è¡Œè¡¥å……,å®Œæˆè¯¥åŠŸèƒ½,ä¹Ÿå°±æ˜¯å‰é¢è¯´çš„<code>polyfill</code></p></li></ul> <p>ç„¶åæˆ‘ä»¬æ€ä¹ˆä½¿ç”¨å‘¢?å°±æ˜¯åœ¨jsæ–‡ä»¶æœ€å¼€å§‹å¯¼å…¥ğŸ‘‡</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token string">"@babel/polyfill"</span><span class="token punctuation">;</span>
</code></pre></div><p>ä½†æ˜¯ç»†å¿ƒçš„åŒå­¦,ä¼šå‘ç°é—®é¢˜,ç”¨å®Œè¿™ä¸ªä»¥å,æ‰“åŒ…çš„æ–‡ä»¶ä½“ç§¯ç¬é—´å¢åŠ äº†10å¤šå€ä¹‹å¤š,è¿™æ˜¯ä¸ºä»€ä¹ˆå‘¢?</p> <p>è¿™æ˜¯å› ä¸º,<code>@babel/polyfill</code>ä¸ºäº†å¼¥è¡¥Promise,mapç­‰è¯­æ³•çš„åŠŸèƒ½,è¯¥æ¨¡å—å°±éœ€è¦<strong>è‡ªå·±å»å®ç°Promise,mapç­‰è¯­æ³•</strong>çš„åŠŸèƒ½,è¿™ä¹Ÿå°±æ˜¯ä¸ºä»€ä¹ˆæ‰“åŒ…åçš„æ–‡ä»¶å¾ˆå¤§çš„åŸå› .</p> <p>é‚£æˆ‘ä»¬éœ€è¦å¯¹<code>@babel/polyfill</code>å‚æ•°åšä¸€äº›é…ç½®å³å¯,å¦‚ä¸‹ğŸ‘‡</p> <div class="language- extra-class"><pre class="language-text"><code>"useBuiltIns": "usage"
</code></pre></div><p>è¿™ä¸ªè¯­æ³•ä½œç”¨å°±æ˜¯: åªä¼šå¯¹æˆ‘ä»¬index.jså½“å‰è¦æ‰“åŒ…çš„æ–‡ä»¶ä¸­ä½¿ç”¨è¿‡çš„è¯­æ³•,æ¯”å¦‚Promise,mapåšpolyfill,å…¶ä»–es6æœªå‡ºç°çš„è¯­æ³•,æˆ‘ä»¬æš‚æ—¶ä¸å»åšpolyfill,è¿™æ ·å­,æ‰“åŒ…åçš„æ–‡ä»¶å°±å‡å°‘ä½“ç§¯äº†</p> <p><strong>æ€»ç»“</strong></p> <ul><li>éœ€è¦æŒ‰ç…§babel-loader @babel/coreè¿™äº›åº“,@babel/coreæ˜¯å®ƒçš„æ ¸å¿ƒåº“</li> <li>@babel/preset-env å®ƒåŒ…å«äº†es6ç¿»è¯‘æˆes5çš„è¯­æ³•è§„åˆ™</li> <li>@babel/polyfill è§£å†³äº†ä½ç‰ˆæœ¬æµè§ˆå™¨æ— æ³•å®ç°çš„ä¸€äº›es6è¯­æ³•,ä½¿ç”¨polyfillè‡ªå·±æ¥å®ç°</li> <li>é€šè¿‡<code>import "@babel/polyfill";</code> åœ¨jsæ–‡ä»¶å¼€å¤´å¼•å…¥,å®Œæˆå¯¹es6è¯­æ³•çš„polyfill</li> <li>ä»¥ä¸Šçš„åœºæ™¯éƒ½æ˜¯è§£å†³çš„é—®é¢˜æ˜¯ä¸šåŠ¡ä¸­é‡åˆ°babelçš„é—®é¢˜</li></ul> <p>æ›´å¤šçš„é…ç½®çœ‹å®˜æ–¹æ–‡æ¡£,<a href="https://www.babeljs.cn/" target="_blank" rel="noopener noreferrer">ç‚¹è¿™é‡Œ<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>å½“ä½ ç”Ÿæˆç¬¬ä¸‰æ–¹æ¨¡å—æ—¶,æˆ–è€…æ˜¯ç”ŸæˆUIç»„ä»¶åº“æ—¶,ä½¿ç”¨polyfillè§£å†³é—®é¢˜,å°±ä¼šå‡ºç°é—®é¢˜äº†,ä¸Šé¢çš„åœºæ™¯ä½¿ç”¨babelä¼šæ±¡æŸ“ç¯å¢ƒ,è¿™ä¸ªæ—¶å€™,æˆ‘ä»¬éœ€è¦æ¢ä¸€ç§æ–¹æ¡ˆæ¥è§£å†³ğŸ‘‡</p> <p><strong>@babel/plugin-transform-runtime</strong>è¿™ä¸ªåº“å°±èƒ½è§£å†³æˆ‘ä»¬çš„é—®é¢˜,é‚£æˆ‘ä»¬å…ˆå®‰è£…éœ€è¦çš„åº“</p> <div class="language- extra-class"><pre class="language-text"><code>npm install --save-dev @babel/plugin-transform-runtime

npm install --save @babel/runtime
</code></pre></div><p>æˆ‘ä»¬è¿™ä¸ªæ—¶å€™å¯ä»¥åœ¨æ ¹ç›®å½•ä¸‹å»ºä¸€ä¸ª<code>.babelrc</code>æ–‡ä»¶,å°†åŸæœ¬è¦åœ¨optionsä¸­çš„é…ç½®ä¿¡æ¯å†™åœ¨<code>.babelrc</code>æ–‡ä»¶ğŸ‘‡</p> <div class="language- extra-class"><pre class="language-text"><code>{
    
    "plugins": [
      [
        "@babel/plugin-transform-runtime",
        {
          "corejs": 2,
          "helpers": true,
          "regenerator": true,
          "useESModules": false
        }
      ]
    ]
  }
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// å½“ä½ çš„ "corejs": 2,éœ€è¦å®‰è£…ä¸‹é¢è¿™ä¸ª</span>
npm install <span class="token operator">--</span>save @babel<span class="token operator">/</span>runtime<span class="token operator">-</span>corejs2
</code></pre></div><p>è¿™æ ·å­çš„è¯,åœ¨ä½¿ç”¨è¯­æ³•æ˜¯,å°±ä¸éœ€è¦å»é€šè¿‡<code>import "@babel/polyfill";</code>è¿™æ ·å­çš„è¯­æ³•å»å®Œæˆäº†,ç›´æ¥æ­£å¸¸å†™å°±è¡Œäº†,è€Œä¸”ä»æ‰“åŒ…çš„ä½“ç§¯æ¥çœ‹,å…¶å®å¯ä»¥æ¥å—çš„</p> <p><strong>æ€»ç»“</strong></p> <ul><li>ä»ä¸šåŠ¡åœºæ™¯æ¥çœ‹,å¯ä»¥ä½¿ç”¨<code>@babel/preset-env</code></li> <li>ä»è‡ªå·±ç”Ÿæˆç¬¬ä¸‰æ–¹åº“æˆ–è€…æ—¶UIæ—¶,ä½¿ç”¨<code>@babel/plugin-transform-runtime</code>,å®ƒä½œç”¨æ˜¯å°† helper å’Œ polyfill éƒ½æ”¹ä¸ºä»ä¸€ä¸ªç»Ÿä¸€çš„åœ°æ–¹å¼•å…¥ï¼Œå¹¶ä¸”å¼•å…¥çš„å¯¹è±¡å’Œå…¨å±€å˜é‡æ˜¯å®Œå…¨éš”ç¦»çš„,é¿å…äº†å…¨å±€çš„æ±¡æŸ“</li></ul> <hr> <h2 id="webpacké«˜çº§æ¦‚å¿µ"><a href="#webpacké«˜çº§æ¦‚å¿µ" class="header-anchor">#</a> webpacké«˜çº§æ¦‚å¿µ</h2> <h3 id="å¦‚ä½•ä½¿ç”¨tree-shaking"><a href="#å¦‚ä½•ä½¿ç”¨tree-shaking" class="header-anchor">#</a> å¦‚ä½•ä½¿ç”¨tree shaking</h3> <p>treeæ ‘ï¼Œshakingæ‘‡åŠ¨ï¼Œé‚£ä¹ˆä½ å¯ä»¥æŠŠç¨‹åºæƒ³æˆä¸€é¢—æ ‘ã€‚ç»¿è‰²è¡¨ç¤ºå®é™…ç”¨åˆ°çš„æºç å’Œ libraryï¼Œæ˜¯æ ‘ä¸Šæ´»çš„æ ‘å¶ã€‚ç°è‰²è¡¨ç¤ºæ— ç”¨çš„ä»£ç ï¼Œæ˜¯ç§‹å¤©æ ‘ä¸Šæ¯èçš„æ ‘å¶ã€‚ä¸ºäº†é™¤å»æ­»å»çš„æ ‘å¶ï¼Œä½ å¿…é¡»æ‘‡åŠ¨è¿™æ£µæ ‘ï¼Œä½¿å®ƒä»¬è½ä¸‹ã€‚</p> <p>é€šä¿—æ„ä¹‰è€Œè¨€ï¼Œå½“ä½ å¼•å…¥ä¸€ä¸ªæ¨¡å—æ—¶ï¼Œä½ å¯èƒ½ç”¨åˆ°çš„åªæ˜¯å…¶ä¸­çš„æŸäº›åŠŸèƒ½ï¼Œè¿™ä¸ªæ—¶å€™ï¼Œæˆ‘ä»¬ä¸å¸Œæœ›è¿™äº›<code>æ— ç”¨</code>çš„ä»£ç æ‰“åŒ…åˆ°é¡¹ç›®ä¸­å»ã€‚é€šè¿‡tree-shakingï¼Œå°±èƒ½å°†æ²¡æœ‰ä½¿ç”¨çš„æ¨¡å—æ‘‡æ‰ï¼Œè¿™æ ·è¾¾åˆ°äº†åˆ é™¤æ— ç”¨ä»£ç çš„ç›®çš„ã€‚</p> <p>éœ€è¦æ³¨æ„çš„æ—¶webpack4é»˜è®¤çš„productionä¸‹æ˜¯ä¼šè¿›è¡Œtree-shakingçš„ï¼Œ</p> <p><code>optimization.usedExports</code></p> <p>ä½¿webpackç¡®å®šæ¯ä¸ªæ¨¡å—å¯¼å‡ºé¡¹ï¼ˆexportsï¼‰çš„ä½¿ç”¨æƒ…å†µã€‚ä¾èµ–äº<code>optimization.providedExports</code>çš„é…ç½®ã€‚<code>optimization.usedExports</code>æ”¶é›†åˆ°çš„ä¿¡æ¯ä¼šè¢«å…¶ä»–ä¼˜åŒ–é¡¹æˆ–äº§å‡ºä»£ç ä½¿ç”¨åˆ°ï¼ˆæ¨¡å—æœªç”¨åˆ°çš„å¯¼å‡ºé¡¹ä¸ä¼šè¢«å¯¼å‡ºï¼Œåœ¨è¯­æ³•å®Œå…¨å…¼å®¹çš„æƒ…å†µä¸‹ä¼šæŠŠå¯¼å‡ºåç§°æ··æ·†ä¸ºå•ä¸ªcharï¼‰ã€‚ä¸ºäº†æœ€å°åŒ–ä»£ç ä½“ç§¯ï¼Œæœªç”¨åˆ°çš„çš„å¯¼å‡ºé¡¹ç›®ï¼ˆexportsï¼‰ä¼šè¢«åˆ é™¤ã€‚ç”Ÿäº§ç¯å¢ƒ(production)é»˜è®¤å¼€å¯ã€‚</p> <div class="language- extra-class"><pre class="language-text"><code>module.exports = {
  //...
  optimization: {
    usedExports: true
  }
};
</code></pre></div><p>è¿™ä¸ªæ—¶å€™ï¼Œå†å»çœ‹çœ‹è‡ªå·±çš„æ‰“åŒ…bundle.jsæ–‡ä»¶ï¼Œå°±ä¼šå‘ç°ï¼Œå®ƒä¼šæœ‰ç›¸åº”çš„æå‡åŠŸèƒ½ã€‚</p> <h4 id="å°†æ–‡ä»¶æ ‡è®°ä¸ºæ— å‰¯ä½œç”¨-side-effect-free"><a href="#å°†æ–‡ä»¶æ ‡è®°ä¸ºæ— å‰¯ä½œç”¨-side-effect-free" class="header-anchor">#</a> <strong>å°†æ–‡ä»¶æ ‡è®°ä¸ºæ— å‰¯ä½œç”¨(side-effect-free)</strong></h4> <p>æœ‰æ—¶å€™ï¼Œå½“æˆ‘ä»¬çš„æ¨¡å—ä¸æ˜¯è¾¾åˆ°å¾ˆçº¯ç²¹ï¼Œè¿™ä¸ªæ—¶å€™ï¼Œwebpackå°±æ— æ³•è¯†åˆ«å‡ºå“ªäº›ä»£ç éœ€è¦åˆ é™¤ï¼Œæ‰€ä»¥ï¼Œæ­¤æ—¶æœ‰å¿…è¦å‘ webpack çš„ compiler æä¾›æç¤ºå“ªäº›ä»£ç æ˜¯â€œçº¯ç²¹éƒ¨åˆ†â€ã€‚</p> <p>è¿™ç§æ–¹å¼æ˜¯é€šè¿‡ package.json çš„ <code>"sideEffects"</code> å±æ€§æ¥å®ç°çš„ã€‚</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"webpack-demo"</span><span class="token punctuation">,</span>
  <span class="token property">"sideEffects"</span><span class="token operator">:</span> <span class="token boolean">false</span>
<span class="token punctuation">}</span>
</code></pre></div><p>å¦‚åŒä¸Šé¢æåˆ°çš„ï¼Œå¦‚æœæ‰€æœ‰ä»£ç éƒ½ä¸åŒ…å«å‰¯ä½œç”¨ï¼Œæˆ‘ä»¬å°±å¯ä»¥ç®€å•åœ°å°†è¯¥å±æ€§æ ‡è®°ä¸º <code>false</code>ï¼Œæ¥å‘ŠçŸ¥ webpackï¼Œå®ƒå¯ä»¥å®‰å…¨åœ°åˆ é™¤æœªç”¨åˆ°çš„ export å¯¼å‡ºã€‚</p> <blockquote><p><em>æ³¨æ„ï¼Œä»»ä½•å¯¼å…¥çš„æ–‡ä»¶éƒ½ä¼šå—åˆ° tree shaking çš„å½±å“ã€‚è¿™æ„å‘³ç€ï¼Œå¦‚æœåœ¨é¡¹ç›®ä¸­ä½¿ç”¨ç±»ä¼¼</em> <code>css-loader</code> <em>å¹¶å¯¼å…¥ CSS æ–‡ä»¶ï¼Œåˆ™éœ€è¦å°†å…¶æ·»åŠ åˆ° side effect åˆ—è¡¨ä¸­ï¼Œä»¥å…åœ¨ç”Ÿäº§æ¨¡å¼ä¸­æ— æ„ä¸­å°†å®ƒåˆ é™¤ï¼š</em></p></blockquote> <div class="language- extra-class"><pre class="language-text"><code>{
  "name": "webpack-demo",
  "sideEffects": [
    "*.css"
  ]
}
</code></pre></div><h4 id="å‹ç¼©è¾“å‡º"><a href="#å‹ç¼©è¾“å‡º" class="header-anchor">#</a> <strong>å‹ç¼©è¾“å‡º</strong></h4> <blockquote><p>é€šè¿‡å¦‚ä¸Šæ–¹å¼ï¼Œæˆ‘ä»¬å·²ç»å¯ä»¥é€šè¿‡ <code>import</code> å’Œ <code>export</code> è¯­æ³•ï¼Œæ‰¾å‡ºé‚£äº›éœ€è¦åˆ é™¤çš„â€œæœªä½¿ç”¨ä»£ç (dead code)â€ï¼Œç„¶è€Œï¼Œæˆ‘ä»¬ä¸åªæ˜¯è¦æ‰¾å‡ºï¼Œè¿˜éœ€è¦åœ¨ bundle ä¸­åˆ é™¤å®ƒä»¬ã€‚ä¸ºæ­¤ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ <code>-p</code>(production) è¿™ä¸ª webpack ç¼–è¯‘æ ‡è®°ï¼Œæ¥å¯ç”¨ uglifyjs å‹ç¼©æ’ä»¶ã€‚</p></blockquote> <p><strong>ä» webpack 4 å¼€å§‹ï¼Œä¹Ÿå¯ä»¥é€šè¿‡ <code>"mode"</code> é…ç½®é€‰é¡¹è½»æ¾åˆ‡æ¢åˆ°å‹ç¼©è¾“å‡ºï¼Œåªéœ€è®¾ç½®ä¸º <code>"production"</code>ã€‚</strong></p> <h4 id="æ€»ç»“"><a href="#æ€»ç»“" class="header-anchor">#</a> <strong>æ€»ç»“</strong></h4> <ul><li>ä¸ºäº†ä½¿ç”¨tree-shakingçš„è¯ï¼Œéœ€è¦ä½¿ç”¨ES Moduleè¯­æ³•ï¼Œä¹Ÿå°±æ˜¯ä½¿ç”¨ ES2015 æ¨¡å—è¯­æ³•ï¼ˆå³ <code>import</code> å’Œ <code>export</code>ï¼‰ã€‚</li> <li>åœ¨é¡¹ç›® <code>package.json</code> æ–‡ä»¶ä¸­ï¼Œæ·»åŠ ä¸€ä¸ª "sideEffects" å…¥å£ã€‚</li> <li>å¼•å…¥ä¸€ä¸ªèƒ½å¤Ÿåˆ é™¤æœªå¼•ç”¨ä»£ç (dead code)çš„å‹ç¼©å·¥å…·(minifier)ï¼ˆä¾‹å¦‚ <code>UglifyJSPlugin</code>ï¼‰ï¼Œå½“ç„¶äº†ï¼Œwebpack4å¼€å§‹ï¼Œä»¥åŠæ”¯æŒå‹ç¼©è¾“å‡ºäº†ã€‚</li></ul> <p>å¯¹äºåŸç†ç¯‡ï¼Œå¯ä»¥çœ‹çœ‹è¿™ç¯‡<a href="https://juejin.im/post/6844903544756109319" target="_blank" rel="noopener noreferrer">Tree-Shakingæ€§èƒ½ä¼˜åŒ–å®è·µ - åŸç†ç¯‡<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h3 id="developmentå’Œproductionç¯å¢ƒæ„å»º"><a href="#developmentå’Œproductionç¯å¢ƒæ„å»º" class="header-anchor">#</a> <em>development</em>å’Œ<em>production</em>ç¯å¢ƒæ„å»º</h3> <p>åœ¨å¼€å‘ç¯å¢ƒå’Œç”Ÿæˆç¯å¢ƒä¸­ï¼Œæˆ‘ä»¬ä¾èµ–çš„åŠŸèƒ½æ˜¯ä¸ä¸€æ ·çš„ï¼Œä¸¾ä¸ªä¾‹å­ğŸ‘‡</p> <ul><li><em>å¼€å‘ç¯å¢ƒ</em>ä¸­ï¼Œæˆ‘ä»¬éœ€è¦å…·æœ‰å¼ºå¤§çš„ã€å…·æœ‰å®æ—¶é‡æ–°åŠ è½½(live reloading)æˆ–çƒ­æ¨¡å—æ›¿æ¢(hot module replacement)èƒ½åŠ›çš„ source map å’Œ localhost serverã€‚</li> <li><em>ç”Ÿäº§ç¯å¢ƒ</em>ä¸­ï¼Œæˆ‘ä»¬çš„ç›®æ ‡åˆ™è½¬å‘äºå…³æ³¨æ›´å°çš„ bundleï¼Œæ›´è½»é‡çš„ source mapï¼Œä»¥åŠæ›´ä¼˜åŒ–çš„èµ„æºï¼Œä»¥æ”¹å–„åŠ è½½æ—¶é—´ã€‚</li></ul> <p>åŸºäºä»¥ä¸Šä¸¤ç‚¹çš„è¯ï¼Œæˆ‘ä»¬éœ€è¦ä¸ºæ¯ä¸ªç¯å¢ƒæ­å»ºå½¼æ­¤ç‹¬ç«‹çš„webpacké…ç½®ã€‚</p> <p>å…¶å®ï¼Œå†™è¿‡vueï¼ŒReactéƒ½ä¼šå‘ç°ï¼Œæœ‰ä¸€ä¸ª<code>webpack.common.js</code>çš„é…ç½®æ–‡ä»¶ï¼Œå®ƒçš„ä½œç”¨å°±æ˜¯ä¸å¿…åœ¨é…ç½®ä¸­é…ç½®é‡å¤çš„ä»£ç ã€‚</p> <h4 id="webpack-mergeå®‰è£…"><a href="#webpack-mergeå®‰è£…" class="header-anchor">#</a> webpack-mergeå®‰è£…</h4> <p>é‚£ä¹ˆé¦–å…ˆéœ€è¦å®‰è£…çš„å°±æ˜¯<code>webpack-merge</code>,ä¹‹åå†æ•´åˆä¸€èµ·ã€‚</p> <div class="language-bash extra-class"><pre class="language-bash"><code>cnpm <span class="token function">install</span> --save-dev webpack-merge
</code></pre></div><p>é‚£ä¹ˆæˆ‘ä»¬çš„ç›®å½•å°±æ˜¯è¿™æ ·å­çš„ğŸ‘‡</p> <div class="language-diff extra-class"><pre class="language-diff"><code><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">webpack-demo
</span><span class="token prefix unchanged"> </span><span class="token line"> |- build
</span><span class="token prefix unchanged"> </span><span class="token line">   |- webpack.common.js  //ä¸‰ä¸ªæ–°webpacké…ç½®æ–‡ä»¶
</span><span class="token prefix unchanged"> </span><span class="token line">   |- webpack.dev.js    //ä¸‰ä¸ªæ–°webpacké…ç½®æ–‡ä»¶
</span><span class="token prefix unchanged"> </span><span class="token line">   |- webpack.prod.js  //ä¸‰ä¸ªæ–°webpacké…ç½®æ–‡ä»¶
</span><span class="token prefix unchanged"> </span><span class="token line"> |- package.json
</span><span class="token prefix unchanged"> </span><span class="token line"> |-postcss.config.js
</span><span class="token prefix unchanged"> </span><span class="token line"> |-.babelrc
</span><span class="token prefix unchanged"> </span><span class="token line"> |- /dist
</span><span class="token prefix unchanged"> </span><span class="token line"> |- /src
</span><span class="token prefix unchanged"> </span><span class="token line">   |- index.js
</span><span class="token prefix unchanged"> </span><span class="token line">   |- math.js
</span><span class="token prefix unchanged"> </span><span class="token line"> |- /node_modules
</span></span></code></pre></div><p>é‚£ä¹ˆå­¦åˆ°ç°åœ¨ï¼Œçœ‹çœ‹é…ç½®äº†å“ªäº›ä¿¡æ¯ğŸ‘‡</p> <p><strong>webpack.common.js</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> HtmlWebpackPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'html-webpack-plugin'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span>CleanWebpackPlugin<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'clean-webpack-plugin'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> commonConfig <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">entry</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">main</span><span class="token operator">:</span> <span class="token string">'./src/index.js'</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">module</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">rules</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
            <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.js$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
            <span class="token literal-property property">exclude</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">node_modules</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
            <span class="token literal-property property">loader</span><span class="token operator">:</span> <span class="token string">"babel-loader"</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
            <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.(jpg|gif|png)$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
            <span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                <span class="token literal-property property">loader</span><span class="token operator">:</span> <span class="token string">'url-loader'</span><span class="token punctuation">,</span>
                <span class="token literal-property property">options</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'[name]_[hash].[ext]'</span><span class="token punctuation">,</span>
                    <span class="token literal-property property">outputPath</span><span class="token operator">:</span> <span class="token string">'images/'</span><span class="token punctuation">,</span>
                    <span class="token literal-property property">limit</span><span class="token operator">:</span> <span class="token number">1024</span> <span class="token comment">//100KB</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
            <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.css$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
            <span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'style-loader'</span><span class="token punctuation">,</span> <span class="token string">'css-loader'</span><span class="token punctuation">,</span> <span class="token string">'postcss-loader'</span><span class="token punctuation">]</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
            <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.scss$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
            <span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'style-loader'</span><span class="token punctuation">,</span>
                <span class="token punctuation">{</span>
                    <span class="token literal-property property">loader</span><span class="token operator">:</span> <span class="token string">'css-loader'</span><span class="token punctuation">,</span>
                    <span class="token literal-property property">options</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                        <span class="token literal-property property">importLoaders</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
                        <span class="token literal-property property">modules</span><span class="token operator">:</span> <span class="token boolean">true</span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">}</span><span class="token punctuation">,</span>
                <span class="token string">'sass-loader'</span><span class="token punctuation">,</span>
                <span class="token string">'postcss-loader'</span>
            <span class="token punctuation">]</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
            <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.(woff|woff2|eot|ttf|otf)$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
            <span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token punctuation">[</span>
                <span class="token string">'file-loader'</span>
            <span class="token punctuation">]</span>
        <span class="token punctuation">}</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token keyword">new</span> <span class="token class-name">HtmlWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            <span class="token literal-property property">template</span><span class="token operator">:</span> <span class="token string">'src/index.html'</span> <span class="token comment">// ä»¥src/ç›®å½•ä¸‹çš„index.htmlä¸ºæ¨¡æ¿æ‰“åŒ…</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token keyword">new</span> <span class="token class-name">CleanWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            <span class="token comment">// ä¸éœ€è¦åšä»»ä½•çš„é…ç½®</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token literal-property property">output</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">'[name].js'</span><span class="token punctuation">,</span>
        <span class="token comment">// publicPath: "https://cdn.example.com/assets/",</span>
        <span class="token literal-property property">path</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'../dist'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> commonConfig
</code></pre></div><p><strong>webpack.dev.js</strong></p> <div class="language-js extra-class"><pre class="language-js"><code>
<span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> webpack <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'webpack'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span>merge<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'webpack-merge'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> commonConfig <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./webpack.common'</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> devConfig <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">mode</span><span class="token operator">:</span> <span class="token string">'development'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">devtool</span><span class="token operator">:</span> <span class="token string">'cheap-module-eval-source-map'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">devServer</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">contentBase</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">"dist"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token literal-property property">compress</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        <span class="token literal-property property">port</span><span class="token operator">:</span> <span class="token number">9000</span><span class="token punctuation">,</span>
        <span class="token literal-property property">open</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        <span class="token literal-property property">hot</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        <span class="token comment">// hotOnly: true,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>NamedModulesPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>HotModuleReplacementPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token literal-property property">optimization</span><span class="token operator">:</span><span class="token punctuation">{</span>
        <span class="token literal-property property">usedExports</span><span class="token operator">:</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token function">merge</span><span class="token punctuation">(</span>commonConfig<span class="token punctuation">,</span> devConfig<span class="token punctuation">)</span>
</code></pre></div><p><strong>webpack.prod.js</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token punctuation">{</span>merge<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'webpack-merge'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> commomConfig <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./webpack.common'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> prodConfig <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">mode</span><span class="token operator">:</span> <span class="token string">'production'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">devtool</span><span class="token operator">:</span> <span class="token string">'cheap-module-source-map'</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token function">merge</span><span class="token punctuation">(</span>commomConfig<span class="token punctuation">,</span> prodConfig<span class="token punctuation">)</span>
</code></pre></div><p>æ³¨æ„ï¼Œåœ¨ç¯å¢ƒç‰¹å®šçš„é…ç½®ä¸­ä½¿ç”¨ <code>merge()</code> å¾ˆå®¹æ˜“åœ°åŒ…å«æˆ‘ä»¬åœ¨ <code>dev</code> å’Œ <code>prod</code> ä¸­çš„å¸¸è§é…ç½®ã€‚<code>webpack-merge</code> å·¥å…·æä¾›äº†å¤šç§åˆå¹¶(merge)çš„é«˜çº§åŠŸèƒ½ï¼Œä½†æ˜¯åœ¨æˆ‘ä»¬çš„ç”¨ä¾‹ä¸­ï¼Œæ— éœ€ç”¨åˆ°è¿™äº›åŠŸèƒ½ã€‚</p> <h4 id="npm-scripts-2"><a href="#npm-scripts-2" class="header-anchor">#</a> NPM Scripts</h4> <p>ç°åœ¨ï¼Œæˆ‘ä»¬æŠŠ <code>scripts</code> é‡æ–°æŒ‡å‘åˆ°æ–°é…ç½®ã€‚æˆ‘ä»¬å°† <code>npm run dev</code> å®šä¹‰ä¸º<em>å¼€å‘ç¯å¢ƒ</em>è„šæœ¬ï¼Œå¹¶åœ¨å…¶ä¸­ä½¿ç”¨ <code>webpack-dev-server</code>ï¼Œå°† <code>npm run build</code> å®šä¹‰ä¸º<em>ç”Ÿäº§ç¯å¢ƒ</em>è„šæœ¬ï¼š</p> <div class="language- extra-class"><pre class="language-text"><code>  {
    "name": "webpack-demo",
    "scripts": {
    "dev": "webpack-dev-server --config ./build/webpack.dev.js",
    "build": "webpack --config ./build/webpack.prod.js",
    "start": "npx webpack --config ./build/webpack.dev.js"
  	},
  }
</code></pre></div><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œæˆ‘å°†ä¸‰ä¸ªæ–‡ä»¶æ”¾åœ¨äº†buildç›®å½•ä¸‹ï¼Œå½“ç„¶äº†ï¼Œåœ¨æ ¹ç›®å½•æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å°±æŠŠ<code>--config</code>åé¢çš„æŒ‡ä»¤è·¯å¾„ä¿®æ”¹å³å¯ã€‚</p> <p>è¿˜æœ‰ä¸€ä¸ªéœ€è¦æ³¨æ„çš„å°±æ˜¯<code>clean-webpack-plugin</code>è¿™ä¸ªæ’ä»¶çš„é…ç½®ï¼Œå½“ä½ æŠŠå®ƒéƒ½æ”¾è¿›buildç›®å½•ä¸‹ï¼Œæ­¤æ—¶çš„ç›¸å¯¹è¯¥æ’ä»¶çš„æ ¹ç›®å½•å°±æ˜¯buildï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦åšä¿®æ”¹ğŸ‘‡</p> <div class="language-js extra-class"><pre class="language-js"><code>		<span class="token keyword">new</span> <span class="token class-name">CleanWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            <span class="token comment">// ä¸éœ€è¦åšä»»ä½•çš„é…ç½®</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
</code></pre></div><p>æœ€æ–°çš„<code>clean-webpack-plugin</code>ï¼Œä¸éœ€è¦è®¾ç½®æ¸…é™¤ç›®å½•ï¼Œè‡ªåŠ¨æ¸…é™¤æ‰“åŒ…è·¯å¾„ï¼Œä¹Ÿå°±æ˜¯distç›®å½•ã€‚</p> <h3 id="splitchunkspluginä»£ç åˆ†éš”"><a href="#splitchunkspluginä»£ç åˆ†éš”" class="header-anchor">#</a> SplitChunksPluginä»£ç åˆ†éš”</h3> <p>å½“ä½ æœ‰å¤šä¸ªå…¥å£æ–‡ä»¶ï¼Œæˆ–è€…æ˜¯æ‰“åŒ…æ–‡ä»¶éœ€è¦åšä¸€ä¸ªåˆ’åˆ†ï¼Œä¸¾ä¸ªä¾‹å­ï¼Œæ¯”å¦‚ç¬¬ä¸‰æ–¹åº“lodashï¼Œjqueryç­‰åº“éœ€è¦æ‰“åŒ…åˆ°ä¸€ä¸ªç›®å½•ä¸‹ï¼Œè‡ªå·±çš„ä¸šåŠ¡é€»è¾‘ä»£ç éœ€è¦æ‰“åŒ…åˆ°ä¸€ä¸ªæ–‡ä»¶ä¸‹ï¼Œè¿™ä¸ªæ—¶å€™ï¼Œå°±éœ€è¦æå–å…¬å…±æ¨¡å—äº†ï¼Œä¹Ÿå°±éœ€è¦SplitChunksPluginè¿™ä¸ªæ’ä»¶ç™»åœºäº†ã€‚</p> <p>è¿™ä¸ªæ˜¯webpack4æ–°å¢åŠ çš„æ’ä»¶ï¼Œæˆ‘ä»¬éœ€è¦æ‰‹åŠ¨å»é…ç½®optimization.splitChunksã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°±æ¥çœ‹çœ‹å®ƒçš„åŸºæœ¬é…ç½®å§ğŸ‘‡</p> <div class="language-js extra-class"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  <span class="token literal-property property">optimization</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">splitChunks</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">chunks</span><span class="token operator">:</span> <span class="token string">"async"</span><span class="token punctuation">,</span>
        <span class="token literal-property property">minSize</span><span class="token operator">:</span> <span class="token number">30000</span><span class="token punctuation">,</span>
        <span class="token literal-property property">minChunks</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
        <span class="token literal-property property">maxAsyncRequests</span><span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">,</span>
        <span class="token literal-property property">maxInitialRequests</span><span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
        <span class="token literal-property property">automaticNameDelimiter</span><span class="token operator">:</span> <span class="token string">'~'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        <span class="token literal-property property">cacheGroups</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token literal-property property">vendors</span><span class="token operator">:</span> <span class="token punctuation">{</span> 
                <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">[\\/]node_modules[\\/]</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>  <span class="token comment">//åŒ¹é…node_modulesä¸­çš„æ¨¡å—</span>
                <span class="token literal-property property">priority</span><span class="token operator">:</span> <span class="token operator">-</span><span class="token number">10</span>   <span class="token comment">//ä¼˜å…ˆçº§,å½“æ¨¡å—åŒæ—¶å‘½ä¸­å¤šä¸ªç¼“å­˜ç»„çš„è§„åˆ™æ—¶ï¼Œåˆ†é…åˆ°ä¼˜å…ˆçº§é«˜çš„ç¼“å­˜ç»„</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token keyword">default</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                <span class="token literal-property property">minChunks</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token comment">//è¦†ç›–å¤–å±‚çš„å…¨å±€å±æ€§</span>
                <span class="token literal-property property">priority</span><span class="token operator">:</span> <span class="token operator">-</span><span class="token number">20</span><span class="token punctuation">,</span>
                <span class="token literal-property property">reuseExistingChunk</span><span class="token operator">:</span> <span class="token boolean">true</span>  <span class="token comment">//æ˜¯å¦å¤ç”¨å·²ç»ä»åŸä»£ç å—ä¸­åˆ†å‰²å‡ºæ¥çš„æ¨¡å—</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

</code></pre></div><p>é‚£æˆ‘ä»¬ä»æ¯ä¸ªå‚æ•°å¼€å§‹è¯´èµ·ğŸ‘‡</p> <ul><li>åœ¨cacheGroupså¤–å±‚çš„å±æ€§è®¾ç½®é€‚ç”¨äºæ‰€æœ‰çš„ç¼“å­˜ç»„ï¼Œä¸è¿‡æ¯ä¸ªç¼“å­˜ç»„å†…éƒ¨éƒ½å¯ä»¥<strong>é‡æ–°</strong>è®¾ç½®å®ƒä»¬çš„å€¼</li> <li><code>chunks: "async"</code> è¿™ä¸ªå±æ€§è®¾ç½®çš„æ˜¯ä»¥<strong>ä»€ä¹ˆç±»å‹</strong>çš„ä»£ç ç»è¡Œåˆ†éš”ï¼Œæœ‰ä¸‰ä¸ªå€¼
<ul><li><code>initial</code> å…¥å£ä»£ç å—</li> <li><code>all</code> å…¨éƒ¨</li> <li><code>async</code> æŒ‰éœ€åŠ è½½çš„ä»£ç å—</li></ul></li> <li><code>minSize: 30000</code> æ¨¡å—å¤§å°è¶…è¿‡30kbçš„æ¨¡å—æ‰ä¼šæå–</li> <li><code>minChunks: 1</code>, å½“æŸä¸ªæ¨¡å—è‡³å°‘è¢«å¤šå°‘ä¸ªæ¨¡å—å¼•ç”¨æ—¶ï¼Œæ‰ä¼šè¢«æå–æˆæ–°çš„chunk</li> <li><code>maxAsyncRequests: 5</code>,åˆ†å‰²åï¼ŒæŒ‰éœ€åŠ è½½çš„ä»£ç å—æœ€å¤šå…è®¸çš„å¹¶è¡Œè¯·æ±‚æ•°</li> <li><code>maxInitialRequests: 3Â·</code> åˆ†å‰²åï¼Œå…¥å£ä»£ç å—æœ€å¤šå…è®¸çš„å¹¶è¡Œè¯·æ±‚æ•°</li> <li><code>automaticNameDelimiter: "~"</code>ä»£ç å—å‘½ååˆ†å‰²ç¬¦</li> <li><code>name: true,</code>æ¯ä¸ªç¼“å­˜ç»„æ‰“åŒ…å¾—åˆ°çš„ä»£ç å—çš„åç§°</li> <li><code>cacheGroups</code> ç¼“å­˜ç»„ï¼Œå®šåˆ¶ç›¸åº”çš„è§„åˆ™ã€‚</li></ul> <p>è‡ªå·±æ ¹æ®å®é™…æƒ…å†µå»è®¾ç½®ç›¸åº”çš„è§„åˆ™ï¼Œæ¯ä¸ªç¼“å­˜ç»„æ ¹æ®è§„åˆ™å°†åŒ¹é…çš„æ¨¡å—ä¼šåˆ†é…åˆ°ä»£ç å—ï¼ˆchunkï¼‰ä¸­ï¼Œæ¯ä¸ªç¼“å­˜ç»„çš„æ‰“åŒ…ç»“æœå¯ä»¥æ˜¯å•ä¸€ chunkï¼Œä¹Ÿå¯ä»¥æ˜¯å¤šä¸ª chunkã€‚</p> <p>è¿™é‡Œæœ‰ç¯‡å®é™…é¡¹ç›®ä¸­å¦‚ä½•ä»£ç åˆ†éš”çš„ï¼Œæœ‰å…´è¶£çš„å¯ä»¥çœ‹çœ‹<a href="https://juejin.im/post/6844904183917871117#comment" target="_blank" rel="noopener noreferrer">SplitChunkä»£ç å®ä¾‹<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h3 id="lazy-lodingæ‡’åŠ è½½å’Œchunk"><a href="#lazy-lodingæ‡’åŠ è½½å’Œchunk" class="header-anchor">#</a> Lazy-lodingæ‡’åŠ è½½å’ŒChunk</h3> <h4 id="importå¼‚æ­¥åŠ è½½æ¨¡å—"><a href="#importå¼‚æ­¥åŠ è½½æ¨¡å—" class="header-anchor">#</a> importå¼‚æ­¥åŠ è½½æ¨¡å—</h4> <p>åœ¨webpackä¸­ï¼Œä»€ä¹ˆæ˜¯æ‡’åŠ è½½ï¼Œä¸¾ä¸ªä¾‹å­ï¼Œå½“æˆ‘éœ€è¦æŒ‰éœ€å¼•å…¥æŸä¸ªæ¨¡å—æ—¶ï¼Œè¿™ä¸ªæ—¶å€™ï¼Œæˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨æ‡’åŠ è½½ï¼Œå…¶å®å®ç°çš„æ–¹æ¡ˆå°±æ˜¯importè¯­æ³•ï¼Œåœ¨è¾¾åˆ°æŸä¸ªæ¡ä»¶æ—¶ï¼Œæˆ‘ä»¬æ‰ä¼šå»è¯·æ±‚èµ„æºã€‚</p> <p>é‚£ä¹ˆæˆ‘ä»¬æ¥çœ‹çœ‹ï¼Œå¦‚ä½•å®ç°æ‡’åŠ è½½ğŸ‘‡</p> <p>åœ¨è®²è¿™ä¸ªä¹‹å‰ï¼Œæˆ‘ä»¬çš„å…ˆå€ŸåŠ©ä¸€ä¸ªæ’ä»¶ï¼Œå®Œæˆå¯¹importè¯­æ³•çš„è¯†åˆ«ã€‚</p> <div class="language-bash extra-class"><pre class="language-bash"><code>cnpm <span class="token function">install</span> --save-dev @babel/plugin-syntax-dynamic-import
</code></pre></div><p>ç„¶åå†<code>.babelrc</code>æ–‡ä»¶ä¸‹é…ç½®ï¼Œå¢åŠ ä¸€ä¸ªæ’ä»¶</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">"plugins"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"@babel/plugin-syntax-dynamic-import"</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><p>è¿™æ ·å­çš„è¯ï¼Œæˆ‘ä»¬å°±å¯ä»¥é¡¹ç›®ä¸­è‡ªç”±çš„ä½¿ç”¨importæŒ‰éœ€åŠ è½½æ¨¡å—äº†ã€‚</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// create.js</span>
<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span>
        <span class="token keyword">default</span><span class="token operator">:</span> _
    <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token comment">/*webpackChunkName:"lodash"*/</span><span class="token string">'lodash'</span><span class="token punctuation">)</span>
    <span class="token keyword">let</span> element <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">)</span>
    element<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> _<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'TianTian'</span><span class="token punctuation">,</span> <span class="token string">'lee'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">'-'</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> element
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">demo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    document<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">element</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>element<span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> demo<span class="token punctuation">;</span>
</code></pre></div><p>æˆ‘è¿™ä¸ªæ¨¡å—çš„åŠŸèƒ½ï¼Œå°±æ˜¯å½“ä½ ç‚¹å‡»é¡µé¢åï¼Œä¼šè§¦å‘createå‡½æ•°ï¼Œç„¶ååŠ è½½loadshåº“ï¼Œæœ€åå†é¡µé¢ä¸­æ‡’åŠ è½½lodashï¼Œæ‰“åŒ…æ˜¯æ­£å¸¸æ‰“åŒ…ï¼Œä½†æ˜¯å‘¢ï¼Œæœ‰äº›èµ„æºï¼Œå¯ä»¥å½“ä½ è§¦å‘æŸäº›æ¡ä»¶ï¼Œå†å»åŠ è½½ï¼Œè¿™ä¹Ÿç®—æ˜¯ä¼˜åŒ–æ‰‹æ®µå§ã€‚</p> <h4 id="chunk"><a href="#chunk" class="header-anchor">#</a> Chunk</h4> <p>Chunkåœ¨Webpacké‡ŒæŒ‡ä¸€ä¸ªä»£ç å—ï¼Œé‚£å…·ä½“æ˜¯æŒ‡ä»€ä¹ˆæ ·çš„ä»£ç å—å‘¢ï¼ŸğŸ‘‡</p> <p>Chunkæ˜¯Webpackæ‰“åŒ…è¿‡ç¨‹ä¸­ï¼Œä¸€å †moduleçš„é›†åˆã€‚Webpacké€šè¿‡å¼•ç”¨å…³ç³»é€ä¸ªæ‰“åŒ…æ¨¡å—ï¼Œè¿™äº›moduleå°±å½¢æˆäº†ä¸€ä¸ªChunkã€‚</p> <p><strong>äº§ç”ŸChunkçš„ä¸‰ç§é€”å¾„</strong></p> <ul><li>entryå…¥å£</li> <li>å¼‚æ­¥åŠ è½½æ¨¡å—</li> <li>ä»£ç åˆ†å‰²ï¼ˆcode splitingï¼‰</li></ul> <p>Chunkåªæ˜¯ä¸€ä¸ªæ¦‚å¿µï¼Œç†è§£äº†Chunkæ¦‚å¿µï¼Œæ›´æœ‰åˆ©äºå¯¹webpackæœ‰ä¸€å®šçš„è®¤è¯†ã€‚</p> <h3 id="cssä»£ç å‹ç¼©æå–"><a href="#cssä»£ç å‹ç¼©æå–" class="header-anchor">#</a> CSSä»£ç å‹ç¼©æå–</h3> <p>åœ¨çº¿ä¸Šçš„ç¯å¢ƒä¸­ï¼Œæˆ‘ä»¬éœ€è¦å»å°†æˆ‘ä»¬çš„CSSæ–‡ä»¶å•ç‹¬çš„æ‰“åŒ…åˆ°ä¸€ä¸ªChunkä¸‹ï¼Œæ‰€ä»¥éœ€è¦å€ŸåŠ©ä¸€å®šçš„æ’ä»¶ï¼Œå®Œæˆè¿™ä¸ªå·¥ä½œã€‚</p> <h4 id="mini-css-extract-plugin-cssä»£ç æå–"><a href="#mini-css-extract-plugin-cssä»£ç æå–" class="header-anchor">#</a> <a href="https://github.com/webpack-contrib/mini-css-extract-plugin" target="_blank" rel="noopener noreferrer">mini-css-extract-plugin<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> cssä»£ç æå–</h4> <p>å°†cssæå–ä¸ºç‹¬ç«‹çš„æ–‡ä»¶æ’ä»¶ï¼Œæ”¯æŒæŒ‰éœ€åŠ è½½çš„csså’ŒsourceMap,æˆ‘ä»¬å¯ä»¥æŸ¥çœ‹GitHubå®˜æ–¹ï¼Œæ¥çœ‹çœ‹å®ƒçš„<a href="https://github.com/webpack-contrib/mini-css-extract-plugin" target="_blank" rel="noopener noreferrer">æ–‡æ¡£<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>**ç›®å‰ç¼ºå¤±åŠŸèƒ½ï¼ŒHMRã€‚**æ‰€ä»¥ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠå®ƒè¿ç”¨åˆ°ç”Ÿæˆç¯å¢ƒä¸­å»ï¼Œå¼€å§‹å®‰è£…ğŸ‘‡</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">npm</span> <span class="token function">install</span> --save-dev mini-css-extract-plugin
</code></pre></div><p>å¯¹ç€è¿™ä¸ªæ’ä»¶çš„ä½¿ç”¨ï¼Œè¿˜æ˜¯å»ºè®®åœ¨webpack.prod.jsä¸­(ç”Ÿäº§ç¯å¢ƒ)é…ç½®ï¼Œè¿™ä¸ªæ’ä»¶æš‚æ—¶æš‚æ—¶ä¸æ”¯æŒHMRï¼Œè€Œä¸”åœ¨å¼€å‘ç¯å¢ƒä¸­developmentï¼Œæ˜¯éœ€è¦ç”¨åˆ°HMRçš„ï¼Œæ‰€ä»¥æˆ‘ä»¬è¿™æ¬¡é…ç½®åªåœ¨webpack.prod.jsé…ç½®ã€‚</p> <p>éœ€è¦æ³¨æ„çš„ä¸€ç‚¹æ˜¯ï¼Œå½“ä½ çš„webpackç‰ˆæœ¬æ˜¯4ç‰ˆæœ¬çš„æ—¶å€™ï¼Œéœ€è¦å»package.jsonä¸­é…ç½®<code>sideEffects</code>å±æ€§ï¼Œè¿™æ ·å­å°±<strong>é¿å…äº†æŠŠcssæ–‡ä»¶ä½œä¸ºTree-shaking</strong>ã€‚</p> <div class="language- extra-class"><pre class="language-text"><code>{
  "name": "webpack-demo",
  "sideEffects": [
  	"*.css"
  ]
}
</code></pre></div><p>ç„¶åçš„è¯ï¼Œæˆ‘ä»¬çœ‹çœ‹webpack.prod.jsæ˜¯å¦‚ä½•é…ç½®å‚æ•°çš„ã€‚</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> MiniCssExtractPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'mini-css-extract-plugin'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span>
    merge
<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'webpack-merge'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> commomConfig <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./webpack.common'</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> prodConfig <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">mode</span><span class="token operator">:</span> <span class="token string">'production'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">devtool</span><span class="token operator">:</span> <span class="token string">'cheap-module-source-map'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token keyword">new</span> <span class="token class-name">MiniCssExtractPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            <span class="token literal-property property">filename</span><span class="token operator">:</span><span class="token string">'[name].[hash].css'</span><span class="token punctuation">,</span>
            <span class="token literal-property property">chunkFilename</span><span class="token operator">:</span> <span class="token string">'[id].[hash].css'</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token literal-property property">module</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">rules</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
            <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.(sa|sc|c)ss$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
            <span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token punctuation">[</span>
                MiniCssExtractPlugin<span class="token punctuation">.</span>loader<span class="token punctuation">,</span>
                <span class="token string">'css-loader'</span><span class="token punctuation">,</span>
                <span class="token string">'postcss-loader'</span><span class="token punctuation">,</span>
                <span class="token string">'sass-loader'</span><span class="token punctuation">,</span>
            <span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token function">merge</span><span class="token punctuation">(</span>commomConfig<span class="token punctuation">,</span> prodConfig<span class="token punctuation">)</span>
</code></pre></div><p>å½“ä½ åœ¨jsä¸­å¼•å…¥cssæ¨¡å—æ—¶ï¼Œæœ€ååœ¨distç›®å½•ä¸‹ï¼Œçœ‹åˆ°äº†csså•ç‹¬çš„Chunkçš„è¯ï¼Œè¯´æ˜cssä»£ç æå–æˆåŠŸäº†ï¼Œæ¥ä¸‹æ¥å°±æ˜¯å¯¹<strong>cssä»£ç çš„å‹ç¼©</strong>ã€‚</p> <p>webpack4é»˜è®¤åœ¨ç”Ÿäº§ç¯å¢ƒä¸‹ï¼Œæ˜¯ä¸ä¼šå»å‹ç¼©cssä»£ç çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦ä¸‹è½½å¯¹äºçš„plugin</p> <h4 id="optimize-css-assets-webpack-plugin-cssä»£ç å‹ç¼©"><a href="#optimize-css-assets-webpack-plugin-cssä»£ç å‹ç¼©" class="header-anchor">#</a> <a href="https://github.com/NMFR/optimize-css-assets-webpack-plugin" target="_blank" rel="noopener noreferrer">optimize-css-assets-webpack-plugin<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> cssä»£ç å‹ç¼©</h4> <p><a href="https://github.com/NMFR/optimize-css-assets-webpack-plugin" target="_blank" rel="noopener noreferrer">optimize-css-assets-webpack-plugin<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> GitHubå®˜æ–¹æ–‡æ¡£</p> <p>è¿™ä¸ªä¼šå¯¹æ‰“åŒ…åçš„cssä»£ç ç»è¡Œä»£ç å‹ç¼©ï¼Œæˆ‘ä»¬ä¸‹è½½è¿™ä¸ªåŒ…ğŸ‘‡</p> <div class="language- extra-class"><pre class="language-text"><code>npm install --save-dev optimize-css-assets-webpack-plugin
</code></pre></div><p>æ¥ä¸‹æ¥å°±æ˜¯è®¾ç½® <strong>optimization.minimizer</strong> ï¼Œè¿™é‡Œéœ€è¦æ³¨æ„çš„å°±æ˜¯ï¼Œæ­¤æ—¶è®¾ç½®optimization.minimizerä¼šè¦†ç›–webpacké»˜è®¤æä¾›çš„è§„åˆ™ï¼Œæ¯”å¦‚<strong>JSä»£ç å°±ä¸ä¼šå†å»å‹ç¼©äº†</strong>ã€‚</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> MiniCssExtractPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'mini-css-extract-plugin'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> OptimizeCSSAssetsPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'optimize-css-assets-webpack-plugin'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> UglifyJsPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'uglifyjs-webpack-plugin'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span>
    merge
<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'webpack-merge'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> commomConfig <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./webpack.common'</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> prodConfig <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">mode</span><span class="token operator">:</span> <span class="token string">'production'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">devtool</span><span class="token operator">:</span> <span class="token string">'cheap-module-source-map'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">optimization</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">minimizer</span><span class="token operator">:</span> <span class="token punctuation">[</span>
            <span class="token keyword">new</span> <span class="token class-name">UglifyJsPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
                <span class="token literal-property property">sourceMap</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
                <span class="token literal-property property">parallel</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// å¯ç”¨å¤šçº¿ç¨‹å¹¶è¡Œè¿è¡Œæé«˜ç¼–è¯‘é€Ÿåº¦</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token keyword">new</span> <span class="token class-name">OptimizeCSSAssetsPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token keyword">new</span> <span class="token class-name">MiniCssExtractPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            <span class="token comment">// ç±»ä¼¼ webpackOptions.outputé‡Œé¢çš„é…ç½® å¯ä»¥å¿½ç•¥</span>
            <span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">'[name].[hash].css'</span><span class="token punctuation">,</span>
            <span class="token literal-property property">chunkFilename</span><span class="token operator">:</span> <span class="token string">'[id].[hash].css'</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token literal-property property">module</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">rules</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
            <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.(sa|sc|c)ss$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
            <span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
                    <span class="token literal-property property">loader</span><span class="token operator">:</span> MiniCssExtractPlugin<span class="token punctuation">.</span>loader<span class="token punctuation">,</span>
                    <span class="token literal-property property">options</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                        <span class="token comment">// è¿™é‡Œå¯ä»¥æŒ‡å®šä¸€ä¸ª publicPath</span>
                        <span class="token comment">// é»˜è®¤ä½¿ç”¨ webpackOptions.outputä¸­çš„publicPathcss</span>
                        <span class="token comment">// ä¸¾ä¸ªä¾‹å­,åå°æ”¯æŒæŠŠcssä»£ç å—æ”¾å…¥cdn</span>
                        <span class="token literal-property property">publicPath</span><span class="token operator">:</span> <span class="token string">"https://cdn.example.com/css/"</span>
                    <span class="token punctuation">}</span><span class="token punctuation">,</span>
                <span class="token punctuation">}</span><span class="token punctuation">,</span>
                <span class="token string">'css-loader'</span><span class="token punctuation">,</span>
                <span class="token string">'postcss-loader'</span><span class="token punctuation">,</span>
                <span class="token string">'sass-loader'</span><span class="token punctuation">,</span>
            <span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>

<span class="token punctuation">}</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token function">merge</span><span class="token punctuation">(</span>commomConfig<span class="token punctuation">,</span> prodConfig<span class="token punctuation">)</span>
</code></pre></div><p>ä½†æ˜¯å‘¢ï¼Œæ­¤æ—¶å°±ä¼šå‘ç°åœ¨ç”Ÿäº§ç¯å¢ƒä¸‹ï¼ŒJSå‹ç¼©ä¹Ÿä¼šå­˜åœ¨é—®é¢˜ï¼Œæ‰€ä»¥ä¸ºäº†è§£å†³é—®é¢˜ï¼Œæˆ‘ä»¬ç»Ÿä¸€åœ¨ä¸‹é¢æ¢³ç†ğŸ‘‡</p> <h3 id="uglifyjs-webpack-pluginä»£ç å‹ç¼©"><a href="#uglifyjs-webpack-pluginä»£ç å‹ç¼©" class="header-anchor">#</a> uglifyjs-webpack-pluginä»£ç å‹ç¼©</h3> <p>è¿™ä¸ªæ’ä»¶è§£å†³çš„é—®é¢˜ï¼Œå°±æ˜¯å½“ä½ éœ€è¦å»optimization.minimizerä¸­è®¾ç½®ï¼Œè¿™æ ·å­ä¼šè¦†ç›–<strong>webpackåŸºæœ¬é…ç½®</strong>ï¼ŒåŸæœ¬JSä»£ç å‹ç¼©çš„åŠŸèƒ½å°±ä¼šè¢«è¦†ç›–ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦ä¸‹è½½å®ƒã€‚</p> <div class="language- extra-class"><pre class="language-text"><code>npm install -D uglifyjs-webpack-plugin
</code></pre></div><p>ç„¶ååœ¨webpack.prod.jsé…ç½®å¦‚ä¸Šä¿¡æ¯å³å¯ï¼Œå®ƒçš„æ›´å¤šé…ç½®çœ‹<a href="https://github.com/webpack-contrib/uglifyjs-webpack-plugin" target="_blank" rel="noopener noreferrer">å®˜ç½‘æ–‡æ¡£<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> MiniCssExtractPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'mini-css-extract-plugin'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> OptimizeCSSAssetsPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'optimize-css-assets-webpack-plugin'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> UglifyJsPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'uglifyjs-webpack-plugin'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span>
    merge
<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'webpack-merge'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> commonConfig <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./webpack.common'</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> prodConfig <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">mode</span><span class="token operator">:</span> <span class="token string">'production'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">devtool</span><span class="token operator">:</span> <span class="token string">'cheap-module-source-map'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">optimization</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">minimizer</span><span class="token operator">:</span> <span class="token punctuation">[</span>
            <span class="token keyword">new</span> <span class="token class-name">UglifyJsPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
                <span class="token literal-property property">sourceMap</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
                <span class="token literal-property property">parallel</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>  <span class="token comment">// å¯ç”¨å¤šçº¿ç¨‹å¹¶è¡Œè¿è¡Œæé«˜ç¼–è¯‘é€Ÿåº¦</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token keyword">new</span> <span class="token class-name">OptimizeCSSAssetsPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token keyword">new</span> <span class="token class-name">MiniCssExtractPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            <span class="token comment">// ç±»ä¼¼ webpackOptions.outputé‡Œé¢çš„é…ç½® å¯ä»¥å¿½ç•¥</span>
            <span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">'[name].[hash].css'</span><span class="token punctuation">,</span>
            <span class="token literal-property property">chunkFilename</span><span class="token operator">:</span> <span class="token string">'[id].[hash].css'</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token literal-property property">module</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">rules</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
            <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.(sa|sc|c)ss$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
            <span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
                    <span class="token literal-property property">loader</span><span class="token operator">:</span> MiniCssExtractPlugin<span class="token punctuation">.</span>loader<span class="token punctuation">,</span>
                    <span class="token literal-property property">options</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                        <span class="token comment">// è¿™é‡Œå¯ä»¥æŒ‡å®šä¸€ä¸ª publicPath</span>
                        <span class="token comment">// é»˜è®¤ä½¿ç”¨ webpackOptions.outputä¸­çš„publicPathcss</span>
                        <span class="token comment">// ä¸¾ä¸ªä¾‹å­,åå°æ”¯æŒæŠŠcssä»£ç å—æ”¾å…¥cdn</span>
                        <span class="token literal-property property">publicPath</span><span class="token operator">:</span> <span class="token string">"https://cdn.example.com/css/"</span>
                    <span class="token punctuation">}</span><span class="token punctuation">,</span>
                <span class="token punctuation">}</span><span class="token punctuation">,</span>
                <span class="token string">'css-loader'</span><span class="token punctuation">,</span>
                <span class="token string">'postcss-loader'</span><span class="token punctuation">,</span>
                <span class="token string">'sass-loader'</span><span class="token punctuation">,</span>
            <span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>

<span class="token punctuation">}</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token function">merge</span><span class="token punctuation">(</span>commonConfig<span class="token punctuation">,</span> prodConfig<span class="token punctuation">)</span>
</code></pre></div><p>å¯¹äºå¼€å‘è€…ç¯å¢ƒè€Œè¨€ï¼Œå¯¹cssä»£ç æå–ï¼Œä»¥åŠæ‰“åŒ…æ˜¯æ²¡æœ‰æ„ä¹‰çš„ï¼Œç»Ÿä¸€å¯¹äºjsä»£ç å‹ç¼©ï¼Œä¹Ÿä¼šé™ä½æ•ˆç‡ï¼Œä¹Ÿæ˜¯ä¸æ¨èè¿™ä¹ˆå»åšçš„ï¼Œæ‰€ä»¥æˆ‘ä»¬å°±è·³è¿‡åœ¨å¼€å‘ç¯å¢ƒä¸­å¯¹å®ƒä»¬çš„é…ç½®ã€‚</p> <h3 id="contenthashè§£å†³æµè§ˆå™¨ç¼“å­˜"><a href="#contenthashè§£å†³æµè§ˆå™¨ç¼“å­˜" class="header-anchor">#</a> contenthashè§£å†³æµè§ˆå™¨ç¼“å­˜</h3> <p>å½“ä½ æ‰“åŒ…ä¸€ä¸ªé¡¹ç›®å³å°†ä¸Šçº¿æ—¶ï¼Œæœ‰ä¸€ä¸ªéœ€æ±‚ï¼Œä½ åªæ˜¯ä¿®æ”¹äº†éƒ¨åˆ†çš„æ–‡ä»¶ï¼Œåªå¸Œæœ›ç”¨æˆ·å¯¹äºå…¶ä»–çš„æ–‡ä»¶ï¼Œä¾æ—§å»é‡‡ç”¨æµè§ˆå™¨ç¼“å­˜ä¸­çš„æ–‡ä»¶ï¼Œæ‰€ä»¥è¿™ä¸ªæ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦ç”¨åˆ°<code>contenthash</code>ã€‚</p> <p>webpackä¸­å…³äºhashï¼Œæœ‰ä¸‰ç§ï¼Œåˆ†åˆ«æ˜¯ğŸ‘‡</p> <h4 id="hash"><a href="#hash" class="header-anchor">#</a> hash</h4> <p>hashï¼Œä¸»è¦ç”¨äºå¼€å‘ç¯å¢ƒä¸­ï¼Œåœ¨æ„å»ºçš„è¿‡ç¨‹ä¸­ï¼Œå½“ä½ çš„é¡¹ç›®æœ‰ä¸€ä¸ªæ–‡ä»¶å‘ç°äº†æ”¹å˜ï¼Œæ•´ä¸ªé¡¹ç›®çš„hashå€¼å°±ä¼šåšä¿®æ”¹(æ•´ä¸ªé¡¹ç›®çš„hashå€¼æ˜¯ä¸€æ ·çš„)ï¼Œè¿™æ ·å­ï¼Œæ¯æ¬¡æ›´æ–°ï¼Œæ–‡ä»¶éƒ½ä¸ä¼šè®©æµè§ˆå™¨ç¼“å­˜æ–‡ä»¶ï¼Œä¿è¯äº†æ–‡ä»¶çš„æ›´æ–°ç‡ï¼Œæé«˜å¼€å‘æ•ˆç‡ã€‚</p> <h4 id="chunkhash"><a href="#chunkhash" class="header-anchor">#</a> chunkhash</h4> <p>è·Ÿæ‰“åŒ…çš„chunkæœ‰å…³ï¼Œå…·ä½“æ¥è¯´<code>webpack</code>æ˜¯æ ¹æ®å…¥å£<code>entry</code>é…ç½®æ–‡ä»¶æ¥åˆ†æå…¶ä¾èµ–é¡¹å¹¶ç”±æ­¤æ¥æ„å»ºè¯¥<code>entryçš„chunk</code>ï¼Œå¹¶ç”Ÿæˆå¯¹åº”çš„<code>hash</code>å€¼ã€‚ä¸åŒçš„<code>chunk</code>ä¼šæœ‰ä¸åŒçš„<code>hash</code>å€¼ã€‚</p> <p>åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œæˆ‘ä»¬ä¼šæŠŠç¬¬ä¸‰æ–¹æˆ–è€…å…¬ç”¨ç±»åº“è¿›è¡Œå•ç‹¬æ‰“åŒ…ï¼Œæ‰€ä»¥ä¸æ”¹åŠ¨å…¬å…±åº“çš„ä»£ç ï¼Œè¯¥<code>chunk</code>çš„<code>hash</code>å°±ä¸ä¼šå˜ï¼Œå¯ä»¥åˆç†çš„ä½¿ç”¨æµè§ˆå™¨ç¼“å­˜äº†ã€‚</p> <p>ä½†æ˜¯è¿™ä¸ªä¸­hashçš„æ–¹æ³•å…¶å®æ˜¯å­˜åœ¨é—®é¢˜çš„ï¼Œç”Ÿäº§ç¯å¢ƒä¸­æˆ‘ä»¬ä¼šç”¨<code>webpack</code>çš„æ’ä»¶ï¼Œå°†<code>css</code>ä»£ç æ‰“å•ç‹¬æå–å‡ºæ¥æ‰“åŒ…ã€‚è¿™æ—¶å€™<code>chunkhash</code>çš„æ–¹å¼å°±ä¸å¤Ÿçµæ´»ï¼Œå› ä¸ºåªè¦åŒä¸€ä¸ª<code>chunk</code>é‡Œé¢çš„jsä¿®æ”¹åï¼Œ<code>css</code>çš„<code>chunk</code>çš„<code>hash</code>ä¹Ÿä¼šè·Ÿéšç€æ”¹åŠ¨ã€‚å› æ­¤æˆ‘ä»¬éœ€è¦<code>contenthash</code>ã€‚</p> <h4 id="contenthash"><a href="#contenthash" class="header-anchor">#</a> contenthash</h4> <p><code>contenthash</code>è¡¨ç¤ºç”±æ–‡ä»¶å†…å®¹äº§ç”Ÿçš„<code>hash</code>å€¼ï¼Œå†…å®¹ä¸åŒäº§ç”Ÿçš„<code>contenthash</code>å€¼ä¹Ÿä¸ä¸€æ ·ã€‚ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œé€šå¸¸åšæ³•æ˜¯æŠŠé¡¹ç›®ä¸­<code>css</code>éƒ½æŠ½ç¦»å‡ºå¯¹åº”çš„<code>css</code>æ–‡ä»¶æ¥åŠ ä»¥å¼•ç”¨ã€‚</p> <p>å¯¹äºwebpackï¼Œæ—§ç‰ˆæœ¬è€Œè¨€ï¼Œå³ä¾¿æ¯æ¬¡ä½ npm run buildï¼Œ<strong>å†…å®¹ä¸åšä¿®æ”¹çš„è¯ï¼Œcontenthashå€¼è¿˜æ˜¯ä¼šæœ‰æ‰€æ”¹å˜</strong>ï¼Œè¿™ä¸ªæ˜¯å› ä¸ºï¼Œå½“ä½ åœ¨æ¨¡å—ä¹‹é—´å­˜åœ¨ç›¸äº’ä¹‹é—´çš„å¼•ç”¨å…³ç³»ï¼Œæœ‰ä¸€ä¸ª<strong>manifestæ–‡ä»¶</strong>ã€‚</p> <blockquote><p>manifestæ–‡ä»¶æ˜¯ç”¨æ¥å¼•å¯¼æ‰€ä»¥æ¨¡å—çš„äº¤äº’ï¼Œmanifestæ–‡ä»¶åŒ…å«äº†åŠ è½½å’Œå¤„ç†æ¨¡å—çš„é€»è¾‘ï¼Œä¸¾ä¸ªä¾‹å­ï¼Œä½ çš„ç¬¬ä¸‰æ–¹åº“æ‰“åŒ…åçš„æ–‡ä»¶ï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸ºvendorsï¼Œä½ çš„é€»è¾‘ä»£ç ç§°ä¸ºmainï¼Œå½“ä½ webpackç”Ÿæˆä¸€ä¸ªbundleæ—¶ï¼Œå®ƒåŒæ—¶ä¼šå»ç»´æŠ¤ä¸€ä¸ªmanifestæ–‡ä»¶ï¼Œä½ å¯ä»¥ç†è§£æˆæ¯ä¸ªbundleæ–‡ä»¶å­˜åœ¨è¿™é‡Œä¿¡æ¯ï¼Œæ‰€ä»¥æ¯ä¸ªbundleä¹‹é—´çš„manifestä¿¡æ¯æœ‰ä¸åŒï¼Œè¿™æ ·å­æˆ‘ä»¬å°±éœ€è¦å°†manifestæ–‡ä»¶ç»™æå–å‡ºæ¥ã€‚</p></blockquote> <p>è¿™ä¸ªæ—¶å€™ï¼Œéœ€è¦åœ¨<strong>optimization</strong>ä¸­å¢åŠ ä¸€ä¸ªé…ç½®ğŸ‘‡</p> <div class="language-js extra-class"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">optimization</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">splitChunks</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token comment">// ...</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">runtimeChunk</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token comment">// è§£å†³çš„é—®é¢˜æ˜¯è€ç‰ˆæœ¬ä¸­å†…å®¹ä¸å‘ç”Ÿæ”¹å˜çš„è¯,contenthashä¾æ—§ä¼šå‘ç”Ÿæ”¹å˜</span>
      <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'manifest'</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>å½“ç„¶äº†ï¼Œè¦æ˜¯è¿˜æ²¡æ¥ç†è§£çš„è¯ï¼Œå¯ä»¥å»webpackå®˜æ–¹ç½‘ç«™ï¼Œçœ‹çœ‹manifestå®šä¹‰ä»¥åŠå®ƒçš„å«ä¹‰ã€‚</p> <p>è¯´å®Œäº†è¿™ä¸ªï¼Œæˆ‘ä»¬çœ‹çœ‹æˆ‘ä»¬åº”è¯¥å¦‚ä½•å»é…ç½®outputå§ï¼Œæˆ‘ä»¬å…ˆçœ‹ä¸‹webpack.prod.jsé…ç½®</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token literal-property property">output</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">'[name].[contenthash].js'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">chunkFilename</span><span class="token operator">:</span><span class="token string">'[vendors].[contenthash].js'</span><span class="token punctuation">,</span>
        <span class="token comment">// publicPath: "https://cdn.example.com/assets/",</span>
        <span class="token literal-property property">path</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'../dist'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
</code></pre></div><p>å¯¹äºçš„webpack.dev.jsä¸­åªéœ€è¦å°†contenthashæ”¹ä¸ºhashå°±è¡Œï¼Œè¿™æ ·å­å¼€å‘çš„æ—¶å€™ï¼Œæé«˜å¼€å‘æ•ˆç‡ã€‚</p> <h3 id="shimming-å…¨å±€å˜é‡"><a href="#shimming-å…¨å±€å˜é‡" class="header-anchor">#</a> shimming å…¨å±€å˜é‡</h3> <p>ç®€å•ç¿»è¯‘å°±æ˜¯<code>å«ç‰‡</code>ï¼Œå®ƒè§£å†³çš„åœºæ™¯æœ‰å“ªäº›å‘¢ï¼Œä¸¾ä¸ªä¾‹å­ï¼Œå½“ä½ å†ä½¿ç”¨ç¬¬ä¸‰æ–¹åº“ï¼Œæ­¤æ—¶éœ€è¦å¼•å…¥å®ƒï¼Œåˆæˆ–è€…æ˜¯ä½ æœ‰å¾ˆå¤šçš„ç¬¬ä¸‰æ–¹åº“æˆ–è€…æ˜¯è‡ªå·±å†™çš„åº“ï¼Œæ¯ä¸ªjsæ–‡ä»¶éƒ½éœ€è¦ä¾èµ–å®ƒï¼Œè®©äººå¾ˆç¹çï¼Œè¿™ä¸ªæ—¶å€™ï¼Œshimmingå°±æ´¾ä¸Šç”¨åœºäº†ã€‚</p> <p>æˆ‘ä»¬éœ€è¦ä½¿ç”¨ <code>ProvidePlugin</code> æ’ä»¶ï¼Œè¿™ä¸ªwebpackæ˜¯å†…ç½®çš„ï¼Œshimmingä¾èµ–çš„å°±æ˜¯è¿™ä¸ªæ’ä»¶ã€‚</p> <p>ä½¿ç”¨ <a href="https://www.webpackjs.com/plugins/provide-plugin" target="_blank" rel="noopener noreferrer"><code>ProvidePlugin</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> åï¼Œèƒ½å¤Ÿåœ¨é€šè¿‡ webpack ç¼–è¯‘çš„æ¯ä¸ªæ¨¡å—ä¸­ï¼Œé€šè¿‡è®¿é—®ä¸€ä¸ªå˜é‡æ¥è·å–åˆ° package åŒ…ã€‚</p> <p>å¢åŠ ä¸€ä¸ªPluginé…ç½®ğŸ‘‡</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>ProvidePlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
			<span class="token comment">// è¿™é‡Œè®¾ç½®çš„å°±æ˜¯ä½ ç›¸åº”çš„è§„åˆ™äº†</span>
			<span class="token comment">// ç­‰ä»·äºåœ¨ä½ ä½¿ç”¨lodashæ¨¡å—ä¸­è¯­å¥ğŸ‘‡</span>
			<span class="token comment">// import _ from 'lodash'</span>
            <span class="token literal-property property">_</span><span class="token operator">:</span> <span class="token string">'lodash'</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>ä¸¾ä¸ªä¾‹å­ğŸ‘‡</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// array_add.js</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">Arr_add</span> <span class="token operator">=</span> <span class="token parameter">arr</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    <span class="token keyword">let</span> str <span class="token operator">=</span> _<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span><span class="token string">'++'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> str<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>è¿™æ ·å­æ²¡æœ‰æ­£å¸¸å¯¼å…¥lodashåº“çš„è¯ï¼Œæ˜¯ä¼šæŠ¥é”™çš„ï¼Œä½†æ˜¯æˆ‘ä»¬ä½¿ç”¨äº†ProvidePluginæ’ä»¶ï¼Œä½¿å¾—å®ƒä¼šæä¾›ç›¸åº”çš„lodashåŒ…ï¼Œæ³¨æ„åˆ°çš„å°±æ˜¯ï¼Œé¿å…å¤šä¸ªlodashåŒ…è¢«æ‰“åŒ…å¤šæ¬¡ï¼Œå¯ä»¥ä½¿ç”¨<code>CommonsChunkPlugin</code>æ’ä»¶ï¼Œwebpack4å·²ç»æŠ›å¼ƒå®ƒäº†ï¼Œä½¿ç”¨çš„æ˜¯<code>splitChunksPlugin</code>æ’ä»¶å–ä»£å®ƒï¼Œæˆ‘åœ¨ä¹‹å‰çš„åœ°æ–¹å·²ç»æ¢³ç†è¿‡äº†ã€‚</p> <p>æ›´å¤šçš„ç”¨æ³•å¯ä»¥æŸ¥çœ‹<a href="https://www.webpackjs.com/guides/shimming/#shimming-%E5%85%A8%E5%B1%80%E5%8F%98%E9%87%8F" target="_blank" rel="noopener noreferrer">shimmingå«ç‰‡<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <hr></div> <!----> <div class="readMore-wrapper"><span class="readMore">é˜…è¯»å…¨æ–‡</span></div>
                    </div>
                            <p>è¿™æ˜¯ä¸€ä¸ªä¿¡æ¯æç¤ºæ¡†ã€‚</p>
                        </div>

                        <div class="note warning">
                            <div class="note-title"><i class="fas fa-exclamation-triangle"></i> æ³¨æ„</div>
                            <p>è¿™æ˜¯ä¸€ä¸ªè­¦å‘Šæç¤ºæ¡†ã€‚</p>
                        </div>

                        <div class="note success">
                            <div class="note-title"><i class="fas fa-check-circle"></i> æˆåŠŸ</div>
                            <p>è¿™æ˜¯ä¸€ä¸ªæˆåŠŸæç¤ºæ¡†ã€‚</p>
                        </div>

                        <h2>ä»£ç ç¤ºä¾‹</h2>
                        <pre><code class="language-javascript">// ç¤ºä¾‹ä»£ç 
function example() {
    console.log('Hello, FrontendHub!');
}
</code></pre>
                    </div>

                    <!-- æ–‡ç« åº•éƒ¨å¯¼èˆª -->
                    <nav class="article-nav">
                        <a href="#" class="prev-article">
                            <i class="fas fa-chevron-left"></i>
                            <span>ä¸Šä¸€ç¯‡</span>
                        </a>
                        <a href="#" class="next-article">
                            <span>ä¸‹ä¸€ç¯‡</span>
                            <i class="fas fa-chevron-right"></i>
                        </a>
                    </nav>
                </article>
            </div>
        </div>
    </main>

    <!-- é¡µè„š -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h4><i class="fas fa-code"></i> FrontendHub</h4>
                    <p>ä¸“æ³¨äºå‰ç«¯æŠ€æœ¯å­¦ä¹ ä¸é¢è¯•å‡†å¤‡</p>
                </div>
                <div class="footer-section">
                    <h4>å¿«é€Ÿé“¾æ¥</h4>
                    <ul>
                        <li><a href="../../index.html">é¦–é¡µ</a></li>
                        <li><a href="../index.html#courses">è¯¾ç¨‹ä½“ç³»</a></li>
                        <li><a href="../index.html#resources">å­¦ä¹ èµ„æº</a></li>
                    </ul>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2025 FrontendHub. ç”¨äºä¸ªäººå­¦ä¹ ä½¿ç”¨.</p>
            </div>
        </div>
    </footer>

    <!-- è¿”å›é¡¶éƒ¨æŒ‰é’® -->
    <button class="back-to-top" id="backToTop">
        <i class="fas fa-arrow-up"></i>
    </button>

    <script src="../../js/main.js"></script>
    <script src="../../js/content.js"></script>
</body>
</html>

