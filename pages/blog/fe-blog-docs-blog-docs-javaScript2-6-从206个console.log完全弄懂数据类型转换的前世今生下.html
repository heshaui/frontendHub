<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>从206个console.log完全弄懂数据类型转换的前世今生下 - FrontendHub</title>
    <link rel="stylesheet" href="../../css/style.css">
    <link rel="stylesheet" href="../../css/content.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body class="content-page">
    <!-- 导航栏 -->
    <nav class="navbar">
        <div class="container">
            <div class="nav-brand">
                <a href="../../index.html" style="color: inherit; text-decoration: none; display: flex; align-items: center; gap: 0.5rem;">
                    <i class="fas fa-code"></i>
                    <span>FrontendHub</span>
                </a>
            </div>
            <button class="nav-toggle" id="navToggle">
                <span></span>
                <span></span>
                <span></span>
            </button>
            <ul class="nav-menu" id="navMenu">
                <li><a href="../../index.html">首页</a></li>
                <li><a href="../index.html#features">特色</a></li>
                <li><a href="../index.html#courses">课程</a></li>
                <li><a href="../index.html#resources">资源</a></li>
            </ul>
        </div>
    </nav>

    <!-- 面包屑导航 -->
    <div class="breadcrumb">
        <div class="container">
            <a href="../../index.html"><i class="fas fa-home"></i> 首页</a>
            <i class="fas fa-chevron-right"></i>
            <span>从206个console.log完全弄懂数据类型转换的前世今生下</span>
        </div>
    </div>

    <!-- 主要内容区 -->
    <main class="content-main">
        <div class="container">
            <div class="content-layout">
                <!-- 侧边栏目录 -->
                <aside class="sidebar">
                    <div class="sidebar-sticky">
                        <h3><i class="fas fa-list"></i> 目录</h3>
                        <nav class="toc" id="toc">
                            <!-- 目录将通过JavaScript自动生成 -->
                        </nav>
                    </div>
                </aside>

                <!-- 文章内容 -->
                <article class="article">
                    <header class="article-header">
                        <h1>从206个console.log完全弄懂数据类型转换的前世今生下</h1>
                        <div class="article-meta">
                            <span><i class="far fa-calendar"></i> 更新时间：2025-12-23</span>
                            <span><i class="far fa-clock"></i> 阅读时长：约 15 分钟</span>
                        </div>
                    </header>

                    <div class="article-content">
<div class="content__default"><h2 id="_1-重写tostring和valueof"><a href="#_1-重写tostring和valueof" class="header-anchor">#</a> 1. 重写toString和valueOf</h2> <p>看完了上篇的对象转字符串，不知道你对<code>toPrimititve</code>的转换流程掌握了多少呢？</p> <p>如果你感觉之前的那些例子还不太具有说明性，也就是说你还是没有感觉到<code>JS</code>确实是按我画的那个流程图来进行转换的话，你可以看看这里。</p> <p>我们在上篇的<code>6.1</code>中提到过了，大部分的对象都是可以通过原型链查找到<code>Object.prototype</code>上的<code>toString</code>或者<code>valueOf</code>方法，然后使用它们。</p> <p>但是你想想，如果我这个对象本身就有<code>toString</code>或者<code>valueOf</code>方法的话是不是就可以不用<code>Object.prototype</code>上的了，这其实就是我们常听到的重写。</p> <p>你也许可以用这样的方式来覆盖原型链上的这两个方法：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token function">toString</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">'1'</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">valueOf</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token number">1</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>甚至你还可以直接修改<code>Object.prototype</code>上的方法：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">toString</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token number">1</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> b <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">String</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// '1'</span>
</code></pre></div><p>(当然，这种肯定是不推荐的哈，这会影响所有的对象)</p> <h3 id="_1-1-题目一"><a href="#_1-1-题目一" class="header-anchor">#</a> 1.1 题目一</h3> <p>（通过重写<code>toString()</code>和<code>valueOf()</code>来判断我们之前的<code>toPrimitive</code>流程是否正确）</p> <p>上面👆两个例子我只是想告诉你，既然我们可以重写对象上的<code>toString()</code>和<code>valueOf</code>，那如果我们在重写的函数里面再加上<code>console.log(xxx)</code>，不就可以知道<strong>对象转原始值</strong>的具体过程是不是按我们设想的方式执行下去了吗？</p> <p>比如这样：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> b <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token function">toString</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'toString'</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token number">1</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">valueOf</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'valueOf'</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">Number</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><p>想一下这里的执行结果 🤔️？</p> <p>既然是用<code>Number()</code>方法来进行转换的话，那也就是执行了伪代码<code>toPrimitive(obj, 'number')</code>了。</p> <p>那也就是说会先调用<code>valueOf()</code>函数，然后判断这个函数的返回值是否为原始值，再决定是继续调用<code>toString()</code>还是返回。</p> <ul><li>很显然，由于这里的<code>valueOf()</code>被重写了，所以调用<code>valueOf()</code>之后返回的是一个引用类型<code>[1, 2]</code>，所以它会继续执行<code>toString()</code></li> <li>也就是执行<code>[1, 2].toString()</code>，但是这时候的<code>toString()</code>也是被重写了的并且返回了数字<code>1</code>，所以我们根本没必要管<code>[1, 2].toString()</code>的结果了，而是直接将<code>1</code>返回。</li></ul> <p>所以整个过程结束之后，答案为：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token string">'valueof'</span>
<span class="token string">'toString'</span>
<span class="token number">1</span>
</code></pre></div><p>这样看下来流程就很清晰了，它确实是按照我们预期的方向走的。</p> <h3 id="_1-2-题目二"><a href="#_1-2-题目二" class="header-anchor">#</a> 1.2 题目二</h3> <p>如果你理解了上面一题的话，咱再来看看这里：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> b <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token function">toString</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'toString'</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'b'</span> <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">valueOf</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'valueOf'</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">String</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><p>这次我是用的<code>String()</code>方法将<code>b</code>转为字符串。</p> <p>而且要注意了，重写的<code>toString()</code>和<code>valueOf</code>都是返回的引用数据类型。那你可以想想到最后的结果会是什么吗？</p> <p>来看看过程分析：</p> <ul><li>执行重写的<code>toString()</code>方法，返回引用类型<code>{name: 'b'}</code></li> <li>继续执行重写的<code>valueOf()</code>方法，返回引用类型<code>[1,2]</code></li> <li>哇，很难受，都经过两轮转换了还是引用类型，得抛错了。</li></ul> <p>没错，这里的转换过程最终是失败了的，因为还记得流程图中，最后一步了若还不是原始值的话，就会抛异常了。</p> <p>所以结果为：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token string">'toString'</span>
<span class="token string">'valueOf'</span>
Cannot convert object to primitive value at String
</code></pre></div><h3 id="_1-3-题目三"><a href="#_1-3-题目三" class="header-anchor">#</a> 1.3 题目三</h3> <p>(数组在进行<code>ToString</code>时的不同之处)</p> <p>我们都知道，当数组在进行转字符串的时候，会把里面的每一项都转为字符串然后再进行<code>","</code>拼接返回。</p> <p>那么为什么会有<code>","</code>拼接这一步呢？难道<code>toString()</code>在调用的时候还会调用<code>join()</code>方法吗？</p> <p>为了验证我的想法💡，我做了一个实验，重写了一个数组的<code>join()</code>方法：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span>
arr<span class="token punctuation">[</span><span class="token string">'join'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> target <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">...</span><span class="token keyword">this</span><span class="token punctuation">]</span>
  <span class="token keyword">return</span> target<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">'~'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">String</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><p>重写的<code>join</code>函数中，<code>this</code>表示的就是调用的这个数组<code>arr</code>。</p> <p>然后将返回值改为<code>"~"</code>拼接，结果答案竟然是：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token string">"1~2"</span>
</code></pre></div><p>也就是说在<code>String(arr)</code>的过程中，它确实是隐式调用了<code>join</code>方法。</p> <p>但是当我们重写了<code>toString()</code>之后，就不会管这个重写的<code>join</code>了：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span>
arr<span class="token punctuation">[</span><span class="token string">'toString'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> target <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">...</span><span class="token keyword">this</span><span class="token punctuation">]</span>
  <span class="token keyword">return</span> target<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">'*'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
arr<span class="token punctuation">[</span><span class="token string">'join'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> target <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">...</span><span class="token keyword">this</span><span class="token punctuation">]</span>
  <span class="token keyword">return</span> target<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">'~'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">String</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// "1*2"</span>
</code></pre></div><p>可以看出<code>toString()</code>的优先级还是比<code>join()</code>高的。</p> <p>现在我们又可以得出一个结论：</p> <p>对象如果是数组的话，当我们不重写其<code>toString()</code>方法，在转换为字符串类型的时候，默认实现就是将调用<code>join()</code>方法的返回值作为<code>toString()</code>的返回值。</p> <h2 id="_2-symbol-toprimitive"><a href="#_2-symbol-toprimitive" class="header-anchor">#</a> 2. Symbol.toPrimitive</h2> <p>在我正为自己弄懂了<code>toPrimitive</code>而感到骄傲的时候，我得知了一个叫做<code>Symbol.toPrimitive</code>的家伙。</p> <p>看这家伙的样子，让我想起了以前见到过的一些老大哥：<code>Symbol.hasInstance</code>、<code>Symbol.toStringTag</code>。</p> <p>他们都有着酷酷的纹身：<code>Symbol</code>，并且之前的老大哥是能够让我们做一些自定义的事情，不知道这家伙是不是和我想的一样，也能够帮助我们重写<code>toPrimitive</code> 🤔️？</p> <p>了解了事情的真相之后，我知道了自己还是不笨的，给猜对了。</p> <p><code>Symbol.toPrimitive</code>就是比重写<code>toString()</code>和<code>valueOf()</code>更屌的一个属性。</p> <p>如果你在一个对象里重写了它的话，那么甚至都不会执行重写的<code>toString()</code>和<code>valueOf()</code>了。</p> <p>(<code>Symbol.toPrimitive</code>也被叫做<code>@@toPrimitive</code>)</p> <h3 id="_2-1-题目一"><a href="#_2-1-题目一" class="header-anchor">#</a> 2.1 题目一</h3> <p>（<code>Symbol.toPrimitive</code>的基本使用-返回值为一个原始值）</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> b <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token function">toString</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'toString'</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'b'</span> <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">valueOf</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'valueOf'</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>toPrimitive<span class="token punctuation">]</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'symbol'</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token string">'1'</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">String</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">Number</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><p>这道题中，我把刚刚提到的三个属性都给重写了，你感觉结果会是什么？</p> <p>😄记住刚刚说的话，<code>Symbol.toPrimitive</code>的优先级是最高的，所以这里只会执行它里面的内容。</p> <p>因此结果为：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token string">'symbol'</span>
<span class="token string">'1'</span>
<span class="token string">'symbol'</span>
<span class="token number">1</span>
</code></pre></div><p>并且大家可以看到，虽然<code>Symbol.toPrimitive</code>的返回值是<code>"1"</code>，但是最终的结果<code>String(b)</code>还是字符串，<code>Number(b)</code>还是数字，表明，最后还是会给返回值做一层对应的转换的。</p> <h3 id="_2-2-题目二"><a href="#_2-2-题目二" class="header-anchor">#</a> 2.2 题目二</h3> <p>（<code>Symbol.toPrimitive</code>的返回值为引用类型，或者没有返回值？）</p> <p>如果它的返回值是引用类型，或者干脆没有返回值，就会继续执行<code>valueOf</code>或者<code>toString</code>吗？</p> <p>结果并不会...来看看这里，我定义了对象<code>b和c</code>，并且重写了这三个属性：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> b <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token function">toString</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'b.toString'</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'b'</span> <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">valueOf</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'b.valueOf'</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>toPrimitive<span class="token punctuation">]</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'b.symbol'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> c <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token function">toString</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'c.toString'</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'c'</span> <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">valueOf</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'c.valueOf'</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>toPrimitive<span class="token punctuation">]</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'c.symbol'</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">String</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">String</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><p>执行结果：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token string">'b.symbol'</span>
<span class="token string">'undefined'</span>
<span class="token string">'c.symbol'</span>
<span class="token literal-property property">TypeError</span><span class="token operator">:</span> Cannot convert object to primitive value
    at String
</code></pre></div><p>过程分析：</p> <ul><li><code>String(b)</code> 过程中打印出了<code>b.symbol</code>，说明还是执行了<code>Symbol.toPrimitive</code>方法的，但是这个方法并没有返回值，且也没有继续执行<code>valueOf()</code>或者<code>toString()</code>了，而是返回了字符串<code>"undefined"</code></li> <li><code>String(c)</code>过程中也打印了<code>c.symbol</code>，但是<code>Symbol.toPrimitive</code>的返回值是一个对象，却报错了。</li></ul> <p>所以从这道题，我们可以看出：</p> <p><code>Symbol.toPrimitive</code>它可谓是<code>一夫当关，万夫莫开</code>，只要有它在，就不会继续往下走了，它的返回结果就是作为最终的返回结果。</p> <p>而且通过<code>String(c)</code>我们可以看出来：如果返回的是一个对象的话，也不会继续执行<code>valueOf()、toString()</code>了，而是判断它的返回值，如果是原始值那就返回，否则就抛出错误。</p> <h3 id="_2-3-题目三"><a href="#_2-3-题目三" class="header-anchor">#</a> 2.3 题目三</h3> <p>（带参数的<code>Symbol.toPrimitive</code>）</p> <p>你以为<code>Symbol.toPrimitive</code>仅仅是这么简单吗？</p> <p>No😺，它竟然还能接收参数！！！</p> <p>它接收一个字符串类型的参数：<code>hint</code>，表示要转换到的原始值的预期类型。</p> <p>且参数的取值为以下字符串的其中一个：</p> <ul><li><code>"number"</code></li> <li><code>"string"</code></li> <li><code>"default"</code></li></ul> <p>嗯😺？我一惊，这怎么和之前介绍的<code>toPrimitive</code>那么像啊：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token function">toPrimitive</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> <span class="token string">'number'</span><span class="token punctuation">)</span>
<span class="token function">toPrimitive</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> <span class="token string">'string'</span><span class="token punctuation">)</span>
</code></pre></div><p>也就是说传入了之后，就是告诉<code>Symbol.toPrimitive</code>要转换成哪个类型咯？</p> <p>这么屌的功能，赶紧来试试：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> b <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token function">toString</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'toString'</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token string">'1'</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">valueOf</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'valueOf'</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>toPrimitive<span class="token punctuation">]</span> <span class="token punctuation">(</span><span class="token parameter">hint</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'symbol'</span><span class="token punctuation">)</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>hint <span class="token operator">===</span> <span class="token string">'string'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'string'</span><span class="token punctuation">)</span>
      <span class="token keyword">return</span> <span class="token string">'1'</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>hint <span class="token operator">===</span> <span class="token string">'number'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'number'</span><span class="token punctuation">)</span>
      <span class="token keyword">return</span> <span class="token number">1</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>hint <span class="token operator">===</span> <span class="token string">'default'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'default'</span><span class="token punctuation">)</span>
      <span class="token keyword">return</span> <span class="token string">'default'</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">String</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">Number</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><p>这道题重写了<code>toString、valueOf、Symbol.toPrimitive</code>三个属性，通过上面👆的题目我们已经知道了只要有<code>Symbol.toPrimitive</code>在，前面两个属性就被忽略了，所以我们不用管它们。</p> <p>而对于<code>Symbol.toPrimitive</code>，我将三种<code>hint</code>的情况都写上了，如果按照我的设想的话，在调用<code>String(b)</code>的时候应该是要打印出<code>string</code>的，调用<code>Number(b)</code>打印出<code>number</code>，结果也正如我所预想的一样：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token string">'string'</span>
<span class="token string">'1'</span>
<span class="token string">'number'</span>
<span class="token number">1</span>
</code></pre></div><p>那么这里面的<code>"default"</code>是做什么的呀？它是什么时候执行的呢？</p> <p>开始我的想法是如果没有<code>if (hint === 'string')</code>这一个判断的时候，是不是就会执行<code>"default"</code>了呢？</p> <p>于是我把<code>if (hint === 'string')</code>和<code>'number'</code>这两个判断的内容给去掉了，发现它还是不会执行<code>"default"</code>：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> b <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token function">toString</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'toString'</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token string">'1'</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">valueOf</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'valueOf'</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>toPrimitive<span class="token punctuation">]</span> <span class="token punctuation">(</span><span class="token parameter">hint</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'symbol'</span><span class="token punctuation">)</span>
    <span class="token comment">// if (hint === 'string') {</span>
    <span class="token comment">//   console.log('string')</span>
    <span class="token comment">//   return '1'</span>
    <span class="token comment">// }</span>
    <span class="token comment">// if (hint === 'number') {</span>
    <span class="token comment">//   console.log('number')</span>
    <span class="token comment">//   return 1</span>
    <span class="token comment">// }</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>hint <span class="token operator">===</span> <span class="token string">'default'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'default'</span><span class="token punctuation">)</span>
      <span class="token keyword">return</span> <span class="token string">'default'</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">String</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">Number</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token comment">// 'symbol'</span>
<span class="token comment">// 'undefined'</span>
<span class="token comment">// 'symbol'</span>
<span class="token comment">// NaN</span>
</code></pre></div><p>可以看到，执行结果竟然和题<code>2.2</code>中那个没有返回值的<code>b</code>有点像。</p> <p>所以也就是说，这个<code>hint</code>它是在调用<code>Symbol.toPrimitive</code>的时候就已经确定了的，后面并不会改变。</p> <p>比如<code>String(b)</code>时传的是<code>string</code>，<code>Number(b)</code>时传的是<code>number</code>。</p> <p>而<code>default</code>这个情况，它涉及到<code>+</code>运算符，在第四节中会说到。</p> <h3 id="_2-4-题目四"><a href="#_2-4-题目四" class="header-anchor">#</a> 2.4 题目四</h3> <p>小伙子(姑娘)，听说你已经掌握<code>Symbol.toPrimitive</code>了？</p> <p>OK👌，让我们来做个题巩固一下：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span> <span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name
  <span class="token punctuation">}</span>
  <span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>toPrimitive<span class="token punctuation">]</span> <span class="token punctuation">(</span><span class="token parameter">hint</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>hint <span class="token operator">===</span> <span class="token string">'default'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'default'</span><span class="token punctuation">)</span>
      <span class="token keyword">return</span> <span class="token string">'default'</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>hint <span class="token operator">===</span> <span class="token string">'string'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'string'</span><span class="token punctuation">)</span>
      <span class="token keyword">return</span> <span class="token string">'1'</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>hint <span class="token operator">===</span> <span class="token string">'number'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'number'</span><span class="token punctuation">)</span>
      <span class="token keyword">return</span> <span class="token number">1</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">let</span> p1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token string">'p1'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> p2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token string">'p2'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">String</span><span class="token punctuation">(</span>p1<span class="token punctuation">)</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">Number</span><span class="token punctuation">(</span>p2<span class="token punctuation">)</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>p1<span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>p2<span class="token punctuation">)</span>
</code></pre></div><p>我把原来的对象，换成了现在的<code>class</code>，你不用想多，其实用它生成的实例就是一个对象，且能使用<code>Symbol.toPrimitive</code>。</p> <p>所以这里的结果为：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token string">'string'</span>
<span class="token string">'1'</span>
<span class="token string">'number'</span>
<span class="token number">1</span>
Person<span class="token punctuation">{</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'p1'</span> <span class="token punctuation">}</span>
Person<span class="token punctuation">{</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'p2'</span> <span class="token punctuation">}</span>
</code></pre></div><p>注意：这里的<code>p1、p2</code>为什么是没有表现出<code>Symbol.toPrimitive</code>函数的呢？</p> <p>别忘了<a href="https://juejin.im/post/5e707417e51d45272054d5d3" target="_blank" rel="noopener noreferrer">《【何不三连】比继承家业还要简单的JS继承题-封装篇(牛刀小试)》<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>这里说的，定义在<code>class</code>中的所有方法都相当于是定义在其原型对象上，也就是<code>Person.prototype</code>上，所以这里<code>p1、p2</code>虽然是遵循<code>Symbol.toPrimitive</code>，但是使用的却是它原型链上的。</p> <h3 id="总结-symbol-toprimitive"><a href="#总结-symbol-toprimitive" class="header-anchor">#</a> 总结-Symbol.toPrimitive</h3> <p>咱来总结一下哈。</p> <ul><li>如果重写了某个对象或者构造函数中的<code>toString、valueOf、Symbol.toPrimitive</code>方法，<code>Symbol.toPrimitive</code>的优先级是最高的</li> <li>若是<code>Symbol.toPrimitive</code>函数返回的值不是基础数据类型(也就是原始值)，就会报错</li> <li><code>Symbol.toPrimitive</code>接收一个字符串参数<code>hint</code>，它表示要转换到的原始值的预期类型，一共有<code>'number'、'string'、'default'</code>三种选项</li> <li>使用<code>String()</code>调用时，<code>hint</code>为<code>'string'</code>；使用<code>Number()</code>时，<code>hint</code>为<code>'number'</code></li> <li><code>hint</code>参数的值从开始调用的时候就已经确定了</li></ul> <p>说实话，这回是真的有些膨胀了，现在不管是<code>toPrimitive</code>的执行机制，还是<code>Symbol.toPrimitive</code>的自定义咱都给搞懂了。</p> <h2 id="_3-使用-比较时的类型转换"><a href="#_3-使用-比较时的类型转换" class="header-anchor">#</a> 3. 使用==比较时的类型转换</h2> <p>上面👆整了这么多题，你倒是给👴来点实际会考的东西啊。</p> <p>好哦，其实在实际中我们被考的比较多的可能就是用<code>==</code>来比较判断两个不同类型的变量是否相等。</p> <p>而全等<code>===</code>的情况比较简单，一般不太会考，因为全等的条件就是：如果类型相等值也相等才认为是全等，并不会涉及到类型转换。</p> <p>但是<code>==</code>的情况就相对复杂了，先给大家看几个比较眼熟的题哈：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token operator">!</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment">// true</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token operator">==</span> <span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token comment">// false</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token operator">==</span> <span class="token string">"[object Object]"</span><span class="token punctuation">)</span> <span class="token comment">// true</span>
</code></pre></div><p>怎样？这几题是不是经常看到呀 😁，下面就让我们一个一个来看。</p> <p>首先，我们还是得清楚几个概念，这个是硬性规定的，不看的话咱没法继续下去啊。</p> <p>当使用<code>==</code>进行比较的时候，会有以下转换规则（判断规则）：</p> <ol><li>两边类型如果相同，值相等则相等，如 <code>2 == 3</code>肯定是为<code>false</code>的了</li> <li>比较的双方都为基本数据类型：</li></ol> <ul><li>若是一方为<code>null、undefined</code>，则另一方必须为<code>null或者undefined</code>才为<code>true</code>，也就是<code>null == undefined</code>为<code>true</code>或者<code>null == null</code>为<code>true</code>，因为<code>undefined</code>派生于<code>null</code></li> <li>其中一方为<code>String</code>，是的话则把<code>String</code>转为<code>Number</code>再来比较</li> <li>其中一方为<code>Boolean</code>，是的话则将<code>Boolean</code>转为<code>Number</code>再来比较</li></ul> <ol start="3"><li>比较的一方有引用类型：</li></ol> <ul><li>将引用类型遵循<code>ToNumber</code>的转换形式来进行比较(实际上它的<code>hint</code>是<code>default</code>，也就是<code>toPrimitive(obj, 'default')</code>，但是<code>default</code>的转换规则和<code>number</code>很像，具体可以看<code>3.10</code>)</li> <li>两方都为引用类型，则判断它们是不是指向同一个对象</li></ul> <p>在一些文章中，会说道：</p> <blockquote><p>如果其中一方为Object，且另一方为String、Number或者Symbol，会将Object转换成字符串，再进行比较</p></blockquote> <p>(摘自<a href="https://juejin.im/post/5dac5d82e51d45249850cd20#heading-20" target="_blank" rel="noopener noreferrer">《神三元-(建议收藏)原生JS灵魂之问, 请问你能接得住几个？(上)》<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>中的<code>3. == 和 ===有什么区别？</code>)</p> <p>这样认为其实也可以，因为想想<code>toPrimitive(obj, 'number')</code>的过程：</p> <ul><li>若是输入值为引用数据类型，则先调用<code>valueOf()</code>方法</li> <li>若是<code>valueOf()</code>方法的返回值是基本数据类型则直接返回，若不是则继续调用<code>toString()</code></li> <li>若是调用<code>toString()</code>的返回值是基本数据类型则返回，否则报错。</li></ul> <p>可以看到，首先是会执行<code>valueOf()</code>的，但是引用类型执行<code>valueOf()</code>方法，除了日期类型，其它情况都是返回它本身，也就是说执行完<code>valueOf()</code>之后，还是一个引用类型并且是它本身。那么我们是不是就可以将<code>valueOf()</code>这一步给省略掉，认为它是直接执行<code>toString()</code>的，这样做起题来也快了很多。</p> <p>（虽然可以将它省略，但是你得知道实际是有这么一步的，这一点我们在题目<code>3.6</code>会验证）</p> <p>为了方便记忆，我画了一张后面三个规则的转换图，接下来我们只需要按着这张图的转换规则来做题就可以了 😁。</p> <p><img src="https://s.poetries.top/gitee/2020/09/174.png" alt=""></p> <p>（为了能有更好的做题体验，请你务必要将此图刻在心里）</p> <h3 id="_3-1-题目一"><a href="#_3-1-题目一" class="header-anchor">#</a> 3.1 题目一</h3> <p>(理解<code>类型相同</code>、<code>null、undefined</code>的情况)</p> <p>来点简单的吧</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">==</span> <span class="token number">2</span><span class="token punctuation">)</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">null</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">null</span> <span class="token operator">==</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">null</span> <span class="token operator">==</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">undefined</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">undefined</span> <span class="token operator">==</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">undefined</span> <span class="token operator">==</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">null</span> <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">undefined</span> <span class="token operator">==</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">undefined</span> <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
</code></pre></div><p>谨记开头的转换规则来做题哦 😁。</p> <p>所以这里的答案为：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token comment">// true</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">==</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token comment">// false</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">null</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token comment">// false</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">null</span> <span class="token operator">==</span> <span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token comment">// false</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">null</span> <span class="token operator">==</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token comment">// false</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">undefined</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token comment">// false</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">undefined</span> <span class="token operator">==</span> <span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token comment">// false</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">undefined</span> <span class="token operator">==</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token comment">// false</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">null</span> <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token comment">// true</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">undefined</span> <span class="token operator">==</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span> <span class="token comment">// true</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">undefined</span> <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token comment">// true</span>
</code></pre></div><p>可以看到，<code>undefined、null</code>除了和它自身以及对方相等之外，和其它的比较都为<code>false</code>。</p> <p>（其实之前我总是以为<code>null == 0</code>或者<code>null == false</code>是为<code>true</code>的，因为之前可能会使用<code>!flag</code>这种方式来判断某个值是不是<code>truly</code>，当然越到后面越知道这种方式其实是很不严谨的哈）</p> <h3 id="_3-2-题目二"><a href="#_3-2-题目二" class="header-anchor">#</a> 3.2 题目二</h3> <p>（理解一方为<code>String</code>，另一方为<code>Number</code>的情况）</p> <p>若是这种情况的话，会把<code>String</code>转成<code>Number</code>再来比较：</p> <p><img src="https://s.poetries.top/gitee/2020/09/175.png" alt=""></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'11'</span> <span class="token operator">==</span> <span class="token number">11</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'1a'</span> <span class="token operator">==</span> <span class="token number">11</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'11n'</span> <span class="token operator">==</span> <span class="token number">11</span><span class="token punctuation">)</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'0x11'</span> <span class="token operator">==</span> <span class="token number">17</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'false'</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'NaN'</span> <span class="token operator">==</span> <span class="token number">NaN</span><span class="token punctuation">)</span>
</code></pre></div><p>这里可能会有几个陷阱，大家要小心了。</p> <p>答案：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'11'</span> <span class="token operator">==</span> <span class="token number">11</span><span class="token punctuation">)</span> <span class="token comment">// true</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'1a'</span> <span class="token operator">==</span> <span class="token number">11</span><span class="token punctuation">)</span> <span class="token comment">// false</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'11n'</span> <span class="token operator">==</span> <span class="token number">11</span><span class="token punctuation">)</span> <span class="token comment">// false</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'0x11'</span> <span class="token operator">==</span> <span class="token number">17</span><span class="token punctuation">)</span> <span class="token comment">// true</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'false'</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token comment">// false</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'NaN'</span> <span class="token operator">==</span> <span class="token number">NaN</span><span class="token punctuation">)</span> <span class="token comment">// false</span>
</code></pre></div><ul><li><code>'11' == 11</code>没啥问题，字符串转为了数字</li> <li><code>'1a'</code>转为数字之后是<code>NaN</code></li> <li><code>'11n'</code>转为数字之后也是<code>NaN</code>，可能大家会看成是<code>bigInt</code>类型的，但是注意了这里是字符串</li> <li><code>'0x11'</code>，以<code>0x</code>开头的十六进制，所以转换为数字之后是<code>17</code></li> <li><code>'false'</code>是一个字符串哦，并不是<code>false</code>，所以结果是假值</li> <li><code>'NaN'</code>也是字符串，不过这里要是真的<code>NaN</code>的话，那也是<code>false</code>，因为<code>NaN</code>这个六亲不认的连它自己都不全等(也就是<code>NaN===NaN</code>的结果为<code>false</code>)，只有用<code>Object.is(NaN, NaN)</code>才会被判断为<code>true</code>)</li></ul> <h3 id="_3-3-题目三"><a href="#_3-3-题目三" class="header-anchor">#</a> 3.3 题目三</h3> <p>（理解一方为<code>Boolean</code>的情况）</p> <p>这种情况会将<code>Boolean</code>转为<code>Number</code>来比较，而通过上篇我们知道，<code>Boolean</code>转<code>Number</code>那是相当简单的，只有两种情况：</p> <ul><li>true =&gt; 1</li> <li>false =&gt; 0</li></ul> <p><img src="https://s.poetries.top/gitee/2020/09/176.png" alt=""></p> <p>所以如果有一方为<code>Boolean</code>的时候应该会很好做吧...</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token boolean">true</span> <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token boolean">false</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token boolean">true</span> <span class="token operator">==</span> <span class="token string">'1'</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token boolean">false</span> <span class="token operator">==</span> <span class="token string">'0'</span><span class="token punctuation">)</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token boolean">true</span> <span class="token operator">==</span> <span class="token string">'0'</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token boolean">true</span> <span class="token operator">==</span> <span class="token string">'false'</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token boolean">false</span> <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
</code></pre></div><p>是挺简单的哈：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token boolean">true</span> <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token comment">// true</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token boolean">false</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token comment">// true</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token boolean">true</span> <span class="token operator">==</span> <span class="token string">'1'</span><span class="token punctuation">)</span> <span class="token comment">// true</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token boolean">false</span> <span class="token operator">==</span> <span class="token string">'0'</span><span class="token punctuation">)</span> <span class="token comment">// true</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token boolean">true</span> <span class="token operator">==</span> <span class="token string">'0'</span><span class="token punctuation">)</span> <span class="token comment">// false</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token boolean">true</span> <span class="token operator">==</span> <span class="token string">'false'</span><span class="token punctuation">)</span> <span class="token comment">// false</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token boolean">false</span> <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token comment">// false</span>
</code></pre></div><ul><li>前两个没啥问题，<code>true</code>和<code>false</code>转为数字就是 <code>0</code>和<code>1</code></li> <li>第三个<code>true</code>转为数字为<code>1</code>，之后另一边是字符串<code>1</code>，依靠准则三，一方为字符串，则将这个字符串转为数字然后进行比较，所以结果为<code>1 == 1</code>的结果，也就是<code>true</code></li> <li>第四个和第三个情况一样，<code>false</code>转为数字<code>0</code>，之后后面的<code>"0"</code>也被转为数字<code>0</code>，所以结果为<code>true</code></li> <li>第五个，<code>true</code>被转换为了<code>1</code>，<code>'0'</code>被转换为了<code>0</code>，所以结果为<code>false</code></li> <li>第六个，<code>true</code>被转换为了<code>1</code>，<code>"false"</code>被转换为了<code>NaN</code>，所以结果为<code>false</code></li> <li>第七个，额，这个其实遵循准则一就可以了，<code>null</code>和<code>false</code>本身就是不相等的。</li></ul> <p>其实这里不知道有没有和我一样对<code>true == '0'</code>有疑问的呢 🤔️？</p> <p>因为我们可能见过这么一段代码：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token string">'0'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'我会被执行'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>这里<code>if</code>内的内容是会被执行的，因为字符串<code>'0'</code>转换为布尔确实是<code>true</code>，那么我就总会认为<code>true == '0'</code>是对的。</p> <p>所以这里要注意了，<code>'0'</code>确实是会被转换为<code>true</code>，也就是：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'我会被执行'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>但在这道题中是将它与<code>true</code>来做比较，那么就要遵循「有布尔先将布尔转换为数字」的规则。</p> <p>所以其实也就是一个转换顺序的问题，<code>true == '0'</code>是先执行的布尔转数字的。</p> <p>但是你不要以为是一个写法顺序的问题 😂，也就是说就算把<code>true</code>和<code>'0'</code>换个位置结果也是一样的：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'0'</span> <span class="token operator">==</span> <span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token comment">// false</span>
</code></pre></div><h3 id="_3-4-题目四"><a href="#_3-4-题目四" class="header-anchor">#</a> 3.4 题目四</h3> <p>(一方为对象的情况)</p> <p>在第三节的开头那里已经说了，当一方有为对象的时候，实际是会将对象执行类似<code>ToNumber</code>操作之后再进行比较的，但是又由于对象的<code>valueOf()</code>基本都是它本身，所以我们可以认为省略了这一步，不过为了让大家心服口服，我这里还是得来验证一下：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> b <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token function-variable function">valueOf</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'b.valueOf'</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token string">'1'</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function-variable function">toString</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'b.toString'</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token string">'2'</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> c <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token function-variable function">valueOf</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'c.valueOf'</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function-variable function">toString</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'c.toString'</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token string">'2'</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>b <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>c <span class="token operator">==</span> <span class="token number">2</span><span class="token punctuation">)</span>
</code></pre></div><p>这道题中，<code>b</code>的<code>valueOf()</code>返回的是一个基本数据类型</p> <p><code>c</code>的<code>valueOf()</code>返回的是一个引用类型。</p> <p>因此结果为：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token string">'b.valueOf'</span>
<span class="token boolean">true</span>
<span class="token string">'c.valueOf'</span>
<span class="token string">'c.toString'</span>
<span class="token boolean">true</span>
</code></pre></div><p>所以我们可以得到这张图：</p> <p><img src="https://s.poetries.top/gitee/2020/09/177.png" alt=""></p> <p>下面做两道题让我们练习一下哈。</p> <h3 id="_3-5-题目五"><a href="#_3-5-题目五" class="header-anchor">#</a> 3.5 题目五</h3> <p>（一方为非数组对象的情况）</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token operator">==</span> <span class="token boolean">true</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token operator">==</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token operator">==</span> <span class="token string">'1'</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token operator">==</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token operator">==</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>哇，乍一看感觉好多啊，这...我怎么比的过来。</p> <p>这时候你只要记得，有一方是<code>Object</code>时，把这个<code>Object</code>转为字符串再来比较就可以了。</p> <p>而引用类型转字符串不知道大家还记得吗？</p> <p>分为了<code>数组</code>和<code>非数组</code>两种情况，大致就是：</p> <ul><li><code>[] =&gt; ''</code>，<code>['1, 2'] =&gt; '1, 2'</code></li> <li>非数组情况另看</li></ul> <p>然后我们再来看看上面那道题👆，<code>{}</code>转为字符串其实是<code>"[object Object]"</code></p> <p>所以可以看出上面的执行结果全为<code>false</code>。</p> <p>其中可能比较难理解的是：</p> <ul><li><code>{} == true</code>，转换过程为：</li></ul> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token operator">==</span> <span class="token boolean">true</span>
<span class="token string">"[object Object]"</span> <span class="token operator">==</span> <span class="token boolean">true</span> <span class="token comment">// 对象转字符串</span>
<span class="token string">"[object Object]"</span> <span class="token operator">==</span> <span class="token number">1</span> <span class="token comment">// 布尔值转数字(准则四,一方为布尔，转换为数字)</span>
<span class="token number">NaN</span> <span class="token operator">==</span> <span class="token number">1</span> <span class="token comment">// 字符串转数字(准则三,一方为字符串另一方为数字则将字符串转数字)</span>
<span class="token comment">// 结果为false</span>
</code></pre></div><ul><li><code>{} == 1</code>，转换过程为：</li></ul> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token operator">==</span> <span class="token number">1</span>
<span class="token string">"[object Object]"</span> <span class="token operator">==</span> <span class="token number">1</span> <span class="token comment">// 对象转字符串</span>
<span class="token number">NaN</span> <span class="token operator">==</span> <span class="token number">1</span> <span class="token comment">// 字符串转数字(准则三,一方为字符串另一方为数字则将字符串转数字)</span>
<span class="token comment">// 结果为 false</span>
</code></pre></div><ul><li><code>{} == {}</code>: 这个你就理解为对象是引用类型，那么这两个对象都有自己独立的堆空间，肯定就是不相等的了。</li></ul> <h3 id="_3-6-题目六"><a href="#_3-6-题目六" class="header-anchor">#</a> 3.6 题目六</h3> <p>（一方为数组的情况）</p> <p><img src="https://s.poetries.top/gitee/2020/09/178.png" alt=""></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'1'</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'1'</span><span class="token punctuation">,</span> <span class="token string">'2'</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'1'</span><span class="token punctuation">,</span> <span class="token string">'2'</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token punctuation">[</span><span class="token string">'1'</span><span class="token punctuation">,</span> <span class="token string">'2'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">'[object Object],[object Object]'</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token boolean">true</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token string">'1'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><p>题目解析：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span>
<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token number">0</span>
<span class="token string">''</span> <span class="token operator">==</span> <span class="token number">0</span> <span class="token comment">// []空数组转为字符串为空字符串</span>
<span class="token number">0</span> <span class="token operator">==</span> <span class="token number">0</span> <span class="token comment">// 空字符串转为数字为0</span>
<span class="token comment">// true</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span>
<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token number">1</span>
<span class="token string">'1'</span> <span class="token operator">==</span> <span class="token number">1</span> <span class="token comment">// [1]非空数组且数组长度为1，转换为字符串为'1'</span>
<span class="token number">1</span> <span class="token operator">==</span> <span class="token number">1</span> <span class="token comment">// '1'字符串转换为数字1</span>
<span class="token comment">// true</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'1'</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token comment">// 转换过程和上面一个一样</span>
<span class="token comment">// true</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span>
<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token number">1</span>
<span class="token string">''</span> <span class="token operator">==</span> <span class="token number">1</span> <span class="token comment">// 空数组转为字符串为''</span>
<span class="token number">0</span> <span class="token operator">==</span> <span class="token number">1</span> <span class="token comment">// 空字符串转为数字为0</span>
<span class="token comment">// false</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'1'</span><span class="token punctuation">,</span> <span class="token string">'2'</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span>
<span class="token punctuation">[</span><span class="token string">'1'</span><span class="token punctuation">,</span> <span class="token string">'2'</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token number">1</span>
<span class="token string">'1,2'</span> <span class="token operator">==</span> <span class="token number">1</span> <span class="token comment">// ['1', '2']数组转为字符串为'1,2'</span>
<span class="token number">NaN</span> <span class="token operator">==</span> <span class="token number">1</span> <span class="token comment">// '1,2'字符串转为数字为NaN</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'1'</span><span class="token punctuation">,</span> <span class="token string">'2'</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token punctuation">[</span><span class="token string">'1'</span><span class="token punctuation">,</span> <span class="token string">'2'</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment">// 引用地址不同</span>
<span class="token comment">// false</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">'[object Object][object Object]'</span><span class="token punctuation">)</span>
<span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">'[object Object][object Object]'</span>
<span class="token comment">// [{},{}]数组中的每一项也就是{}转为字符串为'[object Object]'，然后进行拼接</span>
<span class="token string">'[object Object],[object Object]'</span> <span class="token operator">==</span> <span class="token string">'[object Object],[object Object]'</span>
<span class="token comment">// true</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token boolean">true</span><span class="token punctuation">)</span>
<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token boolean">true</span>
<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token number">1</span> <span class="token comment">// 有一项为布尔，因此将布尔true转为数字1</span>
<span class="token string">''</span> <span class="token operator">==</span> <span class="token number">1</span> <span class="token comment">// 有一项为数组, 因此将[]转为空字符串</span>
<span class="token number">0</span> <span class="token operator">==</span> <span class="token number">1</span> <span class="token comment">// 空字符串转为数字0</span>
<span class="token comment">// false</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token string">'1'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token string">'1'</span><span class="token punctuation">)</span>
<span class="token string">''</span> <span class="token operator">==</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token string">'1'</span><span class="token punctuation">)</span>
<span class="token comment">// false</span>
</code></pre></div><h3 id="_3-7-题目七"><a href="#_3-7-题目七" class="header-anchor">#</a> 3.7 题目七</h3> <p>（理解<code>!</code>运算符的转换）</p> <p>当我们使用<code>!</code>的时候，实际上会将<code>!</code>后面的值转换为布尔类型来进行比较，这也就是我在题<code>3.1</code>说到过的不严谨的情况。</p> <p>而且我发现这种转换是不会经过<code>ToNumber()</code>的，而是直接转换为了布尔值，让我们来验证一下：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> b <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token function-variable function">valueOf</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'b.valueOf'</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token string">'1'</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function-variable function">toString</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'b.toString'</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token string">'2'</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token operator">!</span>b <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token operator">!</span>b <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span>
</code></pre></div><p>这里的执行结果是：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token boolean">false</span>
<span class="token boolean">true</span>
</code></pre></div><p>可以看到，<code>!b</code>它在转换的过程中并没有经过<code>valueOf</code>或者<code>toString</code>，而是直接转为了<code>false</code></p> <h3 id="_3-8-题目八"><a href="#_3-8-题目八" class="header-anchor">#</a> 3.8 题目八</h3> <p>再来做几道题哈：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">null</span> <span class="token operator">==</span> <span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">undefined</span> <span class="token operator">==</span> <span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token operator">!</span><span class="token keyword">null</span> <span class="token operator">==</span> <span class="token operator">!</span><span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">)</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token operator">==</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token operator">==</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token operator">==</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre></div><p>答案：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">null</span> <span class="token operator">==</span> <span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token comment">// true</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">undefined</span> <span class="token operator">==</span> <span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token comment">// true</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token operator">!</span><span class="token keyword">null</span> <span class="token operator">==</span> <span class="token operator">!</span><span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token comment">// true</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token operator">==</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token comment">// false</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token operator">==</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment">// true</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token operator">==</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment">// true</span>
</code></pre></div><p>可以看到，刚刚还不相等的<code>null</code>和<code>0</code>在分别加上了<code>!</code>之后，就变为相等了。</p> <p>前面三个输出结果应该都没有什么问题，来看看后面三个：</p> <p><code>!{} == {}</code>：</p> <ul><li>首先执行的是<code>!{}</code>，转换之后为<code>false</code></li> <li>相当于<code>false == {}</code>，一方有布尔的情况，将布尔转换为数字，即<code>0 == {}</code></li> <li>一方有对象，将对象转换为字符串，即<code>0 == '[object Object]'</code></li> <li>一方有字符串，将字符串转换为数字，即<code>0 == NaN</code></li> <li>因此结果为<code>false</code></li></ul> <p><code>!{} == []</code>：</p> <ul><li>首先执行的还是<code>!{}</code>，转换之后为<code>false</code></li> <li>相当于<code>false == []</code>，一方有布尔，将布尔转换为数字，即<code>0 == []</code>，</li> <li>一方有对象，将对象转换为字符串，即<code>0 == '0'</code></li> <li>一方有字符串，将字符串转换为数字，即<code>0 == 0</code></li> <li>因此结果为<code>true</code></li></ul> <p>而<code>!{} == [0]</code>的转换流程和<code>!{} == []</code>一样。</p> <h3 id="_3-9-题目九"><a href="#_3-9-题目九" class="header-anchor">#</a> 3.9 题目九</h3> <p>现在你能弄懂开始说的那几道题了吗？</p> <p>让我们再来看看，这次肯定觉得很简单：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> b <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token function">valueOf</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'valueOf'</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">toString</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'toString'</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token boolean">false</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">==</span> b<span class="token punctuation">)</span>
</code></pre></div><p><code>![] == []</code>：</p> <ul><li>先将<code>![]</code>转换为布尔类型，<code>[]</code>为<code>true</code>，那么<code>![]</code>就是<code>false</code></li> <li>然后<code>[]</code>转为数字是为<code>0</code>，<code>0</code>与<code>false</code>比较，将<code>false</code>也转换为<code>0</code>，所以结果为<code>true</code></li></ul> <p><code>![] == b</code>：</p> <ul><li>同样的，<code>![]</code>转为了<code>false</code></li> <li><code>b</code>会先执行<code>valueOf</code>，然后执行<code>toString</code>，返回的也是<code>false</code></li> <li>所以结果为<code>true</code></li></ul> <p>答案：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token boolean">false</span>
<span class="token string">'valueOf'</span>
<span class="token string">'toString'</span>
<span class="token boolean">true</span>
</code></pre></div><h3 id="_3-10-题目十"><a href="#_3-10-题目十" class="header-anchor">#</a> 3.10 题目十</h3> <p>(理解<code>==</code>比较时对象的<code>Symbol.toPrimitive</code>函数的<code>hint</code>参数)</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> b <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>toPrimitive<span class="token punctuation">]</span> <span class="token punctuation">(</span><span class="token parameter">hint</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>hint<span class="token punctuation">)</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>hint <span class="token operator">===</span> <span class="token string">'default'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token number">2</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>b <span class="token operator">==</span> <span class="token number">2</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>b <span class="token operator">==</span> <span class="token string">'2'</span><span class="token punctuation">)</span>
</code></pre></div><p>通过上面👆几个案例，我们都可以看出对象在进行<code>==</code>比较时会经过类似于<code>ToNumber</code>的转换过程：</p> <ul><li>调用<code>valueOf()</code></li> <li>调用<code>toString()</code></li></ul> <p>但其在进行重新<code>Symbol.toPrimitive</code>接收到的参数会是<code>"default"</code>，并不是<code>"number"</code>。</p> <p>所以这里的答案为：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token string">'default'</span>
<span class="token boolean">true</span>
<span class="token string">'default'</span>
<span class="token boolean">true</span>
</code></pre></div><h3 id="_3-11-题目十一"><a href="#_3-11-题目十一" class="header-anchor">#</a> 3.11 题目十一</h3> <p>(函数在使用<code>==</code>时的转换)</p> <p>函数其实也是一个对象，所以在进行<code>==</code>比较时也和普通对象一样处理即可。</p> <p>但是我只想要提醒一点，在进行<code>==</code>比较时要注意是比较<strong>函数本身</strong>还是比较<strong>函数的返回值</strong>。</p> <p>例如在这道题中：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">f</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> <span class="token function-variable function">inner</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token number">1</span>
  <span class="token punctuation">}</span>
  inner<span class="token punctuation">.</span><span class="token function-variable function">valueOf</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'valueOf'</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token number">2</span>
  <span class="token punctuation">}</span>
  inner<span class="token punctuation">.</span><span class="token function-variable function">toString</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'toString'</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token number">3</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> inner
<span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span>
</code></pre></div><ul><li><code>f()</code>表示的是<code>inner</code>这个函数，所以<code>f() == 1</code>相当于是<code>inner == 1</code>，因此此时就涉及到了<code>inner</code>函数的类型转换，就会触发<code>inner.valueOf()</code>，返回<code>2</code>，因此第一个是<code>false</code></li> <li><code>f()()</code>表示的是<code>inner()</code>调用之后的返回值，也就是<code>1</code>，所以此时是<code>1 == 1</code>进行比较，并不会涉及到<code>inner</code>函数的类型转换，也就不会触发<code>inner.valueOf()</code>，因此第二个为<code>true</code>。</li></ul> <p>结果：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token string">'valueOf'</span>
<span class="token boolean">false</span>
<span class="token boolean">true</span>
</code></pre></div><h3 id="总结-使用-比较"><a href="#总结-使用-比较" class="header-anchor">#</a> 总结-使用==比较</h3> <p>做完了这十一道题，相信你对<code>==</code>的比较应该比之前更了解了吧 😁，让我们来总结一波。</p> <p>当使用<code>==</code>进行比较的时候，会有以下转换规则（判断规则）：</p> <ol><li>两边类型如果相同，值相等则相等，如 <code>2 == 3</code>肯定是为<code>false</code>的了</li> <li>比较的双方都为基本数据类型：</li></ol> <ul><li>若是一方为<code>null、undefined</code>，则另一方必须为<code>null或者undefined</code>才为<code>true</code>，也就是<code>null == undefined</code>为<code>true</code>或者<code>null == null</code>为<code>true</code>，因为<code>undefined</code>派生于<code>null</code></li> <li>其中一方为<code>String</code>，是的话则把<code>String</code>转为<code>Number</code>再来比较</li> <li>其中一方为<code>Boolean</code>，是的话则将<code>Boolean</code>转为<code>Number</code>再来比较</li></ul> <ol start="3"><li>比较的一方有引用类型：</li></ol> <ul><li>将引用类型遵循类似<code>ToNumber</code>的转换形式来进行比较(也就是<code>toPrimitive(obj, 'defalut')</code></li> <li>两方都为引用类型，则判断它们是不是指向同一个对象</li></ul> <p>当一方有为对象的时候，实际是会将对象执行<code>ToNumber</code>操作之后再进行比较的，但是又由于对象的<code>valueOf()</code>基本都是它本身，所以我们可以认为省略了这一步。</p> <p>这里我贴上一张流程图，感觉画的挺不错的，大家可以对照着看一下：</p> <p><img src="https://s.poetries.top/gitee/2020/09/179.png" alt=""></p> <h2 id="_4-、-、-、-、-的类型转换"><a href="#_4-、-、-、-、-的类型转换" class="header-anchor">#</a> 4. +、-、*、/、%的类型转换</h2> <p>除了在<code>==</code>的比较中会进行类型转换之外，其它的运算符号也会有。</p> <p>比如标题上常见的这五种。</p> <p>这里我主要是分两类来说：</p> <ol><li><code>-、*、/、%</code>这四种都会把符号两边转成数字来进行运算</li> <li><code>+</code>由于不仅是数字运算符，还是字符串的连接符，所以分为两种情况：</li></ol> <ul><li>两端都是数字则进行数字计算</li> <li>有一端是字符串，就会把另一端也转换为字符串进行连接</li></ul> <h3 id="_4-1-题目一"><a href="#_4-1-题目一" class="header-anchor">#</a> 4.1 题目一</h3> <p>(四种简单运算符的类型转换)</p> <p>先来说说除了<code>+</code>号以外的其它四种运算符的转换，由于基本数据类型应该都清楚，所以就不做说明了，这里主要是想说一下对象运算时的情况：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> b <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>b <span class="token operator">-</span> <span class="token string">'2'</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>b <span class="token operator">*</span> <span class="token string">'2'</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>b <span class="token operator">/</span> <span class="token string">'2'</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>b <span class="token operator">%</span> <span class="token string">'2'</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>b <span class="token operator">-</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>b <span class="token operator">-</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p><code>b</code>是一个对象，在进行这类运算的时候，把两端都转换为数字进行计算，而我们知道对象<code>{}</code>转为数字是<code>NaN</code>，所以答案全都是<code>NaN</code>。</p> <p>答案：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token number">NaN</span>
<span class="token number">NaN</span>
<span class="token number">NaN</span>
<span class="token number">NaN</span>
<span class="token number">NaN</span>
<span class="token number">NaN</span>
</code></pre></div><h3 id="_4-2-题目二"><a href="#_4-2-题目二" class="header-anchor">#</a> 4.2 题目二</h3> <p>(四种运算符的实际转换-重写<code>toString()</code>和<code>valueOf()</code>)</p> <p>我们将上面👆那道题的<code>b</code>对象重写一下它们的<code>toString()</code>和<code>valueOf()</code>方法，想想，如果它是遵循<code>ToNumber()</code>转换的话，那么以下的结果会是什么呢？</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> b <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token function">valueOf</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'valueOf'</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">toString</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'toString'</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token number">1</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>b <span class="token operator">-</span> <span class="token string">'2'</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>b <span class="token operator">*</span> <span class="token string">'2'</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>b <span class="token operator">/</span> <span class="token string">'2'</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>b <span class="token operator">%</span> <span class="token string">'2'</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>b <span class="token operator">-</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>b <span class="token operator">-</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>在调用<code>b</code>的时候，会先执行<code>valueOf()</code>方法，如果该方法返回的是一个基本数据类型则返回，否则继续调用<code>toString()</code>方法，很显然这里的<code>valueOf()</code>返回的还是一个引用类型，所以总会调用<code>toString()</code>，因此答案为：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token string">'valueOf'</span>
<span class="token string">'toString'</span>
<span class="token operator">-</span><span class="token number">1</span>
<span class="token string">'valueOf'</span>
<span class="token string">'toString'</span>
<span class="token number">2</span>
<span class="token string">'valueOf'</span>
<span class="token string">'toString'</span>
<span class="token number">0.5</span>
<span class="token string">'valueOf'</span>
<span class="token string">'toString'</span>
<span class="token number">1</span>
<span class="token string">'valueOf'</span>
<span class="token string">'toString'</span>
<span class="token number">1</span>
<span class="token string">'valueOf'</span>
<span class="token string">'toString'</span>
<span class="token number">NaN</span>
</code></pre></div><p>这里要说一下的是最后两个输出结果。</p> <p><code>b - []</code>：</p> <ul><li><code>b</code>输出的是<code>1</code>，因为<code>[]</code>转换为数字我们知道是<code>0</code>，所以结果为<code>1</code></li></ul> <p><code>b - {}</code></p> <ul><li>其实差不多，<code>b</code>为<code>1</code>，<code>{}</code>转为数字为<code>NaN</code>，所以结果为<code>NaN</code></li></ul> <h3 id="_4-3-题目三"><a href="#_4-3-题目三" class="header-anchor">#</a> 4.3 题目三</h3> <p>(四种运算符的实际转换-重写<code>Symbol.toPrimitive</code>)</p> <p><code>4.1</code>那道题我们除了重写<code>toString</code>和<code>valueOf</code>我们还可以重新什么呢？</p> <p>嘻嘻，怎么能忘了<code>Symbol.toPrimitive</code>，如果重新了它，那你觉得它接收到的<code>hint</code>参数会是什么呢？</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> b <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>toPrimitive<span class="token punctuation">]</span> <span class="token punctuation">(</span><span class="token parameter">hint</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>hint <span class="token operator">===</span> <span class="token string">'default'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'default'</span><span class="token punctuation">)</span>
      <span class="token keyword">return</span> <span class="token string">'default'</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>hint <span class="token operator">===</span> <span class="token string">'number'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'number'</span><span class="token punctuation">)</span>
      <span class="token keyword">return</span> <span class="token number">1</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>hint <span class="token operator">===</span> <span class="token string">'string'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'string'</span><span class="token punctuation">)</span>
      <span class="token keyword">return</span> <span class="token string">'2'</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>b <span class="token operator">-</span> <span class="token string">'2'</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>b <span class="token operator">*</span> <span class="token string">'2'</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>b <span class="token operator">/</span> <span class="token string">'2'</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>b <span class="token operator">%</span> <span class="token string">'2'</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>b <span class="token operator">-</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>b <span class="token operator">-</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>既然是会把运算符两边都转换为数字进行计算，那么<code>hint</code>接收到的肯定就是<code>'number'</code>了呀，没错，所以这里<code>b</code>总是会返回<code>1</code>，因此答案为：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token string">'number'</span>
<span class="token operator">-</span><span class="token number">1</span>
<span class="token string">'number'</span>
<span class="token number">2</span>
<span class="token string">'number'</span>
<span class="token number">0.5</span>
<span class="token string">'number'</span>
<span class="token number">1</span>
<span class="token string">'number'</span>
<span class="token number">1</span>
<span class="token string">'number'</span>
<span class="token number">NaN</span>
</code></pre></div><p>yeah~感觉没啥难度。</p> <h3 id="_4-4-题目四"><a href="#_4-4-题目四" class="header-anchor">#</a> 4.4 题目四</h3> <p>(<code>+</code>号对于对象的转换)</p> <ul><li><code>+b</code>的情况就相当于转为数字</li> <li><code>+</code>号两边有值则判断两边值的类型，若两边都为数字则进行数字计算，若有一边是字符串，就会把另一边也转换为字符串进行连接</li></ul> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> b <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token operator">+</span>b<span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>b <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">+</span> b<span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>b <span class="token operator">+</span> <span class="token string">''</span><span class="token punctuation">)</span>
</code></pre></div><p>依照着这个规则，我们可以得出答案：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token number">NaN</span>
<span class="token string">'[object Object]1'</span>
<span class="token string">'1[object Object]'</span>
<span class="token string">'[object Object]'</span>
</code></pre></div><h3 id="_4-5-题目五"><a href="#_4-5-题目五" class="header-anchor">#</a> 4.5 题目五</h3> <p>(<code>'+'</code>运算符与<code>String()</code>的区别)</p> <p>同样的，我们给上题加上<code>Symbol.toPrimitive</code>看一下：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> b <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>toPrimitive<span class="token punctuation">]</span> <span class="token punctuation">(</span><span class="token parameter">hint</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>hint <span class="token operator">===</span> <span class="token string">'default'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'default'</span><span class="token punctuation">)</span>
      <span class="token keyword">return</span> <span class="token string">'我是默认'</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>hint <span class="token operator">===</span> <span class="token string">'number'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'number'</span><span class="token punctuation">)</span>
      <span class="token keyword">return</span> <span class="token number">1</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>hint <span class="token operator">===</span> <span class="token string">'string'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'string'</span><span class="token punctuation">)</span>
      <span class="token keyword">return</span> <span class="token string">'2'</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token operator">+</span>b<span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>b <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">+</span> b<span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>b <span class="token operator">+</span> <span class="token string">''</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">String</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><p>因为<code>+b</code>走的是转换数字的路线，所以它的<code>hint</code>肯定就是<code>number</code>。</p> <p>可是对于<code>b + 1</code>这种字符串连接的情况，走的却不是<code>string</code>，而是<code>default</code>。</p> <p>所以可以看到答案为：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> b <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>toPrimitive<span class="token punctuation">]</span> <span class="token punctuation">(</span><span class="token parameter">hint</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>hint <span class="token operator">===</span> <span class="token string">'default'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'default'</span><span class="token punctuation">)</span>
      <span class="token keyword">return</span> <span class="token string">'我是默认'</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>hint <span class="token operator">===</span> <span class="token string">'number'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'number'</span><span class="token punctuation">)</span>
      <span class="token keyword">return</span> <span class="token number">1</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>hint <span class="token operator">===</span> <span class="token string">'string'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'string'</span><span class="token punctuation">)</span>
      <span class="token keyword">return</span> <span class="token string">'2'</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token operator">+</span>b<span class="token punctuation">)</span> <span class="token comment">// number</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>b <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token comment">// default</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">+</span> b<span class="token punctuation">)</span> <span class="token comment">// default</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>b <span class="token operator">+</span> <span class="token string">''</span><span class="token punctuation">)</span> <span class="token comment">// default</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">String</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// string</span>

<span class="token string">'number'</span>
<span class="token number">1</span>
<span class="token string">'default'</span>
<span class="token string">'我是默认1'</span>
<span class="token string">'default'</span>
<span class="token string">'1我是默认'</span>
<span class="token string">'default'</span>
<span class="token string">'我是默认'</span>
<span class="token string">'string'</span>
<span class="token string">'2'</span>
</code></pre></div><p>可以看到<code>b + 1</code>和<code>String(b)</code>这两种促发的转换规则是不一样的</p> <ul><li><code>{} + 1</code>字符串连接时<code>hint</code>为<code>default</code></li> <li><code>String({})</code>时<code>hint</code>为<code>string</code></li></ul> <h3 id="_4-6-题目六"><a href="#_4-6-题目六" class="header-anchor">#</a> 4.6 题目六</h3> <p>鉴于我不知道上面👆的<code>default</code>和<code>number、string</code>有什么区别，所以我觉得应该要重写一下<code>toString</code>和<code>valueOf()</code>来看看会发生什么。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> b <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token function">valueOf</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'valueOf'</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">toString</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'toString'</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token number">1</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token operator">+</span>b<span class="token punctuation">)</span> <span class="token comment">// number</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>b <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token comment">// default</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">String</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// string</span>
</code></pre></div><p>此时的结果为：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token string">'valueOf'</span>
<span class="token string">'toString'</span>
<span class="token number">1</span>
<span class="token string">'valueOf'</span>
<span class="token string">'toString'</span>
<span class="token number">2</span>
<span class="token string">'toString'</span>
<span class="token string">'1'</span>
</code></pre></div><p>我发现<code>default</code>的转换方式和<code>number</code>很像，都是先执行判断有没有<code>valueOf</code>，有的话执行<code>valueOf</code>，然后判断<code>valueof</code>后的返回值，若是是引用类型则继续执行<code>toString</code>。(这点其实在题目<code>3.10</code>中也说到了)</p> <h3 id="_4-7-题目七"><a href="#_4-7-题目七" class="header-anchor">#</a> 4.7 题目七</h3> <p>(日期对象的数据转换)</p> <p>之前我们有提到过，日期对象的转换比较特殊。(在<a href="https://juejin.im/post/5e7f8314e51d4546fa4511c9#heading-40" target="_blank" rel="noopener noreferrer">引用类型调用valueOf()<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>中)</p> <ul><li>普通对象转换的<code>valueOf</code>返回的是它本身，也就是引用类型</li> <li>日期对象的<code>valueOf</code>返回的是一个数字类型的毫秒数</li></ul> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> date <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>date<span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>date<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token operator">+</span>date<span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">''</span> <span class="token operator">+</span> date<span class="token punctuation">)</span>
</code></pre></div><p>所以我们可以看到这里的答案是：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> date <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>date<span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 1585742078284</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>date<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// Wed Apr 01 2020 19:54:38 GMT+0800 (中国标准时间)</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token operator">+</span>date<span class="token punctuation">)</span> <span class="token comment">// 1585742078284</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">''</span> <span class="token operator">+</span> date<span class="token punctuation">)</span> <span class="token comment">// Wed Apr 01 2020 19:54:38 GMT+0800 (中国标准时间)</span>
</code></pre></div><p><code>+date</code>是转换为数字，所以结果和<code>date.valueOf()</code>结果一致。</p> <p>但是我们会发现这里的<code>'' + date</code>和上面的<code>'' + {}</code>就会有所不同了。</p> <p>虽然同样都是被转换为字符串，但是还记得<code>'' + {}</code>的转换顺序吗？它的转换方式是遵循<code>ToNumber</code>的，也就是会先执行<code>valueOf()</code>，再执行<code>toString()</code>，由于<code>{}.valueOf</code>等于它本身，是引用类型，所以会继续执行<code>toString()</code>。</p> <p>而<code>date</code>进行<code>+</code>号字符串连接不会遵循这种转换规则，而是优先调用<code>toString()</code>。</p> <h3 id="总结-运算符的类型转换"><a href="#总结-运算符的类型转换" class="header-anchor">#</a> 总结-运算符的类型转换</h3> <p>对于几种常用运算符的类型转换：</p> <ol><li><code>-、*、/、%</code>这四种都会把符号两边转成数字来进行运算</li> <li><code>+</code>由于不仅是数字运算符，还是字符串的连接符，所以分为两种情况：</li></ol> <ul><li>两端都是数字则进行数字计算(一元正号<code>+b</code>这种情况相当于转换为数字)</li> <li>有一端是字符串，就会把另一端也转换为字符串进行连接</li></ul> <p>对象的<code>+</code>号类型转换：</p> <ul><li>对象在进行<code>+</code>号字符串连接的时候，<code>toPrimitive</code>的参数<code>hint</code>是<code>default</code>，但是<code>default</code>的执行顺序和<code>number</code>一样都是先判断有没有<code>valueOf</code>，有的话执行<code>valueOf</code>，然后判断<code>valueof</code>后的返回值，若是是引用类型则继续执行<code>toString</code>。(类似题<code>4.5</code>和<code>4.6</code>)</li> <li>日期在进行<code>+</code>号字符串连接的时候，优先调用<code>toString()</code>方法。(类似题<code>4.7</code>)</li> <li><strong>一元正号是转换其他对象到数值的最快方法</strong>,也是最推荐的做法，因为 <strong>它不会对数值执行任何多余操作</strong>。</li></ul> <p>mm...</p> <p>不知道您看到现在还好不？应该还没炸吧</p> <p>铺垫了这么久，是时候展示正在的技术了！</p> <h2 id="_5-几道大厂的面试题"><a href="#_5-几道大厂的面试题" class="header-anchor">#</a> 5. 几道大厂的面试题</h2> <h3 id="_5-1-以下输出为"><a href="#_5-1-以下输出为" class="header-anchor">#</a> 5.1 以下输出为？</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token operator">!</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span>
</code></pre></div><ul><li><code>==</code>号两边都是引用类型则判断是否为同一引用</li> <li><code>[] == ![]</code>这个在<code>3.9</code>中说的很详细了</li> <li><code>{} == 1</code>，简单来说两边都转换为数字，<code>{}</code>转换为数字为<code>NaN</code>，所以结果为<code>false</code>。详细来说：一方为对象，将对象转换为字符串进行比较，即<code>"[object Object]" == 1</code>；一方有字符串，将字符串转换为数字进行比较，即<code>NaN == 1</code>，所以结果为<code>false</code></li></ul> <p>答案为：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment">// false</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token operator">!</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment">// true</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token comment">// false</span>
</code></pre></div><h3 id="_5-2-以下输出为"><a href="#_5-2-以下输出为" class="header-anchor">#</a> 5.2 以下输出为？</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token operator">+</span> <span class="token string">""</span> <span class="token operator">*</span> <span class="token number">1</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token operator">-</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token operator">+</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">-</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p><code>{} + "" * 1</code>：</p> <ul><li>运算顺序遵循先乘后加，所以先执行<code>"" * 1</code>，结果为<code>0</code>，因为<code>""</code>转换为数字是<code>0</code></li> <li>之后执行<code>{} + 0</code>，将<code>{}</code>转换为字符串是<code>"[object Object]"</code>，<code>0</code>转换为字符串是<code>"0"</code></li> <li>所以结果为<code>"[object Object]0"</code></li></ul> <p><code>{} - []</code>：</p> <ul><li><code>-</code>号两边转换为数字，<code>{}</code>为<code>NaN</code>，<code>[]</code>为<code>0</code>，所以结果为<code>NaN</code></li></ul> <p><code>{} + []</code>：</p> <ul><li><code>{}</code>转为字符串为<code>"[object Object]"</code>，<code>[]</code>转为字符串为<code>""</code>，所以结果为<code>"[object Object]"</code></li></ul> <p><code>[2] - [] + function () {}</code>：</p> <ul><li><code>-</code>号两边转换为数字分别为<code>2</code>和<code>0</code>，所以<code>[2] - []</code>结果为<code>2</code></li> <li>之后<code>2 + function () {}</code>，两边转换为字符串拼接为<code>"2function () {}"</code>，因为函数是会转换为源代码字符串的。</li></ul> <p>答案为：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token operator">+</span> <span class="token string">""</span> <span class="token operator">*</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token comment">// "[object Object]0"</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token operator">-</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment">// NaN</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token operator">+</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment">// "[object Object]"</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">-</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token comment">// "2function () {}"</span>
</code></pre></div><h3 id="_5-3-你会几种让if-a-1-a-2-a-3-条件成立的办法"><a href="#_5-3-你会几种让if-a-1-a-2-a-3-条件成立的办法" class="header-anchor">#</a> 5.3 你会几种让if(a == 1 &amp;&amp; a == 2 &amp;&amp; a == 3)条件成立的办法？</h3> <p>这道题相信大家看的不会少，除了重写<code>valueOf()</code>你还会哪些解法呢？</p> <p><strong>解法一：重写<code>valueOf()</code></strong></p> <p>这个解法是利用了：当对象在进行<code>==</code>比较的时候实际是会先执行<code>valueOf()</code>，若是<code>valueOf()</code>的返回值是基本数据类型就返回，否则还是引用类型的话就会继续调用<code>toString()</code>返回，然后判断<code>toString()</code>的返回值，若是返回值为基本数据类型就返回，否则就报错。</p> <p>现在<code>valueOf()</code>每次返回的是一个数字类型，所以会直接返回。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// 1</span>
<span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
  <span class="token function">valueOf</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token operator">++</span><span class="token keyword">this</span><span class="token punctuation">.</span>value
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>a <span class="token operator">==</span> <span class="token number">1</span> <span class="token operator">&amp;&amp;</span> a <span class="token operator">==</span> <span class="token number">2</span> <span class="token operator">&amp;&amp;</span> a <span class="token operator">==</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'成立'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>解法二：重写<code>valueOf()</code>和<code>toString()</code></strong></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
  <span class="token function">valueOf</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">toString</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token operator">++</span><span class="token keyword">this</span><span class="token punctuation">.</span>value
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>a <span class="token operator">==</span> <span class="token number">1</span> <span class="token operator">&amp;&amp;</span> a <span class="token operator">==</span> <span class="token number">2</span> <span class="token operator">&amp;&amp;</span> a <span class="token operator">==</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'成立'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>原理就是解法一的原理，只不过用到了当<code>valueOf()</code>的返回值是引用类型的时候会继续调用<code>toString()</code>。</p> <p>这里你甚至都可以不用重写<code>valueOf()</code>，因为除了日期对象其它对象在调用<code>valueOf()</code>的时候都是返回它本身。</p> <p>也就是说你也可以这样做：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
  <span class="token function">toString</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token operator">++</span><span class="token keyword">this</span><span class="token punctuation">.</span>value
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>a <span class="token operator">==</span> <span class="token number">1</span> <span class="token operator">&amp;&amp;</span> a <span class="token operator">==</span> <span class="token number">2</span> <span class="token operator">&amp;&amp;</span> a <span class="token operator">==</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'成立'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>解法三：重写<code>Symbol.toPrimitive</code></strong></p> <p>想想是不是还可以用<code>Symbol.toPrimitive</code>来解呢？</p> <p>结合题<code>3.10</code>我们知道，当对象在进行<code>==</code>比较的时候，<code>Symbol.toPrimitive</code>接收到的参数<code>hint</code>是<code>"defalut"</code>，那么我们只需要这样重写：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
  <span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>toPrimitive<span class="token punctuation">]</span> <span class="token punctuation">(</span><span class="token parameter">hint</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>hint <span class="token operator">===</span> <span class="token string">'default'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token operator">++</span><span class="token keyword">this</span><span class="token punctuation">.</span>value
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>a <span class="token operator">==</span> <span class="token number">1</span> <span class="token operator">&amp;&amp;</span> a <span class="token operator">==</span> <span class="token number">2</span> <span class="token operator">&amp;&amp;</span> a <span class="token operator">==</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'成立'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>这样结果也是可以的。</p> <p><strong>解法四：定义class并重写valueOf()</strong></p> <p>当然你还可以用<code>class</code>来写：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">class</span> <span class="token class-name">A</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token number">0</span>
  <span class="token punctuation">}</span>
  <span class="token function">valueOf</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token operator">++</span><span class="token keyword">this</span><span class="token punctuation">.</span>value
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">A</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>a <span class="token operator">==</span> <span class="token number">1</span> <span class="token operator">&amp;&amp;</span> a <span class="token operator">==</span> <span class="token number">2</span> <span class="token operator">&amp;&amp;</span> a <span class="token operator">==</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'成立'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>解法五：利用数组转为字符串会隐式调用<code>join()</code></strong></p> <p>什么 ？ 还有别的解法吗？而且我看解法五的题目有点没看懂啊。</p> <p>让我们回过头去看看题<code>1.3</code>，那里提到了当数组在进行转字符串的时候，调用<code>toString()</code>的结果其实就是调用<code>join</code>的结果。</p> <p>那和这道题有什么关系？来看看答案：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">let</span> a <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span>
a<span class="token punctuation">[</span><span class="token string">'join'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">shift</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>a <span class="token operator">==</span> <span class="token number">1</span> <span class="token operator">&amp;&amp;</span> a <span class="token operator">==</span> <span class="token number">2</span> <span class="token operator">&amp;&amp;</span> a <span class="token operator">==</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'成立'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>因为我们知道，对象如果是数组的话，当我们不重写其<code>toString()</code>方法，在转换为字符串类型的时候，默认实现就是将调用<code>join()</code>方法的返回值作为<code>toString()</code>的返回值。</p> <p>所以这里我们重写了<code>a</code>的<code>join</code>方法，而这次重写做了两件事情：</p> <ol><li>将数组<code>a</code>执行<code>a.shift()</code>方法，我们知道这会影响原数组<code>a</code>的，将第一项去除</li> <li>将刚刚去除的第一项返回回去</li></ol> <p>所以当我们在执行<code>a == 1</code>这一步的时候，由于隐式调用了<code>a['join']</code>方法，所以会执行上面👆说的那两件事情，后面的<code>a == 2</code>和<code>a == 3</code>同理。</p> <p><strong>解法六：定义class继承Array并重写join()</strong></p> <p>对于解法五我们同样可以用<code>class</code>来实现</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">class</span> <span class="token class-name">A</span> <span class="token keyword">extends</span> <span class="token class-name">Array</span> <span class="token punctuation">{</span>
  join <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>shift
<span class="token punctuation">}</span>
<span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">A</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>a <span class="token operator">==</span> <span class="token number">1</span> <span class="token operator">&amp;&amp;</span> a <span class="token operator">==</span> <span class="token number">2</span> <span class="token operator">&amp;&amp;</span> a <span class="token operator">==</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'成立'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>这种写法比较酷🆒，但是第一次看可能不太能懂。</p> <ul><li>首先<code>A</code>这个类通过<code>extends</code>继承于<code>Array</code>，这样通过<code>new A</code>创建的就是一个数组</li> <li>然后<code>A</code>重写了<code>join</code>方法，<code>join = this.shift</code>就相当于是<code>join = function () { return this.shift() }</code></li> <li>这样当每次调用<code>a == xxx</code>的时候，都会隐式调用我们自定义的<code>join</code>方法，执行和解法五一样的操作。</li></ul> <h3 id="_5-4-让if-a-1-a-2-a-3-条件成立"><a href="#_5-4-让if-a-1-a-2-a-3-条件成立" class="header-anchor">#</a> 5.4 让if (a === 1 &amp;&amp; a === 2 &amp;&amp; a === 3)条件成立？</h3> <p>这道题看着和上面那道有点像，不过这里判断的条件是全等的。</p> <p>我们知道全等的条件：</p> <ol><li>左右两边的类型要相等，如果类型不相等则直接返回<code>false</code>，这点和<code>==</code>不同，<code>==</code>会发生隐式类型转换</li> <li>再判断值相不相等</li></ol> <p>而对于上面👆一题的解法我们都是利用了<code>==</code>会发生隐式类型转换这一点，显然如果再用它来解决这道题是不能实现的。</p> <p>想想当我们在进行<code>a === xxx</code>判断的时候，实际上就是调用了<code>a</code>这个数据而已，也就是说我们要在调用这个数据之前，做一些事情，来达到我们的目的。</p> <p>不知道这样说有没有让你想到些什么 🤔️？或许你和一样会想到<code>Vue</code>大名鼎鼎的数据劫持 😁。</p> <p>想想在<code>Vue2.x</code>中不就是利用了<code>Object.defineProperty()</code>方法重新定义<code>data</code>中的所有属性，那么在这里我们同样也可以利用它来劫持<code>a</code>，修改<code>a</code>变量的<code>get</code>属性。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> value <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>window<span class="token punctuation">,</span> <span class="token string">"a"</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token function">get</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>value<span class="token operator">++</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>a <span class="token operator">===</span> <span class="token number">1</span> <span class="token operator">&amp;&amp;</span> a <span class="token operator">===</span> <span class="token number">2</span> <span class="token operator">&amp;&amp;</span> a <span class="token operator">===</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'成立'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>这里实际就做了这么几件事情：</p> <ul><li>使用<code>Object.defineProperty()</code>方法劫持全局变量<code>window</code>上的属性<code>a</code></li> <li>当每次调用<code>a</code>的时候将<code>value</code>自增，并返回自增后的值</li></ul> <p>（其实我还想着用<code>Proxy</code>来进行数据劫持，代理一下<code>window</code>，将它用<code>new Proxy()</code>处理一下，但是对于<code>window</code>对象好像没有效果...）</p> <p><strong>解法二</strong></p> <p>怎么办 😂，一碰到这种题我又想到了数组...</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>window<span class="token punctuation">,</span> <span class="token string">"a"</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token function">get</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>arr<span class="token punctuation">.</span><span class="token function">shift</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>a <span class="token operator">===</span> <span class="token number">1</span> <span class="token operator">&amp;&amp;</span> a <span class="token operator">===</span> <span class="token number">2</span> <span class="token operator">&amp;&amp;</span> a <span class="token operator">===</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'成立'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>中了<code>shift()</code>的毒...当然，这样也是可以实现的。</p> <p><strong>解法三</strong></p> <p>还有就是<a href="https://juejin.im/user/584c7f44ac502e0069275cd7" target="_blank" rel="noopener noreferrer">EnoYao<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>大佬那里看来的骚操作：</p> <p>原文链接：https://juejin.im/post/5e66dc416fb9a07cab3aaa0a</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> aﾠ <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> ﾠa <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>aﾠ <span class="token operator">==</span> <span class="token number">1</span> <span class="token operator">&amp;&amp;</span> a <span class="token operator">==</span> <span class="token number">2</span> <span class="token operator">&amp;&amp;</span> ﾠa <span class="token operator">==</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"成立"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="_5-5-实现以下代码"><a href="#_5-5-实现以下代码" class="header-anchor">#</a> 5.5  实现以下代码</h3> <p>现需要实现以下函数：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">f</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">/* 代码 */</span>
<span class="token punctuation">}</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">f</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">f</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">3</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">f</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">6</span><span class="token punctuation">)</span>
</code></pre></div><p>首先看到这道题的时候让我想到了题目<code>3.11</code>，只不过这里是有传参的，并且返回值像是一个累计的过程。</p> <p>也就是说会收集每次传递进来的参数然后进行一个累加并返回(这个很容易想到<code>reduce</code>方法)。</p> <p>并且<code>f(1)(2)</code>这样的写法很像是偏应用，函数返回了一个函数。</p> <p>那我们是不是可以在函数<code>f</code>内用一个变量数组来存放参数集合，然后返回一个函数(我命名为<code>inner</code>)，这个<code>inner</code>函数的作用是收集传递进来的参数将它添加到参数集合中。</p> <p>之后就和<code>3.11</code>很像，在每次进行<code>==</code>比较的时候，<code>f</code>返回的<code>inner</code>函数会进行隐式类型转换，也就是会调用<code>inner</code>的<code>valueOf()</code>和<code>toString()</code>方法，那我们只需要重写这两个方法，并返回用<code>reduce</code>累加的参数的和就可以了。</p> <p>代码也很简单，一起来看看：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">f</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> args <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">...</span>arguments<span class="token punctuation">]</span>
  <span class="token keyword">var</span> <span class="token function-variable function">add</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    args<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token operator">...</span>arguments<span class="token punctuation">)</span>
    <span class="token keyword">return</span> add
  <span class="token punctuation">}</span>
  add<span class="token punctuation">.</span><span class="token function-variable function">valueOf</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> args<span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">cur<span class="token punctuation">,</span> pre</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> cur <span class="token operator">+</span> pre
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> add
<span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">f</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">f</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">3</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">f</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">6</span><span class="token punctuation">)</span>
</code></pre></div><p>当然，上面👆的<code>valueOf()</code>换成<code>toString()</code>也是可以的，因为我们已经知道了，对象<code>==</code>比较时类型转换的顺序其实就是先经过<code>valueOf</code>再到<code>toString</code>。</p> <h3 id="_5-6-控制台输入-会怎样"><a href="#_5-6-控制台输入-会怎样" class="header-anchor">#</a> 5.6 控制台输入{}+[]会怎样？</h3> <p>气氛不要这么凝重嘛...让我们最后来看道简单有趣的题。</p> <p>这道有趣的题是从<a href="https://juejin.im/user/5cd2341ce51d456e5c5baba3" target="_blank" rel="noopener noreferrer">LINGLONG<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>的一篇<a href="https://juejin.im/post/5e605528518825495c659769" target="_blank" rel="noopener noreferrer">《【js小知识】[]+ {} =？/{} +[] =?（关于加号的隐式类型转换）》<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>那里看来的。</p> <p>(PS: pick一波玲珑，这位小姐姐的文章写的都挺好的，不过热度都不高，大家可以支持一下呀 😁)</p> <p>OK👌，来看看题目是这样的：</p> <p>在控制台(比如浏览器的控制台)输入:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token operator">+</span><span class="token punctuation">[</span><span class="token punctuation">]</span>
</code></pre></div><p>的结果会是什么 🤔️？</p> <p>咦～这道题上面不是做过了吗(题目<code>5.2</code>里的第三个<code>console.log()</code>)？</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token operator">+</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment">// "[object Object]"</span>
</code></pre></div><p>但是注意这里的题目，是要在控制台输出哦。</p> <p>此时我把这段代码在控制台输出结果发现答案竟然和预期的不一样：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token operator">+</span><span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token number">0</span>
</code></pre></div><p>也就是说<code>{}</code>被忽略了，直接执行了<code>+[]</code>，结果为<code>0</code>。</p> <p>知道原因的我眼泪掉了下来，原来它和之前提到的<code>1.toString()</code>有点像，也是因为<code>JS</code>对于代码解析的原因，在控制台或者终端中，<code>JS</code>会认为大括号<code>{}</code>开头的是一个空的代码块，这样看着里面没有内容就会忽略它了。</p> <p>所以只执行了<code>+[]</code>，将其转换为<code>0</code>。</p> <p>如果我们换个顺序的话就不会有这种问题：</p> <p><img src="https://s.poetries.top/gitee/2020/09/180.png" alt=""></p> <p>为了证实这一点，我们可以把<code>{}</code>当成空对象来调用一些对象的方法，看会有什么效果：</p> <p>（控制台或者终端）</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><p>现在的<code>{}</code>依旧被认为是代码块而不是一个对象，所以会报错：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>Uncaught SyntaxError<span class="token operator">:</span> Unexpected token <span class="token string">'.'</span>
</code></pre></div><p>解决办法可以用一个<code>()</code>将它扩起来：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span>toString
</code></pre></div><p>不过这东西在实际中用的不多，我能想到的一个就是在项目中(比如我用的<code>vue</code>)，然后定义<code>props</code>的时候，如果其中一个属性的默认值你是想要定义为一个空对象的话，就会用到：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token literal-property property">props</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">target</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">type</span><span class="token operator">:</span> Object<span class="token punctuation">,</span>
        <span class="token function-variable function">default</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></div> <!----> <div class="readMore-wrapper"><span class="readMore">阅读全文</span></div>
                    </div>
                            <p>这是一个信息提示框。</p>
                        </div>

                        <div class="note warning">
                            <div class="note-title"><i class="fas fa-exclamation-triangle"></i> 注意</div>
                            <p>这是一个警告提示框。</p>
                        </div>

                        <div class="note success">
                            <div class="note-title"><i class="fas fa-check-circle"></i> 成功</div>
                            <p>这是一个成功提示框。</p>
                        </div>

                        <h2>代码示例</h2>
                        <pre><code class="language-javascript">// 示例代码
function example() {
    console.log('Hello, FrontendHub!');
}
</code></pre>
                    </div>

                    <!-- 文章底部导航 -->
                    <nav class="article-nav">
                        <a href="#" class="prev-article">
                            <i class="fas fa-chevron-left"></i>
                            <span>上一篇</span>
                        </a>
                        <a href="#" class="next-article">
                            <span>下一篇</span>
                            <i class="fas fa-chevron-right"></i>
                        </a>
                    </nav>
                </article>
            </div>
        </div>
    </main>

    <!-- 页脚 -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h4><i class="fas fa-code"></i> FrontendHub</h4>
                    <p>专注于前端技术学习与面试准备</p>
                </div>
                <div class="footer-section">
                    <h4>快速链接</h4>
                    <ul>
                        <li><a href="../../index.html">首页</a></li>
                        <li><a href="../index.html#courses">课程体系</a></li>
                        <li><a href="../index.html#resources">学习资源</a></li>
                    </ul>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2025 FrontendHub. 用于个人学习使用.</p>
            </div>
        </div>
    </footer>

    <!-- 返回顶部按钮 -->
    <button class="back-to-top" id="backToTop">
        <i class="fas fa-arrow-up"></i>
    </button>

    <script src="../../js/main.js"></script>
    <script src="../../js/content.js"></script>
</body>
</html>

