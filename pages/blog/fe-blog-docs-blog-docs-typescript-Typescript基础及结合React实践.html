<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="referrer" content="no-referrer">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Typescript基础及结合React实践 - FrontendHub</title>
    <link rel="stylesheet" href="../../css/style.css">
    <link rel="stylesheet" href="../../css/content.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body class="content-page">
    <!-- 导航栏 -->
    <nav class="navbar">
        <div class="container">
            <div class="nav-brand">
                <a href="../../index.html" style="color: inherit; text-decoration: none; display: flex; align-items: center; gap: 0.5rem;">
                    <i class="fas fa-code"></i>
                    <span>FrontendHub</span>
                </a>
            </div>
            <button class="nav-toggle" id="navToggle">
                <span></span>
                <span></span>
                <span></span>
            </button>
            <ul class="nav-menu" id="navMenu">
                <li><a href="../../index.html">首页</a></li>
                <li><a href="../index.html#features">特色</a></li>
                <li><a href="../index.html#courses">课程</a></li>
                <li><a href="../index.html#resources">资源</a></li>
            </ul>
        </div>
    </nav>

    <!-- 面包屑导航 -->
    <div class="breadcrumb">
        <div class="container">
            <a href="../../index.html"><i class="fas fa-home"></i> 首页</a>
            <i class="fas fa-chevron-right"></i>
            <span>Typescript基础及结合React实践</span>
        </div>
    </div>

    <!-- 主要内容区 -->
    <main class="content-main">
        <div class="container">
            <div class="content-layout">
                <!-- 侧边栏目录 -->
                <aside class="sidebar">
                    <div class="sidebar-sticky">
                        <h3><i class="fas fa-list"></i> 目录</h3>
                        <nav class="toc" id="toc">
                            <!-- 目录将通过JavaScript自动生成 -->
                        </nav>
                    </div>
                </aside>

                <!-- 文章内容 -->
                <article class="article">
                    <header class="article-header">
                        <h1>Typescript基础及结合React实践</h1>
                        <div class="article-meta">
                            <span><i class="far fa-calendar"></i> 更新时间：2025-12-23</span>
                            <span><i class="far fa-clock"></i> 阅读时长：约 15 分钟</span>
                        </div>
                    </header>

                    <div class="article-content">
<div class="content__default"><h1 id="第一部分-typescript基础"><a href="#第一部分-typescript基础" class="header-anchor">#</a> 第一部分 Typescript基础</h1> <h2 id="一、typescript-安装"><a href="#一、typescript-安装" class="header-anchor">#</a> 一、typescript 安装</h2> <div class="language-js extra-class"><pre class="language-js"><code>npm i typescript <span class="token operator">-</span>g
</code></pre></div><blockquote><p>全局安装完成后，我们新建一个<code>hello.ts</code>的<code>ts</code>文件</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// hello.ts内容</span>
<span class="token keyword">let</span> a <span class="token operator">=</span> <span class="token string">"poet"</span>
</code></pre></div><blockquote><p>接下来我们在命令行输入<code>tsc hello.ts</code>来编译这个<code>ts</code>文件，然后会在同级目录生成一个编译好了的<code>hello.js</code>文件</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// hello.js内容</span>
<span class="token keyword">var</span> <span class="token operator">=</span> <span class="token string">"poet"</span>
</code></pre></div><blockquote><p>那么我们每次都要输<code>tsc hello.ts</code>命令来编译，这样很麻烦，能否让它自动编译？答案是可以的，使用<code>vscode</code>来开发，需要配置一下<code>vscode</code>就可以。</p></blockquote> <blockquote><p>首先我们在命令行执行<code>tsc --init</code>来生成配置文件，然后我们在目录下看到生成了一个<code>tsconfig.json</code>文件</p></blockquote> <p><img src="https://s.poetries.top/gitee/2019/10/545.png" alt=""></p> <blockquote><p>这个<code>json</code>文件里有很多选项</p></blockquote> <ul><li><code>target</code>是选择编译到什么语法</li> <li><code>module</code>则是模块类型</li> <li><code>outDir</code>则是输出目录，可以指定这个参数到指定目录</li></ul> <blockquote><p>更多细节 https://zhongsp.gitbooks.io/typescript-handbook/content/doc/handbook/tsconfig.json.html</p></blockquote> <blockquote><p>接下来我们需要开启监控了，在<code>vscode</code>任务栏中</p></blockquote> <p><img src="https://s.poetries.top/gitee/2019/10/546.png" alt=""></p> <p><strong>Typescript在线编辑器</strong></p> <blockquote><p>建议使用在线编辑器练习 http://www.typescriptlang.org/play/index.html</p></blockquote> <h2 id="二、数据类型"><a href="#二、数据类型" class="header-anchor">#</a> 二、数据类型</h2> <blockquote><p><code>js</code>是弱类型语言，强弱类语言有什么区别呢？<code>typescript</code>最大的优点就是类型检查，可以帮你检查你定义的类型和赋值的类型。</p></blockquote> <h3 id="_2-1-布尔类型boolean"><a href="#_2-1-布尔类型boolean" class="header-anchor">#</a> 2.1 布尔类型boolean</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 在js中，定义isFlag为true，为布尔类型boolean</span>
<span class="token keyword">let</span> isFlag <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
<span class="token comment">// 但是我们也可以重新给它赋值为字符串</span>
isFlag <span class="token operator">=</span> <span class="token string">"hello swr"</span><span class="token punctuation">;</span>

<span class="token comment">// 在ts中，定义isFlag为true，为布尔类型boolean</span>
<span class="token comment">// 在变量名后加冒号和类型，如  :boolean</span>
<span class="token keyword">let</span> <span class="token literal-property property">isFlag</span><span class="token operator">:</span>boolean <span class="token operator">=</span> <span class="token boolean">true</span>
<span class="token comment">// 重新赋值到字符串类型会报错</span>
isFlag <span class="token operator">=</span> <span class="token string">"hello swr"</span> 

<span class="token comment">// 在java中，一般是这样定义，要写变量名也要写类型名</span>
<span class="token comment">// int a = 10; </span>
<span class="token comment">// string name = "poetries"</span>
</code></pre></div><h3 id="_2-2-数字类型number"><a href="#_2-2-数字类型number" class="header-anchor">#</a> 2.2 数字类型number</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> <span class="token literal-property property">age</span><span class="token operator">:</span>number <span class="token operator">=</span> <span class="token number">28</span><span class="token punctuation">;</span>
age <span class="token operator">=</span> <span class="token number">29</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="_2-3-字符串类型string"><a href="#_2-3-字符串类型string" class="header-anchor">#</a> 2.3 字符串类型string</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> <span class="token literal-property property">name</span><span class="token operator">:</span>string <span class="token operator">=</span> <span class="token string">"poetries"</span>
name <span class="token operator">=</span> <span class="token string">"iamswr"</span>
</code></pre></div><blockquote><p>以上<code>boolean</code>、<code>number</code>、<code>string</code>类型有个共性，就是可以通过<code>typeof</code>来获取到是什么类型，是基本数据类型</p></blockquote> <p>那么复杂的数据类型是怎么处理的呢？</p> <h3 id="_2-4-数组-array"><a href="#_2-4-数组-array" class="header-anchor">#</a> 2.4 数组 Array</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 数组</span>
<span class="token comment">// 这是一个字符串数组，只能往里面放字符串，写别的类型会报错</span>
<span class="token keyword">let</span> <span class="token literal-property property">persion</span><span class="token operator">:</span>string<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'poetries'</span><span class="token punctuation">,</span> <span class="token string">'jing'</span><span class="token punctuation">]</span>
<span class="token comment">// 另一个写法 </span>
<span class="token keyword">let</span> <span class="token literal-property property">persions</span><span class="token operator">:</span>Array<span class="token operator">&lt;</span>string<span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'poetries'</span><span class="token punctuation">,</span> <span class="token string">'jing'</span><span class="token punctuation">]</span>

<span class="token comment">// 如果数组里放对象呢</span>
<span class="token keyword">let</span> <span class="token literal-property property">persionObject</span><span class="token operator">:</span>Array<span class="token operator">&lt;</span>object<span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">'poetries'</span><span class="token punctuation">,</span><span class="token literal-property property">age</span><span class="token operator">:</span><span class="token number">22</span><span class="token punctuation">}</span><span class="token punctuation">]</span>
<span class="token keyword">let</span> <span class="token literal-property property">persionObjects</span><span class="token operator">:</span>object<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">'poetries'</span><span class="token punctuation">,</span><span class="token literal-property property">age</span><span class="token operator">:</span><span class="token number">22</span><span class="token punctuation">}</span><span class="token punctuation">]</span>

<span class="token comment">// 在数组中放string、number、boolean、object</span>
<span class="token keyword">let</span> <span class="token literal-property property">arr</span><span class="token operator">:</span>Array<span class="token operator">&lt;</span>number<span class="token operator">|</span>object<span class="token operator">|</span>string<span class="token operator">|</span>boolean<span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">22</span><span class="token punctuation">,</span> <span class="token string">'test'</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">'poetries'</span><span class="token punctuation">}</span><span class="token punctuation">]</span>

<span class="token comment">// 数组中放什么都可以</span>
<span class="token keyword">let</span> <span class="token literal-property property">arrAny</span><span class="token operator">:</span>Array<span class="token operator">&lt;</span>any<span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'test'</span><span class="token punctuation">,</span><span class="token number">12</span><span class="token punctuation">,</span><span class="token boolean">false</span><span class="token punctuation">]</span>
</code></pre></div><h3 id="_2-5-元组类型tuple"><a href="#_2-5-元组类型tuple" class="header-anchor">#</a> 2.5 元组类型tuple</h3> <ul><li>什么是元组类型？其实元组是数组的一种。</li> <li>有点类似解构赋值，但是又不完全是解构赋值，比如元组类型必须一一对应上</li> <li>元组类型是一个不可变的数组，长度、类型是不可变的</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 元组类型tuple</span>
<span class="token comment">// 什么是元组类型？其实元组是数组的一种</span>
<span class="token keyword">let</span> <span class="token literal-property property">per</span> <span class="token operator">:</span><span class="token punctuation">[</span>string<span class="token punctuation">,</span>number<span class="token punctuation">,</span>object<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'poetries'</span><span class="token punctuation">,</span><span class="token number">22</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token literal-property property">love</span><span class="token operator">:</span> <span class="token string">'coding'</span><span class="token punctuation">}</span><span class="token punctuation">]</span>
</code></pre></div><h3 id="_2-6-枚举类型enum"><a href="#_2-6-枚举类型enum" class="header-anchor">#</a> 2.6 枚举类型enum</h3> <blockquote><p>什么是枚举？枚举有点类似一一列举，一个一个数出来。一般用于值是某几个固定的值</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 枚举类型enum</span>

<span class="token keyword">enum</span> sex <span class="token punctuation">{</span>
    <span class="token constant">BOY</span><span class="token operator">=</span><span class="token string">'男孩'</span><span class="token punctuation">,</span>
    <span class="token constant">GIRL</span><span class="token operator">=</span><span class="token string">'女孩'</span>
<span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>sex<span class="token punctuation">)</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 转化为es5语法</span>
<span class="token comment">// 我们顺便看看实现的原理</span>

<span class="token keyword">var</span> sex<span class="token punctuation">;</span>
<span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">sex</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token comment">// 首先这里是一个自执行函数</span>
<span class="token comment">// 并且把sex定义为对象，传参进给自执行函数</span>
<span class="token comment">// 然后给sex对象添加属性并且赋值</span>
    sex<span class="token punctuation">[</span><span class="token string">"BOY"</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">"\u7537\u5B69"</span><span class="token punctuation">;</span>
    sex<span class="token punctuation">[</span><span class="token string">"GIRL"</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">"\u5973\u5B69"</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span>sex <span class="token operator">||</span> <span class="token punctuation">(</span>sex <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>sex<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><blockquote><p>比如我们实际项目中，特别是商城类，订单会存在很多状态流转，那么非常适合用枚举</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">enum</span> orderStatus <span class="token punctuation">{</span>
    <span class="token constant">WAIT_FOR_PAY</span> <span class="token operator">=</span> <span class="token string">"待支付"</span><span class="token punctuation">,</span>
    <span class="token constant">UNDELIVERED</span> <span class="token operator">=</span> <span class="token string">"完成支付，待发货"</span><span class="token punctuation">,</span>
    <span class="token constant">DELIVERED</span> <span class="token operator">=</span> <span class="token string">"已发货"</span><span class="token punctuation">,</span>
    <span class="token constant">COMPLETED</span> <span class="token operator">=</span> <span class="token string">"已确认收货"</span>
<span class="token punctuation">}</span>
</code></pre></div><blockquote><p>到这里，我们会有一个疑虑，为什么我们不这样写呢？</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> orderStatus2 <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token constant">WAIT_FOR_PAY</span> <span class="token operator">:</span> <span class="token string">"待支付"</span><span class="token punctuation">,</span>
    <span class="token operator">...</span>
<span class="token punctuation">}</span>
</code></pre></div><blockquote><p>如果我们直接写对象的键值对方式，是可以在外部修改这个值的，而我们通过<code>enum</code>则不能修改定义好的值了</p></blockquote> <h3 id="_2-7-任意类型-any"><a href="#_2-7-任意类型-any" class="header-anchor">#</a> 2.7 任意类型 any</h3> <blockquote><p><code>any</code>有好处也有坏处，特别是前端，很多时候写类型的时候，几乎分不清楚类型，任意去写，写起来很爽，但是对于后续的重构、迭代等是非常不友好的，会暴露出很多问题，某种程度来说，<code>any</code>类型就是放弃了类型检查了</p></blockquote> <p>比如我们有这样一个场景，就是需要获取某一个dom节点</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> btn <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'btn'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
btn<span class="token punctuation">.</span>style<span class="token punctuation">.</span>color <span class="token operator">=</span> <span class="token string">"blue"</span><span class="token punctuation">;</span>
</code></pre></div><blockquote><p>此时我们发现在<code>ts</code>中会报错</p></blockquote> <p><img src="https://s.poetries.top/gitee/2019/10/547.png" alt=""></p> <ul><li>因为我们取这个<code>dom</code>节点，有可能取到，也有可能没取到，当没取到的时候，相当于是<code>null</code>，是没有<code>style</code>这个属性的。</li> <li>那么我们可以给它添加一个类型为<code>any</code></li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 添加一个any类型，此时就不会报错了，但是也相当于放弃了类型检查了</span>
<span class="token keyword">let</span> <span class="token literal-property property">btn</span><span class="token operator">:</span>any <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'btn'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
btn<span class="token punctuation">.</span>style<span class="token punctuation">.</span>color <span class="token operator">=</span> <span class="token string">"blue"</span><span class="token punctuation">;</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 可以赋值任何类型的值</span>
<span class="token comment">// 跟以前我们var let声明的一模一样的</span>
<span class="token keyword">let</span> <span class="token literal-property property">person</span><span class="token operator">:</span>any <span class="token operator">=</span> <span class="token string">"poetries"</span>
person <span class="token operator">=</span> <span class="token number">22</span>
</code></pre></div><h3 id="_2-8-null-undefined类型"><a href="#_2-8-null-undefined类型" class="header-anchor">#</a> 2.8 null undefined类型</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// (string | number | null | undefined) 相当于这几种类型</span>
<span class="token comment">// 是 string 或 number 或 null 或 undefined</span>

<span class="token keyword">let</span> <span class="token literal-property property">str</span><span class="token operator">:</span><span class="token punctuation">(</span>string <span class="token operator">|</span> number <span class="token operator">|</span> <span class="token keyword">null</span> <span class="token operator">|</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span>

str <span class="token operator">=</span> <span class="token string">'poetries'</span>
str <span class="token operator">=</span> <span class="token number">28</span>
str <span class="token operator">=</span> <span class="token keyword">null</span> 
str <span class="token operator">=</span> <span class="token keyword">undefined</span>
</code></pre></div><h3 id="_2-9-void类型"><a href="#_2-9-void类型" class="header-anchor">#</a> 2.9 void类型</h3> <blockquote><p><code>void</code>表示没有任何类型，一般是定义函数没有返回值</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// void 不能再函数里写return</span>
<span class="token comment">// 怎么理解叫没有返回值呢？此时我们给函数return一个值</span>
<span class="token keyword">function</span> <span class="token function">say</span><span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">name</span><span class="token operator">:</span>string</span><span class="token punctuation">)</span><span class="token operator">:</span><span class="token keyword">void</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'hello:'</span><span class="token punctuation">,</span> name<span class="token punctuation">)</span>
    <span class="token comment">// return "ok" 会报错</span>
    <span class="token keyword">return</span> <span class="token keyword">undefined</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token comment">//不会报错</span>
<span class="token punctuation">}</span>
<span class="token function">say</span><span class="token punctuation">(</span><span class="token string">'poetries'</span><span class="token punctuation">)</span>

<span class="token comment">// 返回一个字符串类型</span>
<span class="token keyword">function</span> <span class="token function">say1</span><span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">name</span><span class="token operator">:</span>string</span><span class="token punctuation">)</span><span class="token operator">:</span>string <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token string">'ok'</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="_2-10-never类型"><a href="#_2-10-never类型" class="header-anchor">#</a> 2.10 never类型</h3> <blockquote><p>这个用得很少，一般是用于抛出异常</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">error</span><span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">message</span><span class="token operator">:</span>string</span><span class="token punctuation">)</span><span class="token operator">:</span>never <span class="token punctuation">{</span>
    <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token function">error</span><span class="token punctuation">(</span><span class="token string">'errorMsg'</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="_2-11-我们要搞明白any、never、void"><a href="#_2-11-我们要搞明白any、never、void" class="header-anchor">#</a> 2.11 我们要搞明白any、never、void</h3> <ul><li><code>any</code>是任意的值</li> <li><code>void</code>是不能有任何值</li> <li><code>never</code>永远不会有返回值</li></ul> <blockquote><p><code>any</code>比较好理解，就是任何值都可以</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> <span class="token literal-property property">str</span><span class="token operator">:</span>any <span class="token operator">=</span> <span class="token string">"hello poetries"</span>
str <span class="token operator">=</span> <span class="token number">28</span>
str <span class="token operator">=</span> <span class="token boolean">true</span>
</code></pre></div><blockquote><p><code>void</code>不能有任何值(返回值)</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">say</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span><span class="token keyword">void</span> <span class="token punctuation">{</span>
  
<span class="token punctuation">}</span>
</code></pre></div><blockquote><p><code>never</code>则不好理解，什么叫永远不会有返回值？</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 除了上面举例的抛出异常以外，我们看一下这个例子</span>
<span class="token comment">// 这个loop函数，一旦开始执行，就永远不会结束</span>
<span class="token comment">// 可以看出在while中，是死循环，永远都不会有返回值，包括undefined</span>

<span class="token keyword">function</span> <span class="token function">loop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span>never <span class="token punctuation">{</span>
    <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"陷入死循环啦"</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token function">loop</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment">// 包括比如JSON.parse也是使用这种 never | any</span>
<span class="token keyword">function</span> <span class="token function">parse</span><span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">str</span><span class="token operator">:</span>string</span><span class="token punctuation">)</span><span class="token operator">:</span><span class="token punctuation">(</span>never <span class="token operator">|</span> any<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token comment">// 首先在正常情况下，我们传一个JSON格式的字符串，是可以正常得到一个JSON对象的</span>
<span class="token keyword">let</span> json <span class="token operator">=</span> <span class="token function">parse</span><span class="token punctuation">(</span><span class="token string">'{"name":"poetries"}'</span><span class="token punctuation">)</span>
<span class="token comment">// 但是有时候，传进去的不一定是JSON格式的字符串，那么就会抛出异常</span>
<span class="token comment">// 此时就需要never了</span>
<span class="token keyword">let</span> json <span class="token operator">=</span> <span class="token function">parse</span><span class="token punctuation">(</span><span class="token string">"iamswr"</span><span class="token punctuation">)</span>
</code></pre></div><blockquote><p>也就是说，当一个函数执行的时候，被抛出异常打断了，导致没有返回值或者该函数是一个死循环，永远没有返回值，这样叫做永远不会有返回值。</p></blockquote> <p>实际开发中，是<code>never</code>和联合类型来一起用，比如</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">say</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span><span class="token punctuation">(</span>never <span class="token operator">|</span> string<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token string">"ok"</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="三、函数"><a href="#三、函数" class="header-anchor">#</a> 三、函数</h2> <h3 id="_3-1-函数定义"><a href="#_3-1-函数定义" class="header-anchor">#</a> 3.1 函数定义</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">sayHello</span><span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">name</span><span class="token operator">:</span>string</span><span class="token punctuation">)</span><span class="token operator">:</span><span class="token keyword">void</span> <span class="token punctuation">{</span>
    
<span class="token punctuation">}</span>
</code></pre></div><h3 id="_3-2-函数参数处理"><a href="#_3-2-函数参数处理" class="header-anchor">#</a> 3.2 函数参数处理</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 函数是这样定义的</span>
<span class="token comment">// 形参和实参一一对应，完全一样</span>
<span class="token keyword">function</span> <span class="token function">sayHello</span><span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">name</span><span class="token operator">:</span>string<span class="token punctuation">,</span><span class="token literal-property property">age</span><span class="token operator">:</span>number</span><span class="token punctuation">)</span><span class="token operator">:</span><span class="token keyword">void</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'hello'</span><span class="token punctuation">,</span> name<span class="token punctuation">,</span> age<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token function">sayHello</span><span class="token punctuation">(</span><span class="token string">'poetries'</span><span class="token punctuation">,</span><span class="token number">22</span><span class="token punctuation">)</span>

<span class="token comment">// 形参和实参要完全一样，如想不一样，则需要配置可选参数，可选参数放在后面</span>
<span class="token comment">// 可选参数，用 ？ 处理，只能放在后面</span>
<span class="token keyword">function</span> <span class="token function">sayHelloToYou</span><span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">name</span><span class="token operator">:</span>string<span class="token punctuation">,</span>age<span class="token operator">?</span><span class="token operator">:</span>number</span><span class="token punctuation">)</span><span class="token operator">:</span><span class="token keyword">void</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'hello'</span><span class="token punctuation">,</span> name<span class="token punctuation">,</span> age<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token function">sayHelloToYou</span><span class="token punctuation">(</span><span class="token string">'poetries'</span><span class="token punctuation">)</span>

<span class="token comment">// 那么如何设置默认参数呢？</span>

<span class="token keyword">function</span> <span class="token function">ajax</span><span class="token punctuation">(</span>url<span class="token operator">:</span>string<span class="token punctuation">,</span><span class="token literal-property property">method</span><span class="token operator">:</span>string <span class="token operator">=</span> <span class="token string">'GET'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> method<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// 那么如何设置剩余参数呢？可以利用扩展运算符</span>

<span class="token keyword">function</span> <span class="token function">sum</span><span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>args<span class="token operator">:</span>Array<span class="token operator">&lt;</span>number<span class="token operator">&gt;</span></span><span class="token punctuation">)</span><span class="token operator">:</span>number <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">eval</span><span class="token punctuation">(</span>args<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">"+"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">let</span> <span class="token literal-property property">total</span><span class="token operator">:</span>number <span class="token operator">=</span> <span class="token function">sum</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>total<span class="token punctuation">)</span>
</code></pre></div><h3 id="_3-3-函数重载"><a href="#_3-3-函数重载" class="header-anchor">#</a> 3.3 函数重载</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 那么如何实现函数重载呢？函数重载是java中非常有名的，在java中函数的重载，是指两个或者两个以上的同名函数，参数的个数和类型不一样</span>

<span class="token comment">// 比如我们现在有两个同名函数</span>
<span class="token comment">// function eating(name:string) {</span>
    
<span class="token comment">// }</span>
<span class="token comment">// function eating(name:string,age:number) {</span>
    
<span class="token comment">// }</span>
<span class="token comment">// 那么我想达到一个效果</span>
<span class="token comment">// 当我传参数name时，执行name:string这个函数</span>
<span class="token comment">// 当我传参数name和age时，执行name:string,age:number这个函数</span>
<span class="token comment">// 此时该怎么办？</span>

<span class="token comment">// 接下来看一下typescript中的函数重载</span>

<span class="token comment">// 首先声明两个函数名一样的函数</span>
<span class="token keyword">function</span> <span class="token function">eating</span><span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">name</span><span class="token operator">:</span> string</span><span class="token punctuation">)</span><span class="token operator">:</span><span class="token keyword">void</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">eating</span><span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">name</span><span class="token operator">:</span> number</span><span class="token punctuation">)</span><span class="token operator">:</span><span class="token keyword">void</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">eating</span><span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">name</span><span class="token operator">:</span>any</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token function">eating</span><span class="token punctuation">(</span><span class="token string">"hello poetries"</span><span class="token punctuation">)</span>
<span class="token function">eating</span><span class="token punctuation">(</span><span class="token number">22</span><span class="token punctuation">)</span>

<span class="token comment">// 在typescript中主要体现是同一个同名函数提供多个函数类型定义，函数实际上就只有一个，就是拥有函数体那个，如果想根据传入值类型的不一样执行不同逻辑，则需要在这个函数里面进行一个类型判断。</span>

<span class="token comment">// 那么这个函数重载有什么作用呢？其实在ts中，函数重载只是用来限制参数的个数和类型，用来检查类型的，而且重载不能拆开几个函数，这一点和java的处理是不一样的，需要注意。</span>
</code></pre></div><h2 id="四、类"><a href="#四、类" class="header-anchor">#</a> 四、类</h2> <h3 id="_4-1-定义一个类"><a href="#_4-1-定义一个类" class="header-anchor">#</a> 4.1 定义一个类</h3> <blockquote><p>如何定义一个类？</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// ts 写法</span>
<span class="token comment">// 跟es6非常像 没有太大区别</span>
<span class="token keyword">class</span> <span class="token class-name">Persion</span> <span class="token punctuation">{</span>
    <span class="token comment">// 这里声明的变量 是实例上的属性</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> string<span class="token punctuation">;</span>
    <span class="token literal-property property">age</span><span class="token operator">:</span>number<span class="token punctuation">;</span>

    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">name</span><span class="token operator">:</span> string<span class="token punctuation">,</span> <span class="token literal-property property">age</span><span class="token operator">:</span> number</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token comment">// this.name和this.age 必须先在前面声明好类型</span>
        <span class="token comment">// name: string</span>
        <span class="token comment">// age: number</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 原型方法</span>
    <span class="token function">say</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span>string <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">'hello poetries'</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> p <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Persion</span><span class="token punctuation">(</span><span class="token string">'poetries'</span><span class="token punctuation">,</span> <span class="token number">22</span><span class="token punctuation">)</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 那么转为es5呢？</span>

<span class="token keyword">var</span> Persion <span class="token operator">=</span> <span class="token comment">/** @class */</span> <span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">function</span> <span class="token function">Persion</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> age</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// this.name和this.age 必须先在前面声明好类型</span>
        <span class="token comment">// name: string</span>
        <span class="token comment">// age: number</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 原型方法</span>
    <span class="token class-name">Persion</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">say</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">'hello poetries'</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> Persion<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> p <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Persion</span><span class="token punctuation">(</span><span class="token string">'poetries'</span><span class="token punctuation">,</span> <span class="token number">22</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="_4-2-类的继承"><a href="#_4-2-类的继承" class="header-anchor">#</a> 4.2 类的继承</h3> <div class="language-js extra-class"><pre class="language-js"><code>
<span class="token comment">// 和es6也是差不多</span>
<span class="token keyword">class</span> <span class="token class-name">Parent</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> string<span class="token punctuation">;</span>
    <span class="token literal-property property">age</span><span class="token operator">:</span> number<span class="token punctuation">;</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">name</span><span class="token operator">:</span>string<span class="token punctuation">,</span> <span class="token literal-property property">age</span><span class="token operator">:</span> number</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token function">say</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span>string<span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">'hello poetries'</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">Child</span> <span class="token keyword">extends</span> <span class="token class-name">Parent</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">childName</span><span class="token operator">:</span> string<span class="token punctuation">;</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">name</span><span class="token operator">:</span> string<span class="token punctuation">,</span><span class="token literal-property property">age</span><span class="token operator">:</span>number<span class="token punctuation">,</span><span class="token literal-property property">childName</span><span class="token operator">:</span>string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span>age<span class="token punctuation">)</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>childName <span class="token operator">=</span> childName
    <span class="token punctuation">}</span>
    <span class="token function">childSay</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span>string <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>childName
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">let</span> child <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Child</span><span class="token punctuation">(</span><span class="token string">'poetries'</span><span class="token punctuation">,</span> <span class="token number">22</span><span class="token punctuation">,</span> <span class="token string">'静观流叶'</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>child<span class="token punctuation">)</span>
</code></pre></div><h3 id="_4-3-类的修饰符"><a href="#_4-3-类的修饰符" class="header-anchor">#</a> 4.3 类的修饰符</h3> <ul><li><code>public</code>公开的，可以供自己、子类以及其它类访问</li> <li><code>protected</code>受保护的，可以供自己、子类访问，但是其他就访问不了</li> <li><code>private</code>私有的，只有自己访问，而子类、其他都访问不了</li></ul> <div class="language-js extra-class"><pre class="language-js"><code>
<span class="token keyword">class</span> <span class="token class-name">Parents</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token literal-property property">name</span><span class="token operator">:</span>string<span class="token punctuation">;</span>
    <span class="token keyword">protected</span> <span class="token literal-property property">age</span><span class="token operator">:</span>number<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token literal-property property">money</span><span class="token operator">:</span>number<span class="token punctuation">;</span>

   <span class="token comment">// 简写</span>
   <span class="token comment">// constructor(public name:string,protected age:number,private money:number)</span>

   <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">name</span><span class="token operator">:</span> string<span class="token punctuation">,</span> <span class="token literal-property property">age</span><span class="token operator">:</span>number<span class="token punctuation">,</span><span class="token literal-property property">money</span><span class="token operator">:</span>number</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
       <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
       <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">;</span>
       <span class="token keyword">this</span><span class="token punctuation">.</span>money <span class="token operator">=</span> money<span class="token punctuation">;</span>
   <span class="token punctuation">}</span>
   <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span>string <span class="token punctuation">{</span>
       <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name
   <span class="token punctuation">}</span>
   <span class="token function">getAge</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span>number<span class="token punctuation">{</span>
       <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>age
   <span class="token punctuation">}</span>
   <span class="token function">getMoney</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span>number<span class="token punctuation">{</span>
       <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>money
   <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">let</span> pare <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Parents</span><span class="token punctuation">(</span><span class="token string">'poetries'</span><span class="token punctuation">,</span> <span class="token number">22</span><span class="token punctuation">,</span> <span class="token number">3000</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>pare<span class="token punctuation">.</span>name<span class="token punctuation">)</span>
<span class="token comment">// console.log(pare.age)  报错</span>
<span class="token comment">// console.log(pare.money) 报错</span>

</code></pre></div><h3 id="_4-4-静态属性、静态方法"><a href="#_4-4-静态属性、静态方法" class="header-anchor">#</a> 4.4 静态属性、静态方法</h3> <p>跟<code>es6</code>差不多</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">Person2</span> <span class="token punctuation">{</span>
    <span class="token comment">// 类的静态属性</span>
    <span class="token keyword">static</span> name1 <span class="token operator">=</span> <span class="token string">'poetries'</span>

    <span class="token comment">// 类的静态方法</span>
    <span class="token keyword">static</span> <span class="token function">say</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'hello poetries'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">let</span> per2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person2</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
Person2<span class="token punctuation">.</span><span class="token function">say</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// hello poetries</span>
<span class="token comment">// per2.say() 报错</span>
</code></pre></div><h3 id="_4-5-抽象类"><a href="#_4-5-抽象类" class="header-anchor">#</a> 4.5 抽象类</h3> <ul><li>抽象类和方法，有点类似抽取共性出来，但是又不是具体化，比如说，世界上的动物都需要吃东西，那么会把吃东西这个行为，抽象出来</li> <li>如果子类继承的是一个抽象类，子类必须实现父类里的抽象方法，不然的话不能实例化，会报错</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">/</span> 关键字 abstract抽象
<span class="token comment">// 定义抽象类</span>

abstract <span class="token keyword">class</span> <span class="token class-name">Animal</span> <span class="token punctuation">{</span>
    <span class="token comment">// 实际上是使用了public修饰符</span>
    <span class="token comment">// 如果添加private修饰符会报错</span>
    abstract <span class="token function">eat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span><span class="token keyword">void</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 需要注意的是这个Animal是不能实例化的</span>
<span class="token comment">// let animal = new Animal() // 报错</span>

<span class="token comment">// // 抽象类的抽象方法，意思就是，需要在继承这个抽象类的子类中</span>
<span class="token comment">// 实现这个抽象方法，不然会报错</span>
<span class="token comment">// 报错，因为在子类中没有实现eat抽象方法</span>
<span class="token comment">// class Person4 extends Animal{</span>
<span class="token comment">//     test(){</span>
<span class="token comment">//         console.log("吃米饭")</span>
<span class="token comment">//     }</span>
<span class="token comment">// }</span>

<span class="token comment">// Dog类继承Animal类后并且实现了抽象方法eat，所以不会报错</span>
<span class="token keyword">class</span> <span class="token class-name">Dog</span> <span class="token keyword">extends</span> <span class="token class-name">Animal</span><span class="token punctuation">{</span>
    <span class="token function">eat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"吃骨头"</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="五、接口"><a href="#五、接口" class="header-anchor">#</a> 五、接口</h2> <blockquote><p>这里的接口，主要是一种规范，规范某些类必须遵守规范，和抽象类有点类似，但是不局限于类，还有属性、函数等</p></blockquote> <h3 id="_5-1-接口规范对象"><a href="#_5-1-接口规范对象" class="header-anchor">#</a> 5.1 接口规范对象</h3> <div class="language-js extra-class"><pre class="language-js"><code>
<span class="token comment">//假设我们需要获取用户信息</span>
<span class="token comment">// 我们通过这样的方式 规范必须传name和age的值</span>
<span class="token keyword">function</span> <span class="token function">getUserInfo</span><span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">user</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token literal-property property">name</span><span class="token operator">:</span>string<span class="token punctuation">,</span><span class="token literal-property property">age</span><span class="token operator">:</span>number<span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>user<span class="token punctuation">.</span>name<span class="token punctuation">,</span>user<span class="token punctuation">.</span>age<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token function">getUserInfo</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'poetries'</span><span class="token punctuation">,</span> <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">22</span><span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// 这样看挺完美的， 那么问题就出现了，如果我另外还有一个方法，也是需要这个规范呢？</span>

<span class="token keyword">function</span> <span class="token function">getUserInfo1</span><span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">user</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token literal-property property">name</span><span class="token operator">:</span>string<span class="token punctuation">,</span><span class="token literal-property property">age</span><span class="token operator">:</span>number<span class="token punctuation">}</span></span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>user<span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>user<span class="token punctuation">.</span>age<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">getInfo</span><span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">user</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token literal-property property">name</span><span class="token operator">:</span>string<span class="token punctuation">,</span><span class="token literal-property property">age</span><span class="token operator">:</span>number<span class="token punctuation">}</span></span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>user<span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>user<span class="token punctuation">.</span>age<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token function">getUserInfo1</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">"poetries"</span><span class="token punctuation">,</span><span class="token literal-property property">age</span><span class="token operator">:</span><span class="token number">22</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token function">getInfo</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">"poetries"</span><span class="token punctuation">,</span><span class="token literal-property property">age</span><span class="token operator">:</span><span class="token number">22</span><span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// 可以看出，函数getUserInfo和getInfo都遵循同一个规范，那么我们有办法对这个规范复用吗？</span>

<span class="token comment">// 首先把需要复用的规范，写到接口 关键字interface</span>
<span class="token keyword">interface</span> <span class="token class-name">infoInterface</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> string<span class="token punctuation">,</span>
    <span class="token literal-property property">age</span><span class="token operator">:</span> number<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// 然后把这个接口 替换到我们需要复用的地方</span>
<span class="token keyword">function</span> <span class="token function">getUserInfo2</span><span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">user</span><span class="token operator">:</span>infoInterface</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>user<span class="token punctuation">.</span>name<span class="token punctuation">,</span>user<span class="token punctuation">.</span>age<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">getInfo2</span><span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">user</span><span class="token operator">:</span>infoInterface</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>user<span class="token punctuation">.</span>name<span class="token punctuation">,</span>user<span class="token punctuation">.</span>age<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token function">getUserInfo2</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">"poetries"</span><span class="token punctuation">,</span><span class="token literal-property property">age</span><span class="token operator">:</span><span class="token number">22</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token function">getInfo2</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">"poetries"</span><span class="token punctuation">,</span><span class="token literal-property property">age</span><span class="token operator">:</span><span class="token number">22</span><span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// 那么有些参数可传可不传，该怎么处理呢？</span>

<span class="token keyword">interface</span> <span class="token class-name">infoInterface2</span><span class="token punctuation">{</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> string<span class="token punctuation">;</span>
    <span class="token literal-property property">age</span><span class="token operator">:</span> number<span class="token punctuation">;</span>
    city<span class="token operator">?</span><span class="token operator">:</span>string<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">getUserInfo3</span><span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">user</span><span class="token operator">:</span>infoInterface2</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>user<span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>user<span class="token punctuation">.</span>age<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>user<span class="token punctuation">.</span>city<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">getInfo3</span><span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">user</span><span class="token operator">:</span>infoInterface</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>user<span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>user<span class="token punctuation">.</span>age<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token function">getUserInfo3</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">"poetries"</span><span class="token punctuation">,</span><span class="token literal-property property">age</span><span class="token operator">:</span><span class="token number">22</span><span class="token punctuation">,</span><span class="token literal-property property">city</span><span class="token operator">:</span><span class="token string">"深圳"</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token function">getInfo3</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">"iamswr"</span><span class="token punctuation">,</span><span class="token literal-property property">age</span><span class="token operator">:</span><span class="token number">22</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="_5-2-接口规范函数"><a href="#_5-2-接口规范函数" class="header-anchor">#</a> 5.2 接口规范函数</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 对一个函数的参数和返回值进行规范</span>
<span class="token keyword">interface</span> <span class="token class-name">mytotal</span> <span class="token punctuation">{</span>
    <span class="token comment">// 左侧是函数的参数，右侧是函数的返回类型</span>
    <span class="token punctuation">(</span>a<span class="token operator">:</span>number<span class="token punctuation">,</span><span class="token literal-property property">b</span><span class="token operator">:</span>number<span class="token punctuation">)</span><span class="token operator">:</span>number<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> <span class="token literal-property property">totalSum</span><span class="token operator">:</span><span class="token function-variable function">mytotal</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">a</span><span class="token operator">:</span>number<span class="token punctuation">,</span><span class="token literal-property property">b</span><span class="token operator">:</span>number</span><span class="token punctuation">)</span><span class="token operator">:</span>number <span class="token punctuation">{</span>
    <span class="token keyword">return</span> a <span class="token operator">+</span> b
<span class="token punctuation">}</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">totalSum</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="_5-3-接口规范数组"><a href="#_5-3-接口规范数组" class="header-anchor">#</a> 5.3 接口规范数组</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">interface</span> <span class="token class-name">userInterface</span> <span class="token punctuation">{</span>
    <span class="token comment">// index为数组索引 类型是number</span>
    <span class="token comment">// 右边是数组里为字符串的数组成员</span>
    <span class="token punctuation">[</span>index<span class="token operator">:</span> number<span class="token punctuation">]</span><span class="token operator">:</span> string<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">let</span> <span class="token literal-property property">arrTest</span><span class="token operator">:</span> userInterface <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'poetries'</span><span class="token punctuation">,</span> <span class="token string">'静观流叶'</span><span class="token punctuation">]</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arrTest<span class="token punctuation">)</span>
</code></pre></div><h3 id="_5-4-接口规范类"><a href="#_5-4-接口规范类" class="header-anchor">#</a> 5.4 接口规范类</h3> <blockquote><p>这个比较重要，因为写<code>react</code>的时候会经常使用到类</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 首先实现一个接口</span>
<span class="token keyword">interface</span> <span class="token class-name">Animal2</span> <span class="token punctuation">{</span>
    <span class="token comment">// 这个类必须有name</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span>string<span class="token punctuation">;</span>

    <span class="token comment">// 这个类必须有eat方法</span>
    <span class="token function">eat</span><span class="token punctuation">(</span>any<span class="token operator">:</span>string<span class="token punctuation">)</span><span class="token operator">:</span><span class="token keyword">void</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 关键字implements实现</span>
<span class="token comment">// 因为接口是抽象的，需要通过子类是实现它</span>

<span class="token keyword">class</span> <span class="token class-name">Person6</span> <span class="token keyword">implements</span> <span class="token class-name">Animal2</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> string<span class="token punctuation">;</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">name</span><span class="token operator">:</span> string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token function">eat</span><span class="token punctuation">(</span>any<span class="token operator">:</span>string<span class="token punctuation">)</span><span class="token operator">:</span><span class="token keyword">void</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">吃</span><span class="token template-punctuation string">`</span></span><span class="token operator">+</span>any<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// 如果想遵循多个接口</span>

<span class="token keyword">interface</span> <span class="token class-name">Animal3</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> string<span class="token punctuation">;</span>
    <span class="token function">eat</span><span class="token punctuation">(</span>any<span class="token operator">:</span> string<span class="token punctuation">)</span><span class="token operator">:</span><span class="token keyword">void</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// 新增一个接口</span>
<span class="token keyword">interface</span> <span class="token class-name">Animal4</span> <span class="token punctuation">{</span>
    <span class="token function">sleep</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span><span class="token keyword">void</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// 可以在implements后面通过逗号添加和java一样</span>
<span class="token keyword">class</span> <span class="token class-name">Person7</span> <span class="token keyword">implements</span> <span class="token class-name">Animal3</span><span class="token punctuation">,</span>Animal4 <span class="token punctuation">{</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> string<span class="token punctuation">;</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">name</span><span class="token operator">:</span>string</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token function">eat</span><span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">any</span><span class="token operator">:</span>string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">吃</span><span class="token template-punctuation string">`</span></span><span class="token operator">+</span>any<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token function">sleep</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'睡觉'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="_5-5-接口继承接口"><a href="#_5-5-接口继承接口" class="header-anchor">#</a> 5.5 接口继承接口</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">interface</span> <span class="token class-name">Animal5</span><span class="token punctuation">{</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span>string<span class="token punctuation">;</span>
    <span class="token function">eat</span><span class="token punctuation">(</span>any<span class="token operator">:</span>string<span class="token punctuation">)</span><span class="token operator">:</span><span class="token keyword">void</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// 像类一样 通过extends继承</span>
<span class="token keyword">interface</span> <span class="token class-name">Animal6</span> <span class="token keyword">extends</span> <span class="token class-name">Animal5</span> <span class="token punctuation">{</span>
    <span class="token function">sleep</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span><span class="token keyword">void</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// 因为Animal6类继承了Animal5</span>
<span class="token comment">// 所以这里遵循Animal6就相当于把Animal5也继承了</span>

<span class="token keyword">class</span> <span class="token class-name">Person8</span> <span class="token keyword">implements</span> <span class="token class-name">Animal2</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> string<span class="token punctuation">;</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">name</span><span class="token operator">:</span>string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token function">eat</span><span class="token punctuation">(</span>any<span class="token operator">:</span>string<span class="token punctuation">)</span><span class="token operator">:</span><span class="token keyword">void</span><span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">吃</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>any<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token function">sleep</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'睡觉'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="六、泛型"><a href="#六、泛型" class="header-anchor">#</a> 六、泛型</h2> <h3 id="_6-1-函数的泛型"><a href="#_6-1-函数的泛型" class="header-anchor">#</a> 6.1 函数的泛型</h3> <blockquote><p>泛型可以支持不特定的数据类型，什么叫不特定呢？比如我们有一个方法，里面接收参数，但是参数类型我们是不知道，但是这个类型在方法里面很多地方会用到，参数和返回值要保持一致性</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 假设我们有一个需求，我们不知道函数接收什么类型的参数，也不知道返回值的类型</span>
<span class="token comment">// 而我们又需要传进去的参数类型和返回值的类型保持一致，那么我们就需要用到泛型</span>

<span class="token comment">// &lt;T&gt;的意思是泛型，即generic type</span>
<span class="token comment">// 可以看出value的类型也为T，返回值的类型也为T</span>
<span class="token keyword">function</span> deal<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span><span class="token punctuation">(</span>value<span class="token operator">:</span><span class="token constant">T</span><span class="token punctuation">)</span><span class="token operator">:</span><span class="token constant">T</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> value
<span class="token punctuation">}</span>
<span class="token comment">// 下面的&lt;string&gt;、&lt;number&gt;实际上用的时候再传给上面的&lt;T&gt;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>deal<span class="token operator">&lt;</span>string<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token string">"poetries"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>deal<span class="token operator">&lt;</span>number<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token number">22</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><blockquote><p>实际上，泛型用得还是比较少，主要是看类的泛型是如何使用的</p></blockquote> <h3 id="_6-2-类的泛型"><a href="#_6-2-类的泛型" class="header-anchor">#</a> 6.2 类的泛型</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">MyMath</span><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// 定义一个私有属性</span>

    <span class="token keyword">private</span> <span class="token literal-property property">arr</span><span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>

    <span class="token comment">// 规定传参类型</span>
    <span class="token function">add</span><span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token constant">T</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>arr<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">// 这里规定了类型为number</span>
<span class="token comment">// 相当于把T替换为number</span>

<span class="token keyword">let</span> mymath <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MyMath</span><span class="token operator">&lt;</span>number<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
mymath<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
mymath<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>
mymath<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span>
</code></pre></div><p><strong>有了接口为什么还需要抽象类？</strong></p> <blockquote><p>接口里面只能放定义，抽象类里面可以放普通类、普通类的方法、定义抽象的东西。</p></blockquote> <h1 id="第二部分-结合react实践"><a href="#第二部分-结合react实践" class="header-anchor">#</a> 第二部分 结合React实践</h1> <h2 id="一、环境配置"><a href="#一、环境配置" class="header-anchor">#</a> 一、环境配置</h2> <h3 id="_1-1-初始化项目"><a href="#_1-1-初始化项目" class="header-anchor">#</a> 1.1 初始化项目</h3> <ul><li>生成一个目录<code>ts_react_demo</code>，输入<code>npm init -y</code>初始化项目</li> <li>然后在项目里我们需要一个<code>.gitignore</code>来忽略指定目录不传到<code>git</code>上</li> <li>进入<code>.gitignore</code>输入我们需要忽略的目录，一般是<code>node_modules</code></li></ul> <div class="language- extra-class"><pre class="language-text"><code>// .gitignore
node_modules
</code></pre></div><h3 id="_1-2-安装依赖"><a href="#_1-2-安装依赖" class="header-anchor">#</a> 1.2 安装依赖</h3> <blockquote><p>接下来我们准备下载相应的依赖包，这里需要了解一个概念，就是类型定义文件</p></blockquote> <h4 id="_1-2-1-类型定义文件"><a href="#_1-2-1-类型定义文件" class="header-anchor">#</a> 1.2.1 类型定义文件</h4> <blockquote><p>因为目前主流的第三方库都是以<code>javascript</code>编写的，如果用<code>typescript</code>开发，会导致在编译的时候会出现很多找不到类型的提示，那么如果让这些库也能在<code>ts</code>中使用呢？</p></blockquote> <ul><li>类型定义文件(<code>*.d.ts</code>)就是能够让编辑器或者插件来检测到第三方库中<code>js</code>的静态类型，这个文件是以<code>.d.ts</code>结尾- 比如说<code>react</code>的类型定义文件：https://github.com/DefinitelyTyped/DefinitelyTyped/tree/master/types/react</li> <li>在<code>typescript2.0</code>中，是使用<code>@type</code>来进行类型定义，当我们使用<code>@type</code>进行类型定义，<code>typescript</code>会默认查看<code>./node_modules/@types</code>文件夹，可以通过这样来安装这个库的定义库<code>npm install @types/react --save</code></li></ul> <h4 id="_1-2-2-相关依赖包"><a href="#_1-2-2-相关依赖包" class="header-anchor">#</a> 1.2.2 相关依赖包</h4> <p><strong>React相关</strong></p> <div class="language- extra-class"><pre class="language-text"><code>- react // react的核心文件
- @types/react // 声明文件
- react-dom // react dom的操作包
- @types/react-dom 
- react-router-dom // react路由包
- @types/react-router-dom
- react-redux
- @types/react-redux
- redux-thunk  // 中间件
- @types/redux-logger
- redux-logger // 中间件
- connected-react-router
</code></pre></div><div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment">## 执行安装依赖包</span>

<span class="token function">npm</span> i react react-dom @types/react @types/react-dom react-router-dom @types/react-router-dom react-redux @types/react-redux redux-thunk redux-logger @types/redux-logger connected-react-router -S
</code></pre></div><p><strong>webpack相关</strong></p> <div class="language- extra-class"><pre class="language-text"><code>- webpack // webpack的核心包
- webpack-cli // webapck的工具包
- webpack-dev-server // webpack的开发服务
- html-webpack-plugin // webpack的插件，可以生成index.html文件
</code></pre></div><div class="language- extra-class"><pre class="language-text"><code>npm i webpack webpack-cli webpack-dev-server html-webpack-plugin -D
</code></pre></div><blockquote><p>这里的<code>-D</code>相当于<code>--save-dev</code>的缩写，下载开发环境的依赖包</p></blockquote> <p><strong>typescript相关</strong></p> <div class="language- extra-class"><pre class="language-text"><code>- typescript // ts的核心包
- ts-loader // 把ts编译成指定语法比如es5 es6等的工具，有了它，基本不需要babel了，因为它会把我们的代码编译成es5
- source-map-loader // 用于开发环境中调试ts代码
</code></pre></div><div class="language- extra-class"><pre class="language-text"><code>npm i typescript ts-loader source-map-loader -D
</code></pre></div><ul><li>从上面可以看出，基本都是模块和声明文件都是一对对出现的，有一些不是一对对出现，就是因为都集成到一起去了</li> <li>声明文件可以在<code>node_modules/@types/xx/xx</code>中找到</li></ul> <h3 id="_1-3-typescript-config配置"><a href="#_1-3-typescript-config配置" class="header-anchor">#</a> 1.3 Typescript config配置</h3> <blockquote><p>首先我们要生成一个<code>tsconfig.json</code>来告诉<code>ts-loader</code>怎样去编译这个<code>ts</code>代码</p></blockquote> <div class="language- extra-class"><pre class="language-text"><code>tsc --init
</code></pre></div><blockquote><p>会在项目中生成了一个<code>tsconfig.json</code>文件，接下来进入这个文件，来修改相关配置</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// tsconfig.json</span>
<span class="token punctuation">{</span>
  <span class="token comment">// 编译选项</span>
  <span class="token string-property property">"compilerOptions"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string-property property">"target"</span><span class="token operator">:</span> <span class="token string">"es5"</span><span class="token punctuation">,</span> <span class="token comment">// 编译成es5语法</span>
    <span class="token string-property property">"module"</span><span class="token operator">:</span> <span class="token string">"commonjs"</span><span class="token punctuation">,</span> <span class="token comment">// 模块的类型</span>
    <span class="token string-property property">"outDir"</span><span class="token operator">:</span> <span class="token string">"./dist"</span><span class="token punctuation">,</span> <span class="token comment">// 编译后的文件目录</span>
    <span class="token string-property property">"sourceMap"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// 生成sourceMap方便我们在开发过程中调试</span>
    <span class="token string-property property">"noImplicitAny"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// 每个变量都要标明类型</span>
    <span class="token string-property property">"jsx"</span><span class="token operator">:</span> <span class="token string">"react"</span><span class="token punctuation">,</span> <span class="token comment">// jsx的版本,使用这个就不需要额外使用babel了，会编译成React.createElement</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// 为了加快整个编译过程，我们指定相应的路径</span>
  <span class="token string-property property">"include"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token string">"./src/**/*"</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="_1-4-webpack配置"><a href="#_1-4-webpack配置" class="header-anchor">#</a> 1.4 webpack配置</h3> <blockquote><p>在<code>./src/</code>下创建一个<code>index.html</code>文件，并且添加<code>&lt;div id='app'&gt;&lt;/div&gt;</code>标签</p></blockquote> <div class="language-html extra-class"><pre class="language-html"><code><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>en<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>UTF-8<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>viewport<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>width=device-width, initial-scale=1.0<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">http-equiv</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>X-UA-Compatible<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ie=edge<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>Document<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>app<span class="token punctuation">'</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><blockquote><p>在<code>./</code>下创建一个<code>webpack</code>配置文件<code>webpack.config.js</code></p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// ./webpack.config.js</span>
<span class="token comment">// 引入webpack</span>
<span class="token keyword">const</span> webpack <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"webpack"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 引入webpack插件 生成index.html文件</span>
<span class="token keyword">const</span> HtmlWebpackPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"html-webpack-plugin"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"path"</span><span class="token punctuation">)</span>

<span class="token comment">// 把模块导出</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">// 以前是jsx，因为我们用typescript写，所以这里后缀是tsx</span>
  <span class="token literal-property property">entry</span><span class="token operator">:</span><span class="token string">"./src/index.tsx"</span><span class="token punctuation">,</span>
  <span class="token comment">// 指定模式为开发模式</span>
  <span class="token literal-property property">mode</span><span class="token operator">:</span><span class="token string">"development"</span><span class="token punctuation">,</span>
  <span class="token comment">// 输出配置</span>
  <span class="token literal-property property">output</span><span class="token operator">:</span><span class="token punctuation">{</span>
    <span class="token comment">// 输出目录为当前目录下的dist目录</span>
    <span class="token literal-property property">path</span><span class="token operator">:</span>path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span><span class="token string">'dist'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token comment">// 输出文件名</span>
    <span class="token literal-property property">filename</span><span class="token operator">:</span><span class="token string">"index.js"</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// 为了方便调试，还要配置一下调试工具</span>
  <span class="token literal-property property">devtool</span><span class="token operator">:</span><span class="token string">"source-map"</span><span class="token punctuation">,</span>
  <span class="token comment">// 解析路径，查找模块的时候使用</span>
  <span class="token literal-property property">resolve</span><span class="token operator">:</span><span class="token punctuation">{</span>
    <span class="token comment">// 一般写模块不会写后缀，在这里配置好相应的后缀，那么当我们不写后缀时，会按照这个后缀优先查找</span>
    <span class="token literal-property property">extensions</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">".ts"</span><span class="token punctuation">,</span><span class="token string">'.tsx'</span><span class="token punctuation">,</span><span class="token string">'.js'</span><span class="token punctuation">,</span><span class="token string">'.json'</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// 解析处理模块的转化</span>
  <span class="token literal-property property">module</span><span class="token operator">:</span><span class="token punctuation">{</span>
    <span class="token comment">// 遵循的规则</span>
    <span class="token literal-property property">rules</span><span class="token operator">:</span><span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        <span class="token comment">// 如果这个模块是.ts或者.tsx，则会使用ts-loader把代码转成es5</span>
        <span class="token literal-property property">test</span><span class="token operator">:</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.tsx?$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
        <span class="token literal-property property">loader</span><span class="token operator">:</span><span class="token string">"ts-loader"</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        <span class="token comment">// 使用sourcemap调试</span>
        <span class="token comment">// enforce:pre表示这个loader要在别的loader执行前执行</span>
        <span class="token literal-property property">enforce</span><span class="token operator">:</span><span class="token string">"pre"</span><span class="token punctuation">,</span>
        <span class="token literal-property property">test</span><span class="token operator">:</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.js$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
        <span class="token literal-property property">loader</span><span class="token operator">:</span><span class="token string">"source-map-loader"</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// 插件的配置</span>
  <span class="token literal-property property">plugins</span><span class="token operator">:</span><span class="token punctuation">[</span>
    <span class="token comment">// 这个插件是生成index.html</span>
    <span class="token keyword">new</span> <span class="token class-name">HtmlWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token comment">// 以哪个文件为模板，模板路径</span>
      <span class="token literal-property property">template</span><span class="token operator">:</span><span class="token string">"./src/index.html"</span><span class="token punctuation">,</span>
      <span class="token comment">// 编译后的文件名</span>
      <span class="token literal-property property">filename</span><span class="token operator">:</span><span class="token string">"index.html"</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>HotModuleReplacementPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token comment">// 开发环境服务配置</span>
  <span class="token literal-property property">devServer</span><span class="token operator">:</span><span class="token punctuation">{</span>
    <span class="token comment">// 启动热更新,当模块、组件有变化，不会刷新整个页面，而是局部刷新</span>
    <span class="token comment">// 需要和插件webpack.HotModuleReplacementPlugin配合使用</span>
    <span class="token literal-property property">hot</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span> 
    <span class="token comment">// 静态资源目录</span>
    <span class="token literal-property property">contentBase</span><span class="token operator">:</span>path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span><span class="token string">'dist'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><blockquote><p>那么我们怎么运行这个<code>webpack.config.js</code>呢？这就需要我们在<code>package.json</code>配置一下脚本</p></blockquote> <ul><li>在<code>package.json</code>里的<code>script</code>，添加<code>build</code>和<code>dev</code>的配置</li></ul> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"ts_react_demo"</span><span class="token punctuation">,</span>
  <span class="token property">"version"</span><span class="token operator">:</span> <span class="token string">"1.0.0"</span><span class="token punctuation">,</span>
  <span class="token property">"description"</span><span class="token operator">:</span> <span class="token string">""</span><span class="token punctuation">,</span>
  <span class="token property">"main"</span><span class="token operator">:</span> <span class="token string">"index.js"</span><span class="token punctuation">,</span>
  <span class="token property">"scripts"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">"build"</span><span class="token operator">:</span> <span class="token string">"webpack"</span><span class="token punctuation">,</span>
    <span class="token property">"dev"</span><span class="token operator">:</span><span class="token string">"webpack-dev-server"</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">"keywords"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token property">"author"</span><span class="token operator">:</span> <span class="token string">""</span><span class="token punctuation">,</span>
  <span class="token property">"license"</span><span class="token operator">:</span> <span class="token string">"ISC"</span><span class="token punctuation">,</span>
  <span class="token property">"dependencies"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">"@types/react"</span><span class="token operator">:</span> <span class="token string">"^16.7.13"</span><span class="token punctuation">,</span>
    <span class="token property">"@types/react-dom"</span><span class="token operator">:</span> <span class="token string">"^16.0.11"</span><span class="token punctuation">,</span>
    <span class="token property">"@types/react-redux"</span><span class="token operator">:</span> <span class="token string">"^6.0.10"</span><span class="token punctuation">,</span>
    <span class="token property">"@types/react-router-dom"</span><span class="token operator">:</span> <span class="token string">"^4.3.1"</span><span class="token punctuation">,</span>
    <span class="token property">"connected-react-router"</span><span class="token operator">:</span> <span class="token string">"^5.0.1"</span><span class="token punctuation">,</span>
    <span class="token property">"react"</span><span class="token operator">:</span> <span class="token string">"^16.6.3"</span><span class="token punctuation">,</span>
    <span class="token property">"react-dom"</span><span class="token operator">:</span> <span class="token string">"^16.6.3"</span><span class="token punctuation">,</span>
    <span class="token property">"react-redux"</span><span class="token operator">:</span> <span class="token string">"^6.0.0"</span><span class="token punctuation">,</span>
    <span class="token property">"react-router-dom"</span><span class="token operator">:</span> <span class="token string">"^4.3.1"</span><span class="token punctuation">,</span>
    <span class="token property">"redux-logger"</span><span class="token operator">:</span> <span class="token string">"^3.0.6"</span><span class="token punctuation">,</span>
    <span class="token property">"redux-thunk"</span><span class="token operator">:</span> <span class="token string">"^2.3.0"</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">"devDependencies"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">"html-webpack-plugin"</span><span class="token operator">:</span> <span class="token string">"^3.2.0"</span><span class="token punctuation">,</span>
    <span class="token property">"source-map-loader"</span><span class="token operator">:</span> <span class="token string">"^0.2.4"</span><span class="token punctuation">,</span>
    <span class="token property">"ts-loader"</span><span class="token operator">:</span> <span class="token string">"^5.3.1"</span><span class="token punctuation">,</span>
    <span class="token property">"typescript"</span><span class="token operator">:</span> <span class="token string">"^3.2.1"</span><span class="token punctuation">,</span>
    <span class="token property">"webpack"</span><span class="token operator">:</span> <span class="token string">"^4.27.1"</span><span class="token punctuation">,</span>
    <span class="token property">"webpack-cli"</span><span class="token operator">:</span> <span class="token string">"^3.1.2"</span><span class="token punctuation">,</span>
    <span class="token property">"webpack-dev-server"</span><span class="token operator">:</span> <span class="token string">"^3.1.10"</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>因为入口文件是<code>index.tsx</code>，那么我们在<code>./src/</code>下创建一个<code>index.tsx</code>，并且在里面写入一段代码，看看<code>webpack</code>是否能够正常编译</li> <li>因为我们在<code>webpack.config.js</code>中<code>entry</code>设置的入口文件是<code>index.tsx</code>，并且在<code>module</code>中的<code>rules</code>会识别到<code>.tsx</code>格式的文件，然后执行相应的<code>ts-loader</code></li></ul> <div class="language- extra-class"><pre class="language-text"><code>// ./src/index.tsx
console.log("hello poetries")
</code></pre></div><ul><li>接下来我们<code>npm run build</code>一下，看看能不能正常编译</li> <li>编译成功，我们可以看看<code>./dist/</code>下生成了<code>index.html index.js index.js.map</code>三个文件</li> <li>那么我们在开发过程中，不会每次都<code>npm run build</code>来看修改的结果，那么我们平时开发过程中可以使用<code>npm run dev</code>。这样就启动成功了一个<code>http://localhost:8080/</code>的服务了。</li> <li>接下来我们看看热更新是否配置正常，在<code>./src/index.tsx</code>中新增一个<code>console.log('hello poetries')</code>，我们发现浏览器的控制台会自动打印出这一个输出，说明配置正常了</li></ul> <h2 id="二、react组件"><a href="#二、react组件" class="header-anchor">#</a> 二、React组件</h2> <h3 id="_2-1-写一个计数器组件"><a href="#_2-1-写一个计数器组件" class="header-anchor">#</a> 2.1 写一个计数器组件</h3> <blockquote><p>首先我们在<code>./src/</code>下创建一个文件夹<code>components</code>，然后在<code>./src/components/</code>下创建文件<code>Counter.tsx</code></p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// ./src/components/Counter.tsx</span>
<span class="token comment">// import React from "react"; // 之前的写法</span>
<span class="token comment">// 在ts中引入的写法</span>
<span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> React <span class="token keyword">from</span> <span class="token string">"react"</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">CounterComponent</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span><span class="token punctuation">{</span>
  <span class="token comment">// 状态state</span>
  state <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">number</span><span class="token operator">:</span><span class="token number">0</span>
  <span class="token punctuation">}</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span><span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>number<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">number</span><span class="token operator">:</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>number <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token operator">+</span><span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><blockquote><p>我们发现，其实除了引入<code>import * as React from "react"</code>以外，其余的和之前的写法没什么不同。</p></blockquote> <ul><li>接下来我们到<code>./src/index.tsx</code>中把这个组件导进来</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// ./src/index.tsx</span>
<span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> React <span class="token keyword">from</span> <span class="token string">"react"</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> ReactDom <span class="token keyword">from</span> <span class="token string">"react-dom"</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> CounterComponent <span class="token keyword">from</span> <span class="token string">"./components/Counter"</span><span class="token punctuation">;</span>
<span class="token comment">// 把我们的CounterComponent组件渲染到id为app的标签内</span>
ReactDom<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>CounterComponent <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">,</span>document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">"app"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><blockquote><p>这样我们就把这个组件引进来了，接下来我们看下是否能够成功跑起来</p></blockquote> <p><img src="https://s.poetries.top/uploads/2022/07/461bd55df1d0cba7.png" alt=""></p> <blockquote><p>到目前为止，感觉用<code>ts</code>写<code>react</code>还是跟以前差不多，没什么区别，要记住，<code>ts</code>最大的特点就是类型检查，可以检验属性的状态类型</p></blockquote> <p>假设我们需要在<code>./src/index.tsx</code>中给<code>&lt;CounterComponent /&gt;</code>传一个属性<code>name</code>，而<code>CounterComponent</code>组件需要对这个传入的<code>name</code>进行类型校验，比如说只允许传字符串</p> <ul><li><code>./src/index.tsx</code>中修改一下</li></ul> <div class="language- extra-class"><pre class="language-text"><code>ReactDom.render(&lt;CounterComponent name="poetries" /&gt;,document.getElementById("app"))
</code></pre></div><blockquote><p>然后需要在<code>./src/components/Counter.tsx</code>中写一个接口来对这个<code>name</code>进行类型校验</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// import React from "react"; // 之前的写法</span>
<span class="token comment">// 在ts中引入的写法</span>
<span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> React <span class="token keyword">from</span> <span class="token string">"react"</span><span class="token punctuation">;</span>

<span class="token comment">// 写一个接口对name进行类型校验</span>
<span class="token comment">// 如果我们不写校验的话，在外部传name进来会报错的</span>
<span class="token keyword">interface</span> <span class="token class-name">IProps</span><span class="token punctuation">{</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span>string<span class="token punctuation">,</span>
<span class="token punctuation">}</span>

<span class="token comment">// 我们还可以用接口约束state的状态</span>
<span class="token keyword">interface</span> <span class="token class-name">IState</span><span class="token punctuation">{</span>
    <span class="token literal-property property">number</span><span class="token operator">:</span> number
<span class="token punctuation">}</span>

<span class="token comment">// 把接口约束的规则写在这里</span>
<span class="token comment">// 如果传入的name不符合类型会报错</span>
<span class="token comment">// 如果state的number属性不符合类型也会报错</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">CounterComponent</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span><span class="token operator">&lt;</span>IProps<span class="token punctuation">,</span>IState<span class="token operator">&gt;</span><span class="token punctuation">{</span>
  <span class="token comment">// 状态state</span>
  state <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">number</span><span class="token operator">:</span><span class="token number">0</span>
  <span class="token punctuation">}</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span><span class="token punctuation">(</span>
        <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>number<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>name<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">number</span><span class="token operator">:</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>number <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token operator">+</span><span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="_2-2-结合redux使用"><a href="#_2-2-结合redux使用" class="header-anchor">#</a> 2.2 结合Redux使用</h3> <h4 id="_2-2-1-基础使用"><a href="#_2-2-1-基础使用" class="header-anchor">#</a> 2.2.1 基础使用</h4> <ul><li>上面<code>state</code>中的<code>number</code>就不放在组件里了，我们放到<code>redux</code>中，接下来我们使用<code>redux</code></li> <li>首先在<code>./src/</code>创建<code>store</code>目录，然后在<code>./src/store/</code>创建一个文件<code>index.tsx</code></li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// .src/store/index.tsx</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> createStore <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"redux"</span><span class="token punctuation">;</span>

<span class="token comment">// 引入reducers</span>
<span class="token keyword">import</span> reducers <span class="token keyword">from</span> <span class="token string">"./reducers"</span><span class="token punctuation">;</span>

<span class="token comment">// 接着创建仓库</span>
<span class="token keyword">let</span> store <span class="token operator">=</span> <span class="token function">createStore</span><span class="token punctuation">(</span>reducers<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 导出store仓库</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> store<span class="token punctuation">;</span>
</code></pre></div><ul><li>然后我们需要创建一个<code>reducers</code>，在<code>./src/store/</code>创建一个目录<code>reducers</code>，该目录下再创建一个文件<code>index.tsx</code>。</li> <li>但是我们还需要对<code>reducers</code>中的函数参数进行类型校验，而且这个类型校验很多地方需要复用，那么我们需要把这个类型校验单独抽离出一个文件。</li> <li>那么我们需要在<code>./src/</code>下创建一个<code>types</code>目录，该目录下创建一个文件<code>index.tsx</code></li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// ./src/types/index.tsx</span>
<span class="token comment">// 导出一个接口</span>
<span class="token keyword">export</span> <span class="token keyword">interface</span> <span class="token class-name">Store</span><span class="token punctuation">{</span>
  <span class="token comment">// 我们需要约束的属性和类型</span>
  <span class="token literal-property property">number</span><span class="token operator">:</span>number
<span class="token punctuation">}</span>
</code></pre></div><blockquote><p>回到<code>./src/store/reducers/index.tsx</code></p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 导入类型校验的接口</span>
<span class="token comment">// 用来约束state的</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Store <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"../../types/index"</span>
<span class="token comment">// 我们需要给number赋予默认值</span>
<span class="token keyword">let</span> <span class="token literal-property property">initState</span><span class="token operator">:</span>Store <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">number</span><span class="token operator">:</span><span class="token number">0</span> <span class="token punctuation">}</span>
<span class="token comment">// 把接口写在state:Store</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">state</span><span class="token operator">:</span>Store<span class="token operator">=</span>initState<span class="token punctuation">,</span>action</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 拿到老的状态state和新的状态action</span>
  <span class="token comment">// action是一个动作行为，而这个动作行为，在计数器中是具备 加 或 减 两个功能</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>上面这段代码暂时先这样，因为需要用到<code>action</code>，我们现在去配置一下<code>action</code>相关的，首先我们在<code>./src/store</code>下创建一个<code>actions</code>目录，并且在该目录下创建文件<code>counter.tsx</code></li> <li>因为配置<code>./src/store/actions/counter.tsx</code>会用到动作类型，而这个动作类型是属于常量，为了更加规范我们的代码，我们在<code>./src/store/</code>下创建一个<code>action-types.tsx</code>，里面写相应常量</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// ./src/store/action-types.tsx</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token constant">ADD</span> <span class="token operator">=</span> <span class="token string">"ADD"</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token constant">SUBTRACT</span> <span class="token operator">=</span> <span class="token string">"SUBTRACT"</span><span class="token punctuation">;</span>
</code></pre></div><blockquote><p>回到<code>./src/store/actions/counter.tsx</code></p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// ./src/store/actions/counter.tsx</span>
<span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> types <span class="token keyword">from</span> <span class="token string">"../action-types"</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token function">add</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token comment">// 需要返回一个action对象</span>
    <span class="token comment">// type为动作的类型</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span> <span class="token literal-property property">type</span><span class="token operator">:</span> types<span class="token punctuation">.</span><span class="token constant">ADD</span><span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">subtract</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token comment">// 需要返回一个action对象</span>
    <span class="token comment">// type为动作的类型</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span> <span class="token literal-property property">type</span><span class="token operator">:</span> types<span class="token punctuation">.</span><span class="token constant">SUBTRACT</span><span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><blockquote><p>我们可以想一下，上面<code>return { type:types.ADD }</code>实际上是返回一个<code>action</code>对象，将来使用的时候，是会传到<code>./src/store/reducers/index.tsx</code>的<code>action</code>中，那么我们怎么定义这个<code>action</code>的结构呢？</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// ./src/store/actions/counter.tsx</span>
<span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> types <span class="token keyword">from</span> <span class="token string">"../action-types"</span><span class="token punctuation">;</span>

<span class="token comment">// 定义两个接口，分别约束add和subtract的type类型</span>
<span class="token keyword">export</span> <span class="token keyword">interface</span> <span class="token class-name">Add</span><span class="token punctuation">{</span>
  <span class="token literal-property property">type</span><span class="token operator">:</span><span class="token keyword">typeof</span> types<span class="token punctuation">.</span><span class="token constant">ADD</span>
<span class="token punctuation">}</span>
<span class="token keyword">export</span> <span class="token keyword">interface</span> <span class="token class-name">Subtract</span><span class="token punctuation">{</span>
  <span class="token literal-property property">type</span><span class="token operator">:</span><span class="token keyword">typeof</span> types<span class="token punctuation">.</span><span class="token constant">SUBTRACT</span>
<span class="token punctuation">}</span>

<span class="token comment">// 再导出一个type</span>
<span class="token comment">// type是用来给类型起别名的</span>
<span class="token comment">// 这个actions里是一个对象，会有很多函数，每个函数都会返回一个action</span>
<span class="token comment">// 而 ./store/reducers/index.tsx中的action会是下面某一个函数的返回值</span>

<span class="token keyword">export</span> type Action <span class="token operator">=</span> Add <span class="token operator">|</span> Subtract

<span class="token comment">// 把上面定义好的接口作用于下面</span>
<span class="token comment">// 约束返回值的类型</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token function">add</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span>Add<span class="token punctuation">{</span>
    <span class="token comment">// 需要返回一个action对象</span>
    <span class="token comment">// type为动作的类型</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span> <span class="token literal-property property">type</span><span class="token operator">:</span> types<span class="token punctuation">.</span><span class="token constant">ADD</span><span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">subtract</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span>Subtract<span class="token punctuation">{</span>
    <span class="token comment">// 需要返回一个action对象</span>
    <span class="token comment">// type为动作的类型</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span> <span class="token literal-property property">type</span><span class="token operator">:</span> types<span class="token punctuation">.</span><span class="token constant">SUBTRACT</span><span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><blockquote><p>接着我们回到<code>./store/reducers/index.tsx</code></p></blockquote> <p>经过上面一系列的配置，我们可以给<code>action</code>使用相应的接口约束了并且根据不同的<code>action</code>动作行为来进行不同的处理</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// ./store/reducers/index.tsx</span>
<span class="token comment">// 导入类型校验的接口</span>
<span class="token comment">// 用来约束state的</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Store <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"../../types/index"</span>

<span class="token comment">// 导入约束action的接口</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Action <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"../actions/counter"</span>

<span class="token comment">// 引入action动作行为的常量</span>
<span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> types <span class="token keyword">from</span> <span class="token string">"../action-types"</span>

<span class="token comment">// 我们需要给number赋予默认值</span>
<span class="token keyword">let</span> <span class="token literal-property property">initState</span><span class="token operator">:</span>Store <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">number</span><span class="token operator">:</span><span class="token number">0</span> <span class="token punctuation">}</span>

<span class="token comment">// 把接口写在state:Store</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">state</span><span class="token operator">:</span>Store<span class="token operator">=</span>initState<span class="token punctuation">,</span><span class="token literal-property property">action</span><span class="token operator">:</span>Action</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 拿到老的状态state和新的状态action</span>
  <span class="token comment">// action是一个动作行为，而这个动作行为，在计数器中是具备 加 或 减 两个功能</span>
  <span class="token comment">// 判断action的行为类型</span>
  <span class="token keyword">switch</span> <span class="token punctuation">(</span>action<span class="token punctuation">.</span>type<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">case</span> types<span class="token punctuation">.</span><span class="token constant">ADD</span><span class="token operator">:</span>
        <span class="token comment">// 当action动作行为是ADD的时候，给number加1</span>
        <span class="token keyword">return</span> <span class="token punctuation">{</span> <span class="token literal-property property">number</span><span class="token operator">:</span>state<span class="token punctuation">.</span>number <span class="token operator">+</span> <span class="token number">1</span> <span class="token punctuation">}</span>
      <span class="token keyword">break</span><span class="token punctuation">;</span>
    <span class="token keyword">case</span> types<span class="token punctuation">.</span><span class="token constant">SUBTRACT</span><span class="token operator">:</span>
        <span class="token comment">// 当action动作行为是SUBTRACT的时候，给number减1</span>
        <span class="token keyword">return</span> <span class="token punctuation">{</span> <span class="token literal-property property">number</span><span class="token operator">:</span>state<span class="token punctuation">.</span>number <span class="token operator">-</span> <span class="token number">1</span> <span class="token punctuation">}</span>
      <span class="token keyword">break</span><span class="token punctuation">;</span>
    <span class="token keyword">default</span><span class="token operator">:</span>
        <span class="token comment">// 当没有匹配到则返回原本的state</span>
        <span class="token keyword">return</span> state
      <span class="token keyword">break</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><blockquote><p>接下来，我们怎么样把组件和仓库建立起关系呢</p></blockquote> <p>首先进入<code>./src/index.tsx</code></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// ./src/index.tsx</span>
<span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> React <span class="token keyword">from</span> <span class="token string">"react"</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> ReactDom <span class="token keyword">from</span> <span class="token string">"react-dom"</span><span class="token punctuation">;</span>

<span class="token comment">// 引入redux这个库的Provider组件</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Provider <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"react-redux"</span><span class="token punctuation">;</span>

<span class="token comment">// 引入仓库</span>
<span class="token keyword">import</span> store <span class="token keyword">from</span> <span class="token string">'./store'</span>

<span class="token keyword">import</span> CounterComponent <span class="token keyword">from</span> <span class="token string">"./components/Counter"</span><span class="token punctuation">;</span>

<span class="token comment">// 用Provider包裹CounterComponent组件</span>
<span class="token comment">// 并且把store传给Provider</span>
<span class="token comment">// 这样Provider可以向它的子组件提供store</span>
ReactDom<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">(</span>
  <span class="token operator">&lt;</span>Provider store<span class="token operator">=</span><span class="token punctuation">{</span>store<span class="token punctuation">}</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>CounterComponent name<span class="token operator">=</span><span class="token string">"poetries"</span><span class="token operator">/</span><span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>Provider<span class="token operator">&gt;</span>
<span class="token punctuation">)</span><span class="token punctuation">,</span>document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">"app"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><blockquote><p>我们到组件内部建立连接，<code>./src/components/Counter.tsx</code></p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// import React from "react"; // 之前的写法</span>
<span class="token comment">// 在ts中引入的写法</span>
<span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> React <span class="token keyword">from</span> <span class="token string">"react"</span><span class="token punctuation">;</span>

<span class="token comment">// 引入connect，让组件和仓库建立连接</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> connect <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"react-redux"</span><span class="token punctuation">;</span>

<span class="token comment">// 引入actions，用于传给connect</span>
<span class="token keyword">import</span> actions <span class="token keyword">from</span> <span class="token string">"../store/actions/counter"</span><span class="token punctuation">;</span>

<span class="token comment">// 引入接口约束</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Store <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"../types"</span><span class="token punctuation">;</span>

<span class="token comment">// 接口约束</span>
<span class="token keyword">interface</span> <span class="token class-name">IProps</span><span class="token punctuation">{</span>
  <span class="token literal-property property">number</span><span class="token operator">:</span>number<span class="token punctuation">,</span>

  <span class="token literal-property property">name</span><span class="token operator">:</span>string<span class="token punctuation">,</span> <span class="token comment">//如果我们不写校验的话，在外部传name进来会报错的</span>

  <span class="token comment">// add是一个函数</span>
  <span class="token literal-property property">add</span><span class="token operator">:</span>any<span class="token punctuation">,</span>

  <span class="token comment">// subtract是一个函数</span>
  <span class="token literal-property property">subtract</span><span class="token operator">:</span>any
<span class="token punctuation">}</span>

<span class="token comment">// 我们还可以用接口约束state的状态</span>
<span class="token keyword">interface</span> <span class="token class-name">IState</span><span class="token punctuation">{</span>
    <span class="token literal-property property">number</span><span class="token operator">:</span> number
<span class="token punctuation">}</span>

<span class="token comment">// 把接口约束的规则写在这里</span>
<span class="token comment">// 如果传入的name不符合类型会报错</span>
<span class="token comment">// 如果state的number属性不符合类型也会报错</span>
<span class="token keyword">class</span> <span class="token class-name">CounterComponent</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span><span class="token operator">&lt;</span>IProps<span class="token punctuation">,</span>IState<span class="token operator">&gt;</span><span class="token punctuation">{</span>
  <span class="token comment">// 状态state</span>
  state <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">number</span><span class="token operator">:</span><span class="token number">0</span>
  <span class="token punctuation">}</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token comment">// 利用解构赋值取出</span>
    <span class="token comment">// 这里比如和IProps保持一致，不对应则会报错，因为接口约束了必须这样</span>
    <span class="token keyword">let</span> <span class="token punctuation">{</span> number<span class="token punctuation">,</span>add<span class="token punctuation">,</span>subtract <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props

    <span class="token keyword">return</span><span class="token punctuation">(</span>
        <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>name<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span>add<span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token operator">+</span><span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span><span class="token operator">&lt;</span>br <span class="token operator">/</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span>subtract<span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token operator">-</span><span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>  
            <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span><span class="token punctuation">{</span>number<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// 这个connect需要执行两次，第二次需要我们把这个组件CounterComponent传进去</span>
<span class="token comment">// connect第一次执行，需要两个参数，</span>

<span class="token comment">// 需要传给connect的函数</span>
<span class="token keyword">let</span> <span class="token function-variable function">mapStateToProps</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">state</span><span class="token operator">:</span>Store</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> state
<span class="token punctuation">}</span>
  
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">connect</span><span class="token punctuation">(</span>
    mapStateToProps<span class="token punctuation">,</span>
    actions
<span class="token punctuation">)</span><span class="token punctuation">(</span>CounterComponent<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>这时候看到成功执行了</p> <p><img src="https://s.poetries.top/uploads/2022/07/4fbc6ba7899d240f.png" alt=""></p> <ul><li>其实搞来搞去，跟原来的写法差不多，主要就是<code>ts</code>会进行类型检查。</li> <li>如果对<code>number</code>进行异步修改，该怎么处理？这就需要我们用到<code>redux-thunk</code></li></ul> <blockquote><p>接着我们回到<code>./src/store/index.tsx</code></p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 需要使用到thunk，所以引入中间件applyMiddleware</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> createStore<span class="token punctuation">,</span> applyMiddleware <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"redux"</span><span class="token punctuation">;</span>

<span class="token comment">// 引入reducers</span>
<span class="token keyword">import</span> reducers <span class="token keyword">from</span> <span class="token string">"./reducers"</span><span class="token punctuation">;</span>

<span class="token comment">// 引入redux-thunk，处理异步</span>
<span class="token comment">// 现在主流处理异步的是saga和thunk</span>
<span class="token keyword">import</span> thunk <span class="token keyword">from</span> <span class="token string">"redux-thunk"</span><span class="token punctuation">;</span>

<span class="token comment">// 引入日志</span>
<span class="token keyword">import</span> logger <span class="token keyword">from</span> <span class="token string">"redux-logger"</span><span class="token punctuation">;</span>

<span class="token comment">// 接着创建仓库和中间件</span>
<span class="token keyword">let</span> store <span class="token operator">=</span> <span class="token function">createStore</span><span class="token punctuation">(</span>reducers<span class="token punctuation">,</span> <span class="token function">applyMiddleware</span><span class="token punctuation">(</span>thunk<span class="token punctuation">,</span>logger<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 导出store仓库</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> store<span class="token punctuation">;</span>
</code></pre></div><blockquote><p>接着我们回来<code>./src/store/actions</code>，新增一个异步的动作行为</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// ./src/store/actions/counter.tsx</span>
<span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> types <span class="token keyword">from</span> <span class="token string">"../action-types"</span><span class="token punctuation">;</span>

<span class="token comment">// 定义两个接口，分别约束add和subtract的type类型</span>
<span class="token keyword">export</span> <span class="token keyword">interface</span> <span class="token class-name">Add</span><span class="token punctuation">{</span>
  <span class="token literal-property property">type</span><span class="token operator">:</span><span class="token keyword">typeof</span> types<span class="token punctuation">.</span><span class="token constant">ADD</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">interface</span> <span class="token class-name">Subtract</span><span class="token punctuation">{</span>
  <span class="token literal-property property">type</span><span class="token operator">:</span><span class="token keyword">typeof</span> types<span class="token punctuation">.</span><span class="token constant">SUBTRACT</span>
<span class="token punctuation">}</span>
<span class="token comment">// 再导出一个type</span>
<span class="token comment">// type是用来给类型起别名的</span>
<span class="token comment">// 这个actions里是一个对象，会有很多函数，每个函数都会返回一个action</span>
<span class="token comment">// 而 ./store/reducers/index.tsx中的action会是下面某一个函数的返回值</span>

<span class="token keyword">export</span> type Action <span class="token operator">=</span> Add <span class="token operator">|</span> Subtract

<span class="token comment">// 把上面定义好的接口作用于下面</span>
<span class="token comment">// 约束返回值的类型</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token function">add</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span>Add<span class="token punctuation">{</span>
    <span class="token comment">// 需要返回一个action对象</span>
    <span class="token comment">// type为动作的类型</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span> <span class="token literal-property property">type</span><span class="token operator">:</span> types<span class="token punctuation">.</span><span class="token constant">ADD</span><span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">subtract</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span>Subtract<span class="token punctuation">{</span>
    <span class="token comment">// 需要返回一个action对象</span>
    <span class="token comment">// type为动作的类型</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span> <span class="token literal-property property">type</span><span class="token operator">:</span> types<span class="token punctuation">.</span><span class="token constant">SUBTRACT</span><span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// 一秒后才执行这个行为</span>
  <span class="token comment">// ++</span>
  <span class="token function">addAsync</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span>any<span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">dispatch</span><span class="token operator">:</span>any<span class="token punctuation">,</span><span class="token literal-property property">getState</span><span class="token operator">:</span>any</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token comment">// 当1秒过后，会执行dispatch，派发出去，然后改变仓库的状态</span>
        <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">type</span><span class="token operator">:</span>types<span class="token punctuation">.</span><span class="token constant">ADD</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><blockquote><p>到<code>./src/components/Counter.tsx</code>组件内，使用这个异步</p></blockquote> <h4 id="_2-2-2-合并reducers"><a href="#_2-2-2-合并reducers" class="header-anchor">#</a> 2.2.2 合并reducers</h4> <blockquote><p>假如我们的项目里面，有两个计数器，而且它俩是完全没有关系的，状态也是完全独立的，这个时候就需要用到合并<code>reducers</code>了</p></blockquote> <ul><li>首先我们新增<code>action</code>的动作行为类型，在<code>./src/store/action-types.tsx</code></li> <li>然后修改接口文件，<code>./src/types/index.tsx</code></li> <li>然后把<code>./src/store/actions/counter.tsx</code>文件拷贝在当前目录并且修改名称为<code>counter2.tsx</code></li> <li>然后把<code>./src/store/reduces/index.tsx</code>拷贝并且改名为<code>counter.tsx</code>和<code>counter2.tsx</code></li></ul> <blockquote><p>我们多个<code>reducer</code>是通过<code>combineReducers</code>方法，进行合并的，因为我们一个项目当中肯定是存在非常多个<code>reducer</code>，所以统一在这里处理。</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// ./src/store/reducers/index.tsc</span>

<span class="token comment">// 引入合并方法</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> combineReducers <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"redux"</span><span class="token punctuation">;</span>

<span class="token comment">// 引入需要合并的reducer</span>
<span class="token keyword">import</span> counter <span class="token keyword">from</span> <span class="token string">"./counter"</span><span class="token punctuation">;</span>

<span class="token comment">// 引入需要合并的reducer</span>
<span class="token keyword">import</span> counter2 <span class="token keyword">from</span> <span class="token string">"./counter2"</span><span class="token punctuation">;</span>

<span class="token comment">// 合并</span>
<span class="token keyword">let</span> reducers <span class="token operator">=</span> <span class="token function">combineReducers</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  counter<span class="token punctuation">,</span>
  counter2<span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> reducers<span class="token punctuation">;</span>
</code></pre></div><blockquote><p>最后修改组件，进入<code>./src/components/</code>,其中</p></blockquote> <p>到目前为止，我们完成了<code>reducers</code>的合并了，那么我们看看效果如何，首先我们给<code>./src/index.tsc</code>添加<code>Counter2</code>组件，这样的目的是与<code>Counter</code>组件完全独立，互不影响，但是又能够最终合并到<code>readucers</code></p> <p><img src="https://s.poetries.top/gitee/2019/10/548.png" alt=""></p> <h3 id="_2-3-路由"><a href="#_2-3-路由" class="header-anchor">#</a> 2.3 路由</h3> <h4 id="_2-3-1-基本用法"><a href="#_2-3-1-基本用法" class="header-anchor">#</a> 2.3.1 基本用法</h4> <blockquote><p>首先进入<code>./src/index.tsx</code>导入我们的路由所需要的依赖包</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// ./src/index.tsx</span>
<span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> React <span class="token keyword">from</span> <span class="token string">"react"</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> ReactDom <span class="token keyword">from</span> <span class="token string">"react-dom"</span><span class="token punctuation">;</span>

<span class="token comment">// 引入redux这个库的Provider组件</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Provider <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"react-redux"</span><span class="token punctuation">;</span>

<span class="token comment">// 引入路由</span>
<span class="token comment">// 路由的容器:HashRouter as Router</span>
<span class="token comment">// 路由的规格:Route</span>
<span class="token comment">// Link组件</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> BrowserRouter <span class="token keyword">as</span> Router<span class="token punctuation">,</span>Route<span class="token punctuation">,</span>Link <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"react-router-dom"</span>

<span class="token comment">// 引入仓库</span>
<span class="token keyword">import</span> store <span class="token keyword">from</span> <span class="token string">'./store'</span>

<span class="token keyword">import</span> CounterComponent <span class="token keyword">from</span> <span class="token string">"./components/Counter"</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> CounterComponent2 <span class="token keyword">from</span> <span class="token string">"./components/Counter2"</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> Counter <span class="token keyword">from</span> <span class="token string">"./components/Counter"</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">Home</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>home<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 用Provider包裹CounterComponent组件</span>
<span class="token comment">// 并且把store传给Provider</span>
<span class="token comment">// 这样Provider可以向它的子组件提供store</span>
ReactDom<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">(</span>
  <span class="token operator">&lt;</span>Provider store<span class="token operator">=</span><span class="token punctuation">{</span>store<span class="token punctuation">}</span><span class="token operator">&gt;</span>
    <span class="token punctuation">{</span><span class="token comment">/* 路由组件 */</span><span class="token punctuation">}</span>
    <span class="token operator">&lt;</span>Router<span class="token operator">&gt;</span>
      <span class="token punctuation">{</span><span class="token comment">/*  放两个路由规则需要在外层套个React.Fragment */</span><span class="token punctuation">}</span>
        <span class="token operator">&lt;</span>React<span class="token punctuation">.</span>Fragment<span class="token operator">&gt;</span>
            <span class="token punctuation">{</span><span class="token comment">/* 增加导航 */</span><span class="token punctuation">}</span>
            <span class="token operator">&lt;</span>ul<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>li<span class="token operator">&gt;</span><span class="token operator">&lt;</span>Link to<span class="token operator">=</span><span class="token string">"/"</span><span class="token operator">&gt;</span>Home<span class="token operator">&lt;</span><span class="token operator">/</span>Link<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>li<span class="token operator">&gt;</span><span class="token operator">&lt;</span>Link to<span class="token operator">=</span><span class="token string">"/counter"</span><span class="token operator">&gt;</span>Counter<span class="token operator">&lt;</span><span class="token operator">/</span>Link<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>li<span class="token operator">&gt;</span><span class="token operator">&lt;</span>Link to<span class="token operator">=</span><span class="token string">"/counter2"</span><span class="token operator">&gt;</span>Counter2<span class="token operator">&lt;</span><span class="token operator">/</span>Link<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>ul<span class="token operator">&gt;</span>
            <span class="token punctuation">{</span><span class="token comment">/* 当路径为 / 时是home组件 */</span><span class="token punctuation">}</span>
            <span class="token punctuation">{</span><span class="token comment">/* 为了避免home组件一直渲染，我们可以添加属性exact */</span><span class="token punctuation">}</span>
            <span class="token operator">&lt;</span>Route exact path<span class="token operator">=</span><span class="token string">"/"</span> component<span class="token operator">=</span><span class="token punctuation">{</span>Home<span class="token punctuation">}</span><span class="token operator">/</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">"/counter"</span> component<span class="token operator">=</span><span class="token punctuation">{</span>CounterComponent<span class="token punctuation">}</span><span class="token operator">/</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">"/counter2"</span> component<span class="token operator">=</span><span class="token punctuation">{</span>CounterComponent2<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>React<span class="token punctuation">.</span>Fragment<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>Router<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>Provider<span class="token operator">&gt;</span>
<span class="token punctuation">)</span><span class="token punctuation">,</span>document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">"app"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><p><img src="https://s.poetries.top/gitee/2019/10/549.png" alt=""></p> <blockquote><p>但是有个很大的问题，就是我们直接访问<code>http://localhost:8080/counter</code>会找不到路由</p></blockquote> <ul><li>因为我们的是单页面应用，不管路由怎么变更，实际上都是访问<code>index.html</code>这个文件，所以当我们访问根路径的时候，能够正常访问，因为<code>index.html</code>文件就放在这个目录下，但是当我们通过非根路径的路由访问，则出错了，是因为我们在相应的路径没有这个文件，所以出错了</li> <li>从这一点也可以衍生出一个实战经验，我们平时项目部署上线的时候，会出现这个问题，一般我们都是用<code>nginx</code>来把访问的路径都是指向<code>index.html</code>文件，这样就能够正常访问了。</li> <li>那么针对目前我们这个情况，我们可以通过修改<code>webpack</code>配置，让路由不管怎么访问，都是指向我们制定的<code>index.html</code>文件。</li></ul> <blockquote><p>进入<code>./webpack.config.js</code>，在<code>devServer</code>的配置对象下新增一些配置</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// ./webpack.config.js</span>
<span class="token operator">...</span>

  <span class="token comment">// 开发环境服务配置</span>
  <span class="token literal-property property">devServer</span><span class="token operator">:</span><span class="token punctuation">{</span>
    <span class="token comment">// 启动热更新,当模块、组件有变化，不会刷新整个页面，而是局部刷新</span>
    <span class="token comment">// 需要和插件webpack.HotModuleReplacementPlugin配合使用</span>
    <span class="token literal-property property">hot</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span> 
    <span class="token comment">// 静态资源目录</span>
    <span class="token literal-property property">contentBase</span><span class="token operator">:</span>path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span><span class="token string">'dist'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token comment">// 不管访问什么路径，都重定向到index.html</span>
    <span class="token literal-property property">historyApiFallback</span><span class="token operator">:</span><span class="token punctuation">{</span>
      <span class="token literal-property property">index</span><span class="token operator">:</span><span class="token string">"./index.html"</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

<span class="token operator">...</span>

</code></pre></div><blockquote><p>修改<code>webpack</code>配置需要重启服务，然后重启服务，看看浏览器能否正常访问<code>http://localhost:8080/counter</code></p></blockquote> <h4 id="_2-3-2-同步路由到redux"><a href="#_2-3-2-同步路由到redux" class="header-anchor">#</a> 2.3.2 同步路由到redux</h4> <blockquote><p>路由的路径，如何同步到仓库当中。以前是用一个叫<code>react-router-redux</code>的库，把路由和<code>redux</code>结合到一起的，<code>react-router-redux</code>挺好用的，但是这个库不再维护了，被废弃了，所以现在推荐使用<code>connected-react-router</code>这个库，可以把路由状态映射到仓库当中</p></blockquote> <blockquote><p>首先我们在<code>./src</code>下创建文件<code>history.tsx</code></p></blockquote> <p>假设我有一个需求，就是我不通过<code>Link</code>跳转页面，而是通过编程式导航，触发一个动作，然后这个动作会派发出去，而且把路由信息放到<code>redux</code>中，供我以后查看。</p> <blockquote><p>我们进入<code>./src/store/reducers/index.tsx</code></p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 引入合并方法</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> combineReducers <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"redux"</span><span class="token punctuation">;</span>

<span class="token comment">// 引入需要合并的reducer</span>
<span class="token keyword">import</span> counter <span class="token keyword">from</span> <span class="token string">"./counter"</span><span class="token punctuation">;</span>

<span class="token comment">// 引入需要合并的reducer</span>
<span class="token keyword">import</span> counter2 <span class="token keyword">from</span> <span class="token string">"./counter2"</span><span class="token punctuation">;</span>

<span class="token comment">// 引入connectRouter</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> connectRouter <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"connected-react-router"</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> history <span class="token keyword">from</span> <span class="token string">"../../history"</span><span class="token punctuation">;</span>

<span class="token comment">// 合并</span>
<span class="token keyword">let</span> reducers <span class="token operator">=</span> <span class="token function">combineReducers</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  counter<span class="token punctuation">,</span>
  counter2<span class="token punctuation">,</span>
  <span class="token comment">// 把history传到connectRouter函数中</span>
  <span class="token literal-property property">router</span><span class="token operator">:</span> <span class="token function">connectRouter</span><span class="token punctuation">(</span>history<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> reducers<span class="token punctuation">;</span>
</code></pre></div><blockquote><p>我们进入<code>./src/store/index.tsx</code>来添加中间件</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 需要使用到thunk，所以引入中间件applyMiddleware</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> createStore<span class="token punctuation">,</span> applyMiddleware <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"redux"</span><span class="token punctuation">;</span>

<span class="token comment">// 引入reducers</span>
<span class="token keyword">import</span> reducers <span class="token keyword">from</span> <span class="token string">"./reducers"</span><span class="token punctuation">;</span>

<span class="token comment">// 引入redux-thunk，处理异步</span>
<span class="token comment">// 现在主流处理异步的是saga和thunk</span>
<span class="token keyword">import</span> thunk <span class="token keyword">from</span> <span class="token string">"redux-thunk"</span><span class="token punctuation">;</span>

<span class="token comment">// 引入日志</span>
<span class="token keyword">import</span> logger <span class="token keyword">from</span> <span class="token string">"redux-logger"</span><span class="token punctuation">;</span>

<span class="token comment">// 引入中间件</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> routerMiddleware <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"connected-react-router"</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> history <span class="token keyword">from</span> <span class="token string">"../history"</span><span class="token punctuation">;</span>

<span class="token comment">// 接着创建仓库和中间件</span>
<span class="token keyword">let</span> store <span class="token operator">=</span> <span class="token function">createStore</span><span class="token punctuation">(</span>reducers<span class="token punctuation">,</span> <span class="token function">applyMiddleware</span><span class="token punctuation">(</span><span class="token function">routerMiddleware</span><span class="token punctuation">(</span>history<span class="token punctuation">)</span><span class="token punctuation">,</span>thunk<span class="token punctuation">,</span>logger<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 导出store仓库</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> store<span class="token punctuation">;</span>
</code></pre></div><blockquote><p>我们进入<code>./src/store/actions/counter.tsx</code>加个<code>goto</code>方法用来跳转</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// ./src/store/actions/counter.tsx</span>
<span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> types <span class="token keyword">from</span> <span class="token string">"../action-types"</span><span class="token punctuation">;</span>

<span class="token comment">// 引入push方法</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> push <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"connected-react-router"</span><span class="token punctuation">;</span>

<span class="token comment">// 定义两个接口，分别约束add和subtract的type类型</span>
<span class="token keyword">export</span> <span class="token keyword">interface</span> <span class="token class-name">Add</span><span class="token punctuation">{</span>
  <span class="token literal-property property">type</span><span class="token operator">:</span><span class="token keyword">typeof</span> types<span class="token punctuation">.</span><span class="token constant">ADD</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">interface</span> <span class="token class-name">Subtract</span><span class="token punctuation">{</span>
  <span class="token literal-property property">type</span><span class="token operator">:</span><span class="token keyword">typeof</span> types<span class="token punctuation">.</span><span class="token constant">SUBTRACT</span>
<span class="token punctuation">}</span>
<span class="token comment">// 再导出一个type</span>
<span class="token comment">// type是用来给类型起别名的</span>
<span class="token comment">// 这个actions里是一个对象，会有很多函数，每个函数都会返回一个action</span>
<span class="token comment">// 而 ./store/reducers/index.tsx中的action会是下面某一个函数的返回值</span>

<span class="token keyword">export</span> type Action <span class="token operator">=</span> Add <span class="token operator">|</span> Subtract

<span class="token comment">// 把上面定义好的接口作用于下面</span>
<span class="token comment">// 约束返回值的类型</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token function">add</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span>Add<span class="token punctuation">{</span>
    <span class="token comment">// 需要返回一个action对象</span>
    <span class="token comment">// type为动作的类型</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span> <span class="token literal-property property">type</span><span class="token operator">:</span> types<span class="token punctuation">.</span><span class="token constant">ADD</span><span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">subtract</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span>Subtract<span class="token punctuation">{</span>
    <span class="token comment">// 需要返回一个action对象</span>
    <span class="token comment">// type为动作的类型</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span> <span class="token literal-property property">type</span><span class="token operator">:</span> types<span class="token punctuation">.</span><span class="token constant">SUBTRACT</span><span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// 一秒后才执行这个行为</span>
  <span class="token function">addAsync</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span>any<span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">dispatch</span><span class="token operator">:</span>any<span class="token punctuation">,</span><span class="token literal-property property">getState</span><span class="token operator">:</span>any</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token comment">// 当1秒过后，会执行dispatch，派发出去，然后改变仓库的状态</span>
        <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">type</span><span class="token operator">:</span>types<span class="token punctuation">.</span><span class="token constant">ADD</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">goto</span><span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">path</span><span class="token operator">:</span>string</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token comment">// 派发一个动作</span>
    <span class="token comment">// 这个push是connected-react-router里的一个方法</span>
    <span class="token comment">// 返回一个跳转路径的action</span>
    <span class="token keyword">return</span> <span class="token function">push</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><blockquote><p>我们进入<code>./src/components/Counter.tsx</code>中加个按钮，当我点击按钮的时候，会向仓库派发<code>action</code>，仓库的<code>action</code>里有中间件，会把我们这个请求拦截到，然后跳转</p></blockquote></div> <!----> <div class="readMore-wrapper"><span class="readMore">阅读全文</span></div>
                    </div>
                            <p>这是一个信息提示框。</p>
                        </div>

                        <div class="note warning">
                            <div class="note-title"><i class="fas fa-exclamation-triangle"></i> 注意</div>
                            <p>这是一个警告提示框。</p>
                        </div>

                        <div class="note success">
                            <div class="note-title"><i class="fas fa-check-circle"></i> 成功</div>
                            <p>这是一个成功提示框。</p>
                        </div>

                        <h2>代码示例</h2>
                        <pre><code class="language-javascript">// 示例代码
function example() {
    console.log('Hello, FrontendHub!');
}
</code></pre>
                    </div>

                    <!-- 文章底部导航 -->
                    <nav class="article-nav">
                        <a href="#" class="prev-article">
                            <i class="fas fa-chevron-left"></i>
                            <span>上一篇</span>
                        </a>
                        <a href="#" class="next-article">
                            <span>下一篇</span>
                            <i class="fas fa-chevron-right"></i>
                        </a>
                    </nav>
                </article>
            </div>
        </div>
    </main>

    <!-- 页脚 -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h4><i class="fas fa-code"></i> FrontendHub</h4>
                    <p>专注于前端技术学习与面试准备</p>
                </div>
                <div class="footer-section">
                    <h4>快速链接</h4>
                    <ul>
                        <li><a href="../../index.html">首页</a></li>
                        <li><a href="../index.html#courses">课程体系</a></li>
                        <li><a href="../index.html#resources">学习资源</a></li>
                    </ul>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2025 FrontendHub. 用于个人学习使用.</p>
            </div>
        </div>
    </footer>

    <!-- 返回顶部按钮 -->
    <button class="back-to-top" id="backToTop">
        <i class="fas fa-arrow-up"></i>
    </button>

    <script src="../../js/main.js"></script>
    <script src="../../js/content.js"></script>
</body>
</html>

