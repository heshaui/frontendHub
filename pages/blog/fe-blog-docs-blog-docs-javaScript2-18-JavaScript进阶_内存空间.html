<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="referrer" content="no-referrer">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JavaScript进阶_内存空间 - FrontendHub</title>
    <link rel="stylesheet" href="../../css/style.css">
    <link rel="stylesheet" href="../../css/content.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body class="content-page">
    <!-- 导航栏 -->
    <nav class="navbar">
        <div class="container">
            <div class="nav-brand">
                <a href="../../index.html" style="color: inherit; text-decoration: none; display: flex; align-items: center; gap: 0.5rem;">
                    <i class="fas fa-code"></i>
                    <span>FrontendHub</span>
                </a>
            </div>
            <button class="nav-toggle" id="navToggle">
                <span></span>
                <span></span>
                <span></span>
            </button>
            <ul class="nav-menu" id="navMenu">
                <li><a href="../../index.html">首页</a></li>
                <li><a href="../index.html#features">特色</a></li>
                <li><a href="../index.html#courses">课程</a></li>
                <li><a href="../index.html#resources">资源</a></li>
            </ul>
        </div>
    </nav>

    <!-- 面包屑导航 -->
    <div class="breadcrumb">
        <div class="container">
            <a href="../../index.html"><i class="fas fa-home"></i> 首页</a>
            <i class="fas fa-chevron-right"></i>
            <span>JavaScript进阶_内存空间</span>
        </div>
    </div>

    <!-- 主要内容区 -->
    <main class="content-main">
        <div class="container">
            <div class="content-layout">
                <!-- 侧边栏目录 -->
                <aside class="sidebar">
                    <div class="sidebar-sticky">
                        <h3><i class="fas fa-list"></i> 目录</h3>
                        <nav class="toc" id="toc">
                            <!-- 目录将通过JavaScript自动生成 -->
                        </nav>
                    </div>
                </aside>

                <!-- 文章内容 -->
                <article class="article">
                    <header class="article-header">
                        <h1>JavaScript进阶_内存空间</h1>
                        <div class="article-meta">
                            <span><i class="far fa-calendar"></i> 更新时间：2025-12-23</span>
                            <span><i class="far fa-clock"></i> 阅读时长：约 15 分钟</span>
                        </div>
                    </header>

                    <div class="article-content">
<div class="content__default"><h3 id="三种数据结构"><a href="#三种数据结构" class="header-anchor">#</a> 三种数据结构</h3> <p><code>JS</code>中三种重要的数据结构, 如图:</p> <p><img src="https://hexo-blog-1256114407.cos.ap-shenzhen-fsi.myqcloud.com/executionContext2.jpg" alt="img1"></p> <p>(图片来源<a href="https://juejin.im/post/5d870e6651882517a0319aa8" target="_blank" rel="noopener noreferrer">前端九五六-Javascript 内存空间管理<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>)</p> <h3 id="栈数据结构"><a href="#栈数据结构" class="header-anchor">#</a> 栈数据结构</h3> <p>其实在<a href="https://juejin.im/post/5db85b866fb9a0207d4cbf92" target="_blank" rel="noopener noreferrer">《JavaScript执行上下文》<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>中我就已经提到了<strong>执行栈</strong>, 让我们一起来回顾一下:</p> <p><strong>栈的特点</strong>: 后进先出（LIFO）的结构.</p> <p>（<code>LIFO</code>: <code>last-in, first-out</code>，类似于向乒乓球桶中放球，最先放入的球最后取出）</p> <p>这里还是贴上一张网图方便大家理解的好:</p> <p><img src="https://hexo-blog-1256114407.cos.ap-shenzhen-fsi.myqcloud.com/executionContext3.png" alt="img2"></p> <p>栈中的数据就像是一个个乒乓球, 最先进去的最后出来.</p> <p><strong>注⚠️</strong></p> <p>这里所说的<strong>进栈</strong>和<strong>出栈</strong>不是指赋值算进, 使用算出. 而是指<strong>赋值算进, 被清理算出</strong>, 而且位于同一函数作用域下的变量, 应该是在栈的同一层.</p> <p>所谓的变量存储于栈内存中的栈，传统意义上说指的是由内存自动创建分配的空间，例如函数的参数值与局部变量，只是其操作方式类似于栈操作，所以叫栈内存。</p> <p>比如函数调用其实就相当于栈的形式:</p> <p><strong>例子🌰</strong>:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">fn1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
  <span class="token function">fn2</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">fn2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>
	<span class="token function">fn3</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">fn3</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token function">fn1</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><p>如上, 声明的顺序是<code>1, 2, 3</code> , 但是释放的顺序是为<code>3, 2, 1</code> .</p> <p>这里释放按照这个顺序是因为 <code>3</code>最先执行完, 所以最先被释放.</p> <h3 id="堆数据结构"><a href="#堆数据结构" class="header-anchor">#</a> 堆数据结构</h3> <p>一种树状结构。好比 <code>JSON</code> 格式中的数据，你有 <code>key</code>，我有对应的 <code>value</code>, 就立马返给你。</p> <p>因为我们知道<code>JSON</code>格式的存储是无序的, 所以没有先后顺序, 所以它是一种绝对公平的数据结构.</p> <p>如图所示:</p> <img src="https://hexo-blog-1256114407.cos.ap-shenzhen-fsi.myqcloud.com/executionContext4.png" alt="img3" style="zoom:50%;"> <h3 id="队列数据结构"><a href="#队列数据结构" class="header-anchor">#</a> 队列数据结构</h3> <p>队列数据结构不同于堆, 队列是一种**先进先出(FIFO)**的数据结构.</p> <p>它也是**事件循环(Event Loop)**的基础结构.</p> <p>如图所示:</p> <img src="https://hexo-blog-1256114407.cos.ap-shenzhen-fsi.myqcloud.com/executionContext5.png" alt="img4" style="zoom:50%;"> <p>最先进入队列的任务最先出来, 类似于你排队买票, 排在前面的人先买.</p> <h3 id="变量的存放"><a href="#变量的存放" class="header-anchor">#</a> 变量的存放</h3> <p>通过上面的介绍我们知道了, 内存中有堆了栈, 那么<code>JS</code>变量具体是存放在哪里呢?</p> <ul><li>基本数据类型保存在<strong>栈</strong>内存中;</li> <li>引用数据类型保存在<strong>堆</strong>内存中.</li></ul> <ol><li>基本数据类型6种: <code>Undefined、Null、Boolean、Number、String、Symbol</code>, 由于他们在内存中分别占有固定大小的空间, 通过按值来访问.</li> <li>引用数据类型: 也就是<code>Object</code>对象, 它的存储分为<strong>访问地址</strong>和<strong>实际存放的地方</strong>; 访问地址是存储在<strong>栈</strong>中的, 当查询引用类型变量的时候, 会先从<strong>栈</strong>中读取内存地址(也就是访问地址), 然后再通过地址找到<strong>堆</strong>中的值.因此, 这种我们也把它叫为<strong>引用访问</strong>.</li></ol> <p><em>一张图方便你理解</em>🤔</p> <img src="https://hexo-blog-1256114407.cos.ap-shenzhen-fsi.myqcloud.com/executionContext6.png" alt="img5" style="zoom:50%;"> <blockquote><p>在计算机的数据结构中，栈比堆的运算速度快，Object是一个复杂的结构且可以扩展：数组可扩充，对象可添加属性，都可以增删改查。将他们放在堆中是为了不影响栈的效率。而是通过引用的方式查找到堆中的实际对象再进行操作。所以查找引用类型值的时候先去<strong>栈</strong>查找再去<strong>堆</strong>查找。</p></blockquote> <h3 id="变量存放案例"><a href="#变量存放案例" class="header-anchor">#</a> 变量存放案例</h3> <p>要是你读完了上面的<strong>堆栈存储</strong>介绍还有点模糊的话, 我们不妨来看几个案例.</p> <p><strong>案例一🌰</strong>:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> b <span class="token operator">=</span> a<span class="token punctuation">;</span>
b <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// a = ?</span>
</code></pre></div><p><strong>案例二🌰</strong>:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> obj1 <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">a</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token literal-property property">b</span><span class="token operator">:</span> <span class="token number">2</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> obj2 <span class="token operator">=</span> obj1<span class="token punctuation">;</span>
obj2<span class="token punctuation">.</span>a <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj1<span class="token punctuation">.</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// obj1.a = ?</span>
</code></pre></div><p><strong>案例三🌰</strong>:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> obj1 <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">a</span><span class="token operator">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> obj2 <span class="token operator">=</span> obj1<span class="token punctuation">;</span>
obj1 <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj2<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// obj2 = ?</span>
</code></pre></div><p>上面三个案例的答案分别对应的是: <code>1、3、{ a: 1 }</code>.</p> <ul><li>案例一中, <code>a和b</code>都是基本数据类型, 它们的值分别存储在各自独立的栈空间中, 是互不影响的, 所以修改了<code>b</code>的值后<code>a</code>还是不变. <code>var b = a</code> 的操作, 你可以理解为单纯的<code>b</code>赋值了值<code>1</code>, 而后<code>a和b</code>没有任何关系了.</li> <li>案例二中, 创建<code>obj1</code>的时候, 在栈中存储了一个名为<code>obj1</code>的变量, 同时开辟了一个堆内存用于存放了<code>{a: 1, b: 2}</code>对象, <code>obj1</code>中存放的就是指向这个堆内存对象的地址. 因此<code>obj2</code>进行赋值的时候拷贝的只是<code>obj1</code>中的地址, 实际上它们指向的都是堆内存的对象.在第三步改变这个对象的值的时候, 也相当于同时改变了<code>obj1</code>.</li> <li>案例三中, 开始时, <code>obj1</code>和<code>obj2</code>指向的都是同一堆内存对象<code>{a: 1}</code>, 在第三步将<code>obj1</code>赋值为<code>null</code>仅仅只是改变了栈中<code>obj1</code>的内存地址,将它变为了基本数据类型<code>null</code>, 并不会影响堆内存对象. 同样的, 你要将<code>obj1</code>不赋值为<code>null</code>, 而是赋值为<code>{b: 2}</code>, 对<code>obj2</code>也还是没有影响.</li></ul> <h3 id="内存空间管理"><a href="#内存空间管理" class="header-anchor">#</a> 内存空间管理</h3> <p>在上面我们说了那么多的栈内存, 堆内存, 那么在<code>JS</code>中, 是怎样管理这些内存空间的呢?</p> <p>首先, 同样的, 内存空间也是有属于自己的生命周期, 它主要分为三个阶段:</p> <ol><li>分配你所需的内存;</li> <li>使用分配到的内存(读、写);</li> <li>不需要的时候将其释放、归还.</li></ol> <p>我们可以用个例子来看一下看.</p> <p><strong>案例一🌰</strong>:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> <span class="token comment">// 在内存中给数值变量分配空间</span>
<span class="token function">alart</span><span class="token punctuation">(</span>a <span class="token operator">+</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 使用内存</span>
a <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span> <span class="token comment">// 使用完后, 释放内存空间</span>
</code></pre></div><p>上面三步分别对应着三个阶段. 当然, <code>a = null</code>这个操作是我们手动将<code>a</code>的内存空间释放. 若没有这个过程, <code>JS</code>会自己帮我做一些释放内存的工作吗? 答案当然是肯定的.</p> <p><code>JS</code>有自动垃圾收集机制, 听着这个机制的名字我想大家就知道它是做什么的了, 没错就是字面意思, 它会找出那些不再继续使用的值，然后释放其占用的内存。<strong>垃圾收集器</strong>会每隔固定的时间段就执行一次释放操作。</p> <p>在自动垃圾收集机制中, 最常用的就是通过<strong>标记清除</strong>的算法来找到哪些对象不再继续使用. 其实上面我说的将<code>a = null</code>手动释放内存其实是不准确的. 因为使用<code>a = null</code>仅仅只是做了一个释放引用的操作, 让<code>a</code>原本对应的值失去引用, 脱离执行环境, 这个值会在下一次垃圾收集器执行操作的时候被找到并释放.</p> <p>还有一点, 在局部作用域中, 当函数执行完毕了之后, 局部变量就没有存在下去的必要了, 此时垃圾收集器知道这类变量是需要回收的, 所以很容易判断.</p> <p>但是全局变量什么时候需要释放内存空间则很难判断，因此在我们的开发中，原则上应该避免使用全局变量。</p></div> <!----> <div class="readMore-wrapper"><span class="readMore">阅读全文</span></div>
                    </div>
                            <p>这是一个信息提示框。</p>
                        </div>

                        <div class="note warning">
                            <div class="note-title"><i class="fas fa-exclamation-triangle"></i> 注意</div>
                            <p>这是一个警告提示框。</p>
                        </div>

                        <div class="note success">
                            <div class="note-title"><i class="fas fa-check-circle"></i> 成功</div>
                            <p>这是一个成功提示框。</p>
                        </div>

                        <h2>代码示例</h2>
                        <pre><code class="language-javascript">// 示例代码
function example() {
    console.log('Hello, FrontendHub!');
}
</code></pre>
                    </div>

                    <!-- 文章底部导航 -->
                    <nav class="article-nav">
                        <a href="#" class="prev-article">
                            <i class="fas fa-chevron-left"></i>
                            <span>上一篇</span>
                        </a>
                        <a href="#" class="next-article">
                            <span>下一篇</span>
                            <i class="fas fa-chevron-right"></i>
                        </a>
                    </nav>
                </article>
            </div>
        </div>
    </main>

    <!-- 页脚 -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h4><i class="fas fa-code"></i> FrontendHub</h4>
                    <p>专注于前端技术学习与面试准备</p>
                </div>
                <div class="footer-section">
                    <h4>快速链接</h4>
                    <ul>
                        <li><a href="../../index.html">首页</a></li>
                        <li><a href="../index.html#courses">课程体系</a></li>
                        <li><a href="../index.html#resources">学习资源</a></li>
                    </ul>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2025 FrontendHub. 用于个人学习使用.</p>
            </div>
        </div>
    </footer>

    <!-- 返回顶部按钮 -->
    <button class="back-to-top" id="backToTop">
        <i class="fas fa-arrow-up"></i>
    </button>

    <script src="../../js/main.js"></script>
    <script src="../../js/content.js"></script>
</body>
</html>

