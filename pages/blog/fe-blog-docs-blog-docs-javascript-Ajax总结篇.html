<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="referrer" content="no-referrer">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ajax总结篇 - FrontendHub</title>
    <link rel="stylesheet" href="../../css/style.css">
    <link rel="stylesheet" href="../../css/content.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body class="content-page">
    <!-- 导航栏 -->
    <nav class="navbar">
        <div class="container">
            <div class="nav-brand">
                <a href="../../index.html" style="color: inherit; text-decoration: none; display: flex; align-items: center; gap: 0.5rem;">
                    <i class="fas fa-code"></i>
                    <span>FrontendHub</span>
                </a>
            </div>
            <button class="nav-toggle" id="navToggle">
                <span></span>
                <span></span>
                <span></span>
            </button>
            <ul class="nav-menu" id="navMenu">
                <li><a href="../../index.html">首页</a></li>
                <li><a href="../index.html#features">特色</a></li>
                <li><a href="../index.html#courses">课程</a></li>
                <li><a href="../index.html#resources">资源</a></li>
            </ul>
        </div>
    </nav>

    <!-- 面包屑导航 -->
    <div class="breadcrumb">
        <div class="container">
            <a href="../../index.html"><i class="fas fa-home"></i> 首页</a>
            <i class="fas fa-chevron-right"></i>
            <span>Ajax总结篇</span>
        </div>
    </div>

    <!-- 主要内容区 -->
    <main class="content-main">
        <div class="container">
            <div class="content-layout">
                <!-- 侧边栏目录 -->
                <aside class="sidebar">
                    <div class="sidebar-sticky">
                        <h3><i class="fas fa-list"></i> 目录</h3>
                        <nav class="toc" id="toc">
                            <!-- 目录将通过JavaScript自动生成 -->
                        </nav>
                    </div>
                </aside>

                <!-- 文章内容 -->
                <article class="article">
                    <header class="article-header">
                        <h1>Ajax总结篇</h1>
                        <div class="article-meta">
                            <span><i class="far fa-calendar"></i> 更新时间：2025-12-23</span>
                            <span><i class="far fa-clock"></i> 阅读时长：约 15 分钟</span>
                        </div>
                    </header>

                    <div class="article-content">
<div class="content__default"><p>本文主要总结整理<code>Ajax</code>的一些常用的基础知识，适合初学者。</p> <h3 id="一、ajax简介、优劣势、应用场景以及技术"><a href="#一、ajax简介、优劣势、应用场景以及技术" class="header-anchor">#</a> 一、Ajax简介、优劣势、应用场景以及技术</h3> <ul><li><p>Ajax简介 :</p> <ul><li><code>Asynchronous Javascript And XML</code> （异步的
<code>JavaScript</code>和<code>XML</code>）</li> <li>它并不是一种单一的技术，而是有机利用一系列交互式网页应用相关的技术所形成的结合体</li> <li><code>AJAX</code> 是一种用于创建快速动态网页的技术。通过在后台与服务器进行少量数据交换，<code>AJAX</code> 可以使网页实现异步更新。这意味着可以在不重新加载整个网页的情况下，对网页的某部分进行更新。</li></ul></li> <li><p>优点：</p> <ul><li>页面无刷新，用户体验好。</li> <li>异步通信，更加快的响应能力。</li> <li>减少冗余请求，减轻了服务器负担</li> <li>基于标准化的并被广泛支持的技术，不需要下载插件或者小程序</li></ul></li> <li><p>缺点：</p> <ul><li><code>ajax</code>干掉了<code>back</code>按钮，即对浏览器后退机制的破坏。</li> <li>存在一定的安全问题。</li> <li>对搜索引擎的支持比较弱。</li> <li>破坏了程序的异常机制。</li> <li>无法用<code>URL</code>直接访问</li></ul></li> <li><p><code>ajax</code>应用场景</p> <ul><li>场景 1. 数据验证</li> <li>场景 2. 按需取数据</li> <li>场景 3. 自动更新页面</li></ul></li> <li><p><code>AJAX</code> 包含以下五个部分：
<code>ajax</code>并非一种新的技术，而是几种原有技术的结合体。它由下列技术组合而成。</p> <ul><li>使用<code>CSS</code>和<code>XHTML</code>来表示。</li> <li>使用<code>DOM</code>模型来交互和动态显示。</li> <li>数据互换和操作技术，使用<code>XML</code>与<code>XSLT</code></li> <li>使用<code>XMLHttpRequest</code>来和服务器进行异步通信。</li> <li>使用<code>javascript</code>来绑定和调用。</li></ul></li></ul> <p>在上面几中技术中，除了<code>XmlHttpRequest</code>对象以外，其它所有的技术都是基于<code>web</code>标准并且已经得到了广泛使用的，<code>XMLHttpRequest</code>虽然目前还没有被<code>W3C</code>所采纳，但是它已经是一个事实的标准，因为目前几乎所有的主流浏览器都支持它</p> <p><img src="https://s.poetries.top/gitee/20191001/11.png" alt=""></p> <ul><li>第一张图尤其说明了传统<code>Web</code> 应用程序的结构与采用了 <code>AJAX</code> 技术的 <code>Web</code>
应用程序的结构上的差别</li> <li>主要的差别，其实不是 <code>JavaScript</code>，不是 <code>HTML/XHTML</code>和 <code>CSS</code>，而是采用
了 <code>XMLHttpRequest</code> 来向服务器异步的请求 <code>XML</code> 数据</li></ul> <p><img src="https://s.poetries.top/gitee/20191001/12.png" alt=""></p> <ul><li>再来看第二张图，传统的 <code>Web</code> 应用模式，用户的体验是割裂的，点击-&gt;等待-&gt;
看到新的页面-&gt;再点击-&gt;再等待。而采用了<code>AJAX</code>技术之后，大部分的计算工作，都是在用户不察觉的情况下，交由服务器去完成了</li></ul> <p><img src="https://s.poetries.top/gitee/20191001/13.png" alt=""></p> <p><img src="https://s.poetries.top/gitee/20191001/14.png" alt=""></p> <h3 id="二、创建ajax的步骤"><a href="#二、创建ajax的步骤" class="header-anchor">#</a> 二、创建ajax的步骤</h3> <blockquote><p><code>Ajax</code>的原理简单来说通过<code>XmlHttpRequest</code>对象来向服务器发异步请求，从服务器获得数据，然后用<code>javascript</code>来操作<code>DOM</code>而更新页面。这其中最关键的一步就是从服务器获得请求数据。原生创建<code>ajax</code>可分为以下四步</p></blockquote> <h4 id="_1、创建xmlhttprequest对象"><a href="#_1、创建xmlhttprequest对象" class="header-anchor">#</a> 1、创建<code>XMLHttpRequest</code>对象</h4> <p><code>Ajax</code>的核心是<code>XMLHttpRequest</code>对象，它是<code>Ajax</code>实现的关键，发送异步请求、接受响应以及执行回调都是通过它来完成</p> <p>所有现代浏览器（IE7+、Firefox、Chrome、Safari 以及 Opera）均内建 XMLHttpRequest 对象。</p> <ul><li>创建 <code>XMLHttpRequest</code>对象的语法：</li></ul> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> xhr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XMLHttpRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ul><li>老版本的 <code>Internet Explorer</code>（IE5 和 IE6）使用<code>ActiveX</code> 对象：</li></ul> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> xhr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ActiveXObject</span><span class="token punctuation">(</span><span class="token string">"Microsoft.XMLHTTP"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>为了应对所有的现代浏览器，包括 <code>IE5</code> 和 <code>IE6</code>，请检查浏览器是否支持 <code>XMLHttpRequest</code>对象。如果支持，则创建<code>XMLHttpRequest</code>对象。如果不支持，则创建<code>ActiveXObject</code>：</p> <ul><li>兼容各个浏览器的创建<code>Ajax</code>的工具函数</li></ul> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">createRequest</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token keyword">try</span> <span class="token punctuation">{</span>
		xhr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XMLHttpRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token keyword">catch</span> <span class="token punctuation">(</span>tryMS<span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token keyword">try</span> <span class="token punctuation">{</span>
			xhr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ActiveXObject</span><span class="token punctuation">(</span><span class="token string">"Msxm12.XMLHTTP"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>otherMS<span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">try</span> <span class="token punctuation">{</span>
				xhr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ActiveXObject</span><span class="token punctuation">(</span><span class="token string">"Microsoft.XMLHTTP"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span><span class="token keyword">catch</span> <span class="token punctuation">(</span>failed<span class="token punctuation">)</span> <span class="token punctuation">{</span>
				xhr <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">return</span> xhr<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="_2、准备请求"><a href="#_2、准备请求" class="header-anchor">#</a> 2、准备请求</h4> <ul><li>初始化该<code>XMLHttpRequest</code>对象，接受三个参数：</li></ul> <div class="language-javascript extra-class"><pre class="language-javascript"><code>xhr<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span>method<span class="token punctuation">,</span>url<span class="token punctuation">,</span>async<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ul><li>第一个参数表示请求类型的字符串，其值可以是<code>GET</code>或者<code>POST</code>。</li> <li><code>GET</code>请求：</li></ul> <div class="language-javascript extra-class"><pre class="language-javascript"><code>xhr<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">"GET"</span><span class="token punctuation">,</span>demo<span class="token punctuation">.</span>php<span class="token operator">?</span>name<span class="token operator">=</span>tsrot<span class="token operator">&amp;</span>age<span class="token operator">=</span><span class="token number">24</span><span class="token punctuation">,</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ul><li><code>POST</code>请求：</li></ul> <div class="language-javascript extra-class"><pre class="language-javascript"><code>xhr<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">"POST"</span><span class="token punctuation">,</span>demo<span class="token punctuation">.</span>php<span class="token punctuation">,</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ul><li>第二个参数是要作为请求发送目标的URL。</li> <li>第三个参数是<code>true</code>或<code>false</code>，表示请求是以异步还是同步的模式发出。（默认为<code>true</code>，一般不建议为<code>false</code>）
<ul><li><code>false</code>：同步模式发出的请求会暂停所有javascript代码的执行，知道服务器获得响应为止，如果浏览器在连接网络时或者在下载文件时出了故障，页面就会一直挂起。</li> <li><code>true</code>：异步模式发出的请求，请求对象收发数据的同时，浏览器可以继续加载页面，执行其他javascript代码</li></ul></li></ul> <h4 id="_3、发送请求"><a href="#_3、发送请求" class="header-anchor">#</a> 3、发送请求</h4> <div class="language-javascript extra-class"><pre class="language-javascript"><code>xhr<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>一般情况下，使用<code>Ajax</code>提交的参数多是些简单的字符串，可以直接使用<code>GET</code>方法将要提交的参数写到<code>open</code>方法的<code>url</code>参数中，此时<code>send</code>方法的参数为<code>null</code>或为空。</p> <ul><li><code>GET</code>请求：</li></ul> <div class="language-javascript extra-class"><pre class="language-javascript"><code>xhr<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">"GET"</span><span class="token punctuation">,</span>demo<span class="token punctuation">.</span>php<span class="token operator">?</span>name<span class="token operator">=</span>tsrot<span class="token operator">&amp;</span>age<span class="token operator">=</span><span class="token number">24</span><span class="token punctuation">,</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
xhr<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ul><li><code>POST</code>请求：
如果需要像 <code>HTML</code> 表单那样 <code>POST</code> 数据，请使用 <code>setRequestHeader()</code>来添加 <code>HTTP</code> 头。然后在<code>send()</code>方法中规定您希望发送的数据：</li></ul> <div class="language-javascript extra-class"><pre class="language-javascript"><code>xhr<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">"POST"</span><span class="token punctuation">,</span>demo<span class="token punctuation">.</span>php<span class="token punctuation">,</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
xhr<span class="token punctuation">.</span><span class="token function">setRequestHeder</span><span class="token punctuation">(</span><span class="token string">"Content-Type"</span><span class="token punctuation">,</span><span class="token string">"application/x-www-form-urlencoded;charset=UTF-8"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
xhr<span class="token punctuation">.</span>sen
</code></pre></div><h4 id="_4、处理响应"><a href="#_4、处理响应" class="header-anchor">#</a> 4、处理响应</h4> <div class="language-javascript extra-class"><pre class="language-javascript"><code>xhr<span class="token punctuation">.</span><span class="token function-variable function">onreadystatechange</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token keyword">if</span><span class="token punctuation">(</span>xhr<span class="token punctuation">.</span>readyState <span class="token operator">==</span> <span class="token number">4</span> <span class="token operator">&amp;&amp;</span> xhr<span class="token punctuation">.</span>status <span class="token operator">==</span> <span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>xhr<span class="token punctuation">.</span>responseText<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li><p><code>onreadystatechange</code> ：当处理过程发生变化的时候执行下面的函数</p></li> <li><p><code>readyState</code> ：<code>ajax</code>处理过程</p> <ul><li>0：请求未初始化（还没有调用 <code>open()</code>）。</li> <li>1：请求已经建立，但是还没有发送（还没有调用 <code>send()</code>）。</li> <li>2：请求已发送，正在处理中（通常现在可以从响应中获取内容头）。</li> <li>3：请求在处理中；通常响应中已有部分数据可用了，但是服务器还没有完成响应的生成。</li> <li>4：响应已完成；您可以获取并使用服务器的响应了。</li></ul></li> <li><p><code>status</code>属性：</p> <ul><li>200:"OK"</li> <li>404: 未找到页面</li></ul></li> <li><p><code>responseText</code>：获得字符串形式的响应数据</p></li> <li><p><code>responseXML</code>：获得 <code>XML</code>形式的响应数据</p></li> <li><p>对象转换为JSON格式使用<code>JSON.stringify</code></p></li> <li><p><code>json</code>转换为对象格式用<code>JSON.parse()</code></p></li> <li><p>返回值一般为<code>json</code>字符串，可以用<code>JSON.parse(xhr.responseText)</code>转化为<code>JSON</code>对象</p></li> <li><p><strong>从服务器传回的数据是json格式，这里做一个例子说明，如何利用</strong></p> <ul><li>1、首先需要从<code>XMLHttpRequest</code>对象取回数据这是一个<code>JSON</code>串，把它转换为真正的<code>JavaScript</code>对象。使用<code>JSON.parse(xhr.responseText)</code>转化为<code>JSON</code>对象</li> <li>2、遍历得到的数组，向<code>DOM</code>中添加新元素</li></ul></li></ul> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">example</span><span class="token punctuation">(</span><span class="token parameter">responseText</span><span class="token punctuation">)</span><span class="token punctuation">{</span>

<span class="token keyword">var</span> saleDiv<span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">"sales"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> sales <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>responseText<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">var</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span>sales<span class="token punctuation">.</span>length<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">var</span> sale <span class="token operator">=</span> sales<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
         <span class="token keyword">var</span> div <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">"div"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
         div<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"class"</span><span class="token punctuation">,</span><span class="token string">"salseItem"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        div<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> sale<span class="token punctuation">.</span>name <span class="token operator">+</span> sale<span class="token punctuation">.</span>sales<span class="token punctuation">;</span>
        salseDiv<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>div<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p><img src="https://s.poetries.top/gitee/20191001/15.png" alt=""></p> <h4 id="_5、封装例子"><a href="#_5、封装例子" class="header-anchor">#</a> 5、封装例子</h4> <ul><li>将AJAX请求封装成ajax()方法，它接受一个配置对象params</li></ul> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">ajax</span><span class="token punctuation">(</span><span class="token parameter">params</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>   
  params <span class="token operator">=</span> params <span class="token operator">||</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>   
  params<span class="token punctuation">.</span>data <span class="token operator">=</span> params<span class="token punctuation">.</span>data <span class="token operator">||</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>   
  <span class="token comment">// 判断是ajax请求还是jsonp请求</span>
  <span class="token keyword">var</span> json <span class="token operator">=</span> params<span class="token punctuation">.</span>jsonp <span class="token operator">?</span> <span class="token function">jsonp</span><span class="token punctuation">(</span>params<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">json</span><span class="token punctuation">(</span>params<span class="token punctuation">)</span><span class="token punctuation">;</span>   
  <span class="token comment">// ajax请求   </span>
  <span class="token keyword">function</span> <span class="token function">json</span><span class="token punctuation">(</span><span class="token parameter">params</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>   
    <span class="token comment">//  请求方式，默认是GET</span>
    params<span class="token punctuation">.</span>type <span class="token operator">=</span> <span class="token punctuation">(</span>params<span class="token punctuation">.</span>type <span class="token operator">||</span> <span class="token string">'GET'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toUpperCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
    <span class="token comment">// 避免有特殊字符，必须格式化传输数据  </span>
    params<span class="token punctuation">.</span>data <span class="token operator">=</span> <span class="token function">formatParams</span><span class="token punctuation">(</span>params<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>   
    <span class="token keyword">var</span> xhr <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>    

    <span class="token comment">// 实例化XMLHttpRequest对象   </span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>window<span class="token punctuation">.</span>XMLHttpRequest<span class="token punctuation">)</span> <span class="token punctuation">{</span>   
      xhr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XMLHttpRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>   
      <span class="token comment">// IE6及其以下版本   </span>
      xhr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ActiveXObjcet</span><span class="token punctuation">(</span><span class="token string">'Microsoft.XMLHTTP'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   
    <span class="token punctuation">}</span><span class="token punctuation">;</span> 
</code></pre></div><ul><li>使用实例：</li></ul> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token function">ajax</span><span class="token punctuation">(</span><span class="token punctuation">{</span>   
  url<span class="token operator">:</span> <span class="token string">'test.php'</span><span class="token punctuation">,</span>   <span class="token comment">// 请求地址</span>
  type<span class="token operator">:</span> <span class="token string">'POST'</span><span class="token punctuation">,</span>   <span class="token comment">// 请求类型，默认"GET"，还可以是"POST"</span>
  data<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token string-property property">'b'</span><span class="token operator">:</span> <span class="token string">'异步请求'</span><span class="token punctuation">}</span><span class="token punctuation">,</span>   <span class="token comment">// 传输数据</span>
  <span class="token function-variable function">success</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span><span class="token punctuation">{</span>   <span class="token comment">// 请求成功的回调函数</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function-variable function">error</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">error</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>   <span class="token comment">// 请求失败的回调函数</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ul><li>这个过程是一定要记在脑子里的</li></ul> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">ajax</span><span class="token punctuation">(</span><span class="token parameter">url<span class="token punctuation">,</span> success<span class="token punctuation">,</span> fail</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token comment">// 1. 创建连接</span>
    <span class="token keyword">var</span> xhr <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    xhr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XMLHttpRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token comment">// 2. 连接服务器</span>
    xhr<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">'get'</span><span class="token punctuation">,</span> url<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span>
    <span class="token comment">// 3. 发送请求</span>
    xhr<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 4. 接受请求</span>
    xhr<span class="token punctuation">.</span><span class="token function-variable function">onreadystatechange</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>xhr<span class="token punctuation">.</span>readyState <span class="token operator">==</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>xhr<span class="token punctuation">.</span>status <span class="token operator">==</span> <span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token function">success</span><span class="token punctuation">(</span>xhr<span class="token punctuation">.</span>responseText<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span> <span class="token comment">// fail</span>
                fail <span class="token operator">&amp;&amp;</span> <span class="token function">fail</span><span class="token punctuation">(</span>xhr<span class="token punctuation">.</span>status<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p><img src="https://s.poetries.top/gitee/20191001/16.png" alt=""></p> <h5 id="谈谈jsonp"><a href="#谈谈jsonp" class="header-anchor">#</a> 谈谈JSONP</h5> <ul><li><p>要访问web服务器的数据除了XMLHttpRequest外还有一种方法是JSONP</p></li> <li><p>如果HTML和JavaScript与数据同时在同一个机器上，就可以使用XMLHttpRequest</p></li> <li><p>什么是JSONP？</p> <ul><li>JSONP(JSON with Padding)是一个非官方的协议，它允许在服务器端集成Script tags返回至客户端，通过javascript callback的形式实现跨域访问（这仅仅是JSONP简单的实现形式）</li></ul></li> <li><p>JSONP有什么用？</p> <ul><li>由于同源策略的限制，XmlHttpRequest只允许请求当前源（域名、协议、端口）的资源，为了实现跨域请求，可以通过script标签实现跨域请求，然后在服务端输出JSON数据并执行回调函数，从而解决了跨域的数据请求</li></ul></li> <li><p>如何使用JSONP？</p> <ul><li>在客户端声明回调函数之后，客户端通过script标签向服务器跨域请求数据，然后服务端返回相应的数据并动态执行回调函数</li></ul></li> <li><p>用XMLHttpRequest时，我们得到一个字符串；要用JSON.parse把字符串转化成对象，使用jsonp时，script标志会解析并执行返回的代码，等我们处理数据时，已经是一个JavaScript对象了</p></li> <li><p>简单实例</p></li></ul> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text/html; charset=utf-8<span class="token punctuation">"</span></span> <span class="token attr-name">http-equiv</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Content-Type<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span>  
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text/javascript<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">  
    <span class="token keyword">function</span> <span class="token function">jsonpCallback</span><span class="token punctuation">(</span><span class="token parameter">result</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  
        <span class="token function">alert</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>  
        <span class="token function">alert</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span>  
        <span class="token function">alert</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>c<span class="token punctuation">)</span><span class="token punctuation">;</span>  
        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token keyword">in</span> result<span class="token punctuation">)</span> <span class="token punctuation">{</span>  
            <span class="token function">alert</span><span class="token punctuation">(</span>i<span class="token operator">+</span><span class="token string">":"</span><span class="token operator">+</span>result<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//循环输出a:1,b:2,etc.  </span>
        <span class="token punctuation">}</span>  
    <span class="token punctuation">}</span>  
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>  
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text/javascript<span class="token punctuation">"</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://crossdomain.com/services.php?callback=jsonpCallback<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>  
<span class="token comment">&lt;!--callback参数指示生成JavaScript代码时要使用的函数jsonpcallback--&gt;</span>
</code></pre></div><ul><li>注意浏览器的缓存问题
<ul><li>在末尾增加一个随机数可避免频繁请求同一个链接出现的缓存问题</li> <li>`</li></ul></li></ul> <p><strong>原生JavaScript实现完整的Ajax、JSONP例子</strong></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">ajax</span><span class="token punctuation">(</span><span class="token parameter">params</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	params <span class="token operator">=</span> params <span class="token operator">||</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
	params<span class="token punctuation">.</span>data <span class="token operator">=</span> params<span class="token punctuation">.</span>data <span class="token operator">||</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
	<span class="token keyword">var</span> json <span class="token operator">=</span> params<span class="token punctuation">.</span>jsonp <span class="token operator">?</span> <span class="token function">jsonp</span><span class="token punctuation">(</span>params<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">json</span><span class="token punctuation">(</span>params<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">// ajax请求</span>
	<span class="token keyword">function</span> <span class="token function">json</span><span class="token punctuation">(</span><span class="token parameter">params</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		params<span class="token punctuation">.</span>type <span class="token operator">=</span> <span class="token punctuation">(</span>params<span class="token punctuation">.</span>type <span class="token operator">||</span> <span class="token string">'GET'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toUpperCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		params<span class="token punctuation">.</span>data <span class="token operator">=</span> <span class="token function">formatParams</span><span class="token punctuation">(</span>params<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">var</span> xhr <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>

		<span class="token comment">// 实例化XMLHttpRequest对象</span>
		<span class="token keyword">if</span><span class="token punctuation">(</span>window<span class="token punctuation">.</span>XMLHttpRequest<span class="token punctuation">)</span> <span class="token punctuation">{</span>
			xhr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XMLHttpRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
			<span class="token comment">// IE6及其以下版本</span>
			xhr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ActiveXObjcet</span><span class="token punctuation">(</span><span class="token string">'Microsoft.XMLHTTP'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">;</span>

		<span class="token comment">// 监听事件</span>
		xhr<span class="token punctuation">.</span><span class="token function-variable function">onreadystatechange</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">if</span><span class="token punctuation">(</span>xhr<span class="token punctuation">.</span>readyState <span class="token operator">==</span> <span class="token number">4</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">var</span> status <span class="token operator">=</span> xhr<span class="token punctuation">.</span>status<span class="token punctuation">;</span>
				<span class="token keyword">if</span><span class="token punctuation">(</span>status <span class="token operator">&gt;=</span> <span class="token number">200</span> <span class="token operator">&amp;&amp;</span> status <span class="token operator">&lt;</span> <span class="token number">300</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token keyword">var</span> response <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">;</span>
					<span class="token keyword">var</span> type <span class="token operator">=</span> xhr<span class="token punctuation">.</span><span class="token function">getResponseHeader</span><span class="token punctuation">(</span><span class="token string">'Content-type'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token keyword">if</span><span class="token punctuation">(</span>type<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">'xml'</span><span class="token punctuation">)</span> <span class="token operator">!==</span> <span class="token operator">-</span><span class="token number">1</span> <span class="token operator">&amp;&amp;</span> xhr<span class="token punctuation">.</span>responseXML<span class="token punctuation">)</span> <span class="token punctuation">{</span>
						response <span class="token operator">=</span> xhr<span class="token punctuation">.</span>responseXML<span class="token punctuation">;</span> <span class="token comment">//Document对象响应</span>
					<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>type <span class="token operator">===</span> <span class="token string">'application/json'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
						response <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>xhr<span class="token punctuation">.</span>responseText<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//JSON响应</span>
					<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
						response <span class="token operator">=</span> xhr<span class="token punctuation">.</span>responseText<span class="token punctuation">;</span> <span class="token comment">//字符串响应</span>
					<span class="token punctuation">}</span><span class="token punctuation">;</span>
					params<span class="token punctuation">.</span>success <span class="token operator">&amp;&amp;</span> params<span class="token punctuation">.</span><span class="token function">success</span><span class="token punctuation">(</span>response<span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
					params<span class="token punctuation">.</span>error <span class="token operator">&amp;&amp;</span> params<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>status<span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span><span class="token punctuation">;</span>

		<span class="token comment">// 连接和传输数据</span>
		<span class="token keyword">if</span><span class="token punctuation">(</span>params<span class="token punctuation">.</span>type <span class="token operator">==</span> <span class="token string">'GET'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			xhr<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span>params<span class="token punctuation">.</span>type<span class="token punctuation">,</span> params<span class="token punctuation">.</span>url <span class="token operator">+</span> <span class="token string">'?'</span> <span class="token operator">+</span> params<span class="token punctuation">.</span>data<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			xhr<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
			xhr<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span>params<span class="token punctuation">.</span>type<span class="token punctuation">,</span> params<span class="token punctuation">.</span>url<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token comment">//设置提交时的内容类型</span>
			xhr<span class="token punctuation">.</span><span class="token function">setRequestHeader</span><span class="token punctuation">(</span><span class="token string">'Content-Type'</span><span class="token punctuation">,</span> <span class="token string">'application/x-www-form-urlencoded; charset=UTF-8'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			xhr<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span>params<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>

	<span class="token comment">// jsonp请求</span>
	<span class="token keyword">function</span> <span class="token function">jsonp</span><span class="token punctuation">(</span><span class="token parameter">params</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token comment">//创建script标签并加入到页面中</span>
		<span class="token keyword">var</span> callbackName <span class="token operator">=</span> params<span class="token punctuation">.</span>jsonp<span class="token punctuation">;</span>
		<span class="token keyword">var</span> head <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementsByTagName</span><span class="token punctuation">(</span><span class="token string">'head'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
		<span class="token comment">// 设置传递给后台的回调参数名</span>
		params<span class="token punctuation">.</span>data<span class="token punctuation">[</span><span class="token string">'callback'</span><span class="token punctuation">]</span> <span class="token operator">=</span> callbackName<span class="token punctuation">;</span>
		<span class="token keyword">var</span> data <span class="token operator">=</span> <span class="token function">formatParams</span><span class="token punctuation">(</span>params<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">var</span> script <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'script'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		head<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>script<span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token comment">//创建jsonp回调函数</span>
		window<span class="token punctuation">[</span>callbackName<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">json</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			head<span class="token punctuation">.</span><span class="token function">removeChild</span><span class="token punctuation">(</span>script<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token function">clearTimeout</span><span class="token punctuation">(</span>script<span class="token punctuation">.</span>timer<span class="token punctuation">)</span><span class="token punctuation">;</span>
			window<span class="token punctuation">[</span>callbackName<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
			params<span class="token punctuation">.</span>success <span class="token operator">&amp;&amp;</span> params<span class="token punctuation">.</span><span class="token function">success</span><span class="token punctuation">(</span>json<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">;</span>

		<span class="token comment">//发送请求</span>
		script<span class="token punctuation">.</span>src <span class="token operator">=</span> params<span class="token punctuation">.</span>url <span class="token operator">+</span> <span class="token string">'?'</span> <span class="token operator">+</span> data<span class="token punctuation">;</span>

		<span class="token comment">//超时处理</span>
		<span class="token keyword">if</span><span class="token punctuation">(</span>params<span class="token punctuation">.</span>time<span class="token punctuation">)</span> <span class="token punctuation">{</span>
			script<span class="token punctuation">.</span>timer <span class="token operator">=</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				window<span class="token punctuation">[</span>callbackName<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
				head<span class="token punctuation">.</span><span class="token function">removeChild</span><span class="token punctuation">(</span>script<span class="token punctuation">)</span><span class="token punctuation">;</span>
				params<span class="token punctuation">.</span>error <span class="token operator">&amp;&amp;</span> params<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
					<span class="token literal-property property">message</span><span class="token operator">:</span> <span class="token string">'超时'</span>
				<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span><span class="token punctuation">,</span> time<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span><span class="token punctuation">;</span>
	<span class="token comment">//格式化参数</span>
	<span class="token keyword">function</span> <span class="token function">formatParams</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">var</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
		<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">var</span> name <span class="token keyword">in</span> data<span class="token punctuation">)</span> <span class="token punctuation">{</span>
			arr<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token function">encodeURIComponent</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">'='</span> <span class="token operator">+</span> <span class="token function">encodeURIComponent</span><span class="token punctuation">(</span>data<span class="token punctuation">[</span>name<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">;</span>
		<span class="token comment">// 添加一个随机数，防止缓存</span>
		arr<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">'v='</span> <span class="token operator">+</span> <span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">return</span> arr<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">'&amp;'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token comment">// 获取随机数</span>
	<span class="token keyword">function</span> <span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">10000</span> <span class="token operator">+</span> <span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>使用</li></ul> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token function">ajax</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
				<span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">'get.php'</span><span class="token punctuation">,</span>
				<span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">'GET'</span><span class="token punctuation">,</span>
				<span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token string-property property">'intro'</span><span class="token operator">:</span> <span class="token string">'get请求'</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
				<span class="token function-variable function">success</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
					res <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>
					document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> res<span class="token punctuation">.</span>intro<span class="token punctuation">;</span>
					console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token function">ajax</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
				<span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">'post.php'</span><span class="token punctuation">,</span>
				<span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">'POST'</span><span class="token punctuation">,</span>
				<span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token string-property property">'intro'</span><span class="token operator">:</span> <span class="token string">'post请求'</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
				<span class="token function-variable function">success</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
					res <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>
					document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'b'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> res<span class="token punctuation">.</span>intro<span class="token punctuation">;</span>
					console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token function">ajax</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
				<span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">'http://music.qq.com/musicbox/shop/v3/data/hit/hit_all.js'</span><span class="token punctuation">,</span>
				<span class="token literal-property property">jsonp</span><span class="token operator">:</span> <span class="token string">'jsonpCallback'</span><span class="token punctuation">,</span>
				<span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token string-property property">'callback'</span><span class="token operator">:</span> <span class="token string">'jsonpCallback'</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
				<span class="token function-variable function">success</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
					<span class="token function">JsonCallback</span><span class="token punctuation">(</span>json<span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><blockquote><p>下面我们就根据以上 封装的例子跨域获取qq音乐的数据</p></blockquote> <ul><li><a href="http://codepen.io/poetries/pen/oBMKmG" target="_blank" rel="noopener noreferrer">在线演示--跨域获取qq音乐的数据<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <p><strong>下面的方法也可以实现</strong></p> <ul><li>使用jQuery实现</li></ul> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token operator">&lt;</span>script src<span class="token operator">=</span><span class="token string">"jquery-3.1.0.min.js"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span>script type<span class="token operator">=</span><span class="token string">"text/javascript"</span><span class="token operator">&gt;</span>

			$<span class="token punctuation">.</span><span class="token function">ajax</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
				  <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">"get"</span><span class="token punctuation">,</span>
				  <span class="token literal-property property">async</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
				  <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">"http://music.qq.com/musicbox/shop/v3/data/hit/hit_all.js"</span><span class="token punctuation">,</span>
				  <span class="token literal-property property">dataType</span><span class="token operator">:</span> <span class="token string">"jsonp"</span><span class="token punctuation">,</span>
				  <span class="token literal-property property">jsonp</span><span class="token operator">:</span> <span class="token string">"callback"</span><span class="token punctuation">,</span>
				  <span class="token literal-property property">jsonpCallback</span><span class="token operator">:</span> <span class="token string">"JsonCallback"</span><span class="token punctuation">,</span>
				  <span class="token literal-property property">scriptCharset</span><span class="token operator">:</span> <span class="token string">'GBK'</span><span class="token punctuation">,</span><span class="token comment">//设置编码，否则会乱码</span>
				  <span class="token function-variable function">success</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				    <span class="token comment">//var result = JSON.stringify(data);</span>
					  <span class="token function">JsonCallback</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
				  <span class="token punctuation">}</span><span class="token punctuation">,</span>
				  <span class="token function-variable function">error</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				    <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">'fail'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				  <span class="token punctuation">}</span>
				<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">function</span> <span class="token function">JsonCallback</span><span class="token punctuation">(</span><span class="token parameter">json</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
				<span class="token keyword">var</span> data <span class="token operator">=</span> json<span class="token punctuation">.</span>songlist<span class="token punctuation">;</span>
				<span class="token keyword">var</span> html <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">;</span>
				<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span>data<span class="token punctuation">.</span>length<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					document<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>data<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>url<span class="token operator">+</span><span class="token string">"&lt;br&gt;"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>

			<span class="token punctuation">}</span>
		<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre></div><ul><li>原生js简洁实现</li></ul> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> script <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">"script"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			script<span class="token punctuation">.</span>src <span class="token operator">=</span> <span class="token string">'http://music.qq.com/musicbox/shop/v3/data/hit/hit_all.js?callback=JsonCallback'</span><span class="token punctuation">;</span>
			document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>script<span class="token punctuation">)</span><span class="token punctuation">;</span>


			<span class="token keyword">function</span> <span class="token function">JsonCallback</span><span class="token punctuation">(</span><span class="token parameter">json</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
				<span class="token keyword">var</span> data <span class="token operator">=</span> json<span class="token punctuation">.</span>songlist<span class="token punctuation">;</span>
				<span class="token keyword">var</span> html <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">;</span>
				<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span>data<span class="token punctuation">.</span>length<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>

			<span class="token punctuation">}</span>
</code></pre></div><h3 id="三、-jquery中的ajax"><a href="#三、-jquery中的ajax" class="header-anchor">#</a> 三、 jQuery中的Ajax</h3> <ul><li>jQuery中的<code>ajax</code>封装案例</li></ul> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">//ajax请求后台数据</span>
<span class="token keyword">var</span> btn <span class="token operator">=</span>  document<span class="token punctuation">.</span><span class="token function">getElementsByTagName</span><span class="token punctuation">(</span><span class="token string">"input"</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
btn<span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	
	<span class="token function">ajax</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token comment">//json格式</span>
		<span class="token literal-property property">type</span><span class="token operator">:</span><span class="token string">"post"</span><span class="token punctuation">,</span>
		<span class="token literal-property property">url</span><span class="token operator">:</span><span class="token string">"post.php"</span><span class="token punctuation">,</span>
		<span class="token literal-property property">data</span><span class="token operator">:</span><span class="token string">"username=poetries&amp;pwd=123456"</span><span class="token punctuation">,</span>
		<span class="token literal-property property">asyn</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span>
		<span class="token function-variable function">success</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
			document<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">//封装ajax</span>
<span class="token keyword">function</span> <span class="token function">ajax</span><span class="token punctuation">(</span><span class="token parameter">aJson</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token keyword">var</span> ajx <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
	<span class="token keyword">var</span> type <span class="token operator">=</span> aJson<span class="token punctuation">.</span>type <span class="token operator">||</span> <span class="token string">"get"</span><span class="token punctuation">;</span>
	<span class="token keyword">var</span> asyn <span class="token operator">=</span> aJson<span class="token punctuation">.</span>asyn <span class="token operator">||</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
	<span class="token keyword">var</span> url <span class="token operator">=</span> aJson<span class="token punctuation">.</span>url<span class="token punctuation">;</span>		<span class="token comment">// url 接收 传输位置</span>
	<span class="token keyword">var</span> success <span class="token operator">=</span> aJson<span class="token punctuation">.</span>success<span class="token punctuation">;</span><span class="token comment">// success 接收 传输完成后的回调函数</span>
	<span class="token keyword">var</span> data <span class="token operator">=</span> aJson<span class="token punctuation">.</span>data <span class="token operator">||</span> <span class="token string">''</span><span class="token punctuation">;</span><span class="token comment">// data 接收需要附带传输的数据</span>
	
	<span class="token keyword">if</span><span class="token punctuation">(</span>window<span class="token punctuation">.</span>XMLHttpRequest<span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token comment">//兼容处理</span>
		ajx <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XMLHttpRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//一般浏览器</span>
	<span class="token punctuation">}</span><span class="token keyword">else</span>
	<span class="token punctuation">{</span>
		ajx <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ActiveXObject</span><span class="token punctuation">(</span><span class="token string">"Microsoft.XMLHTTP"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//IE6+</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>type <span class="token operator">==</span> <span class="token string">"get"</span> <span class="token operator">&amp;&amp;</span> data<span class="token punctuation">)</span>
	<span class="token punctuation">{</span>
		url <span class="token operator">+=</span><span class="token string">"/?"</span><span class="token operator">+</span>data<span class="token operator">+</span><span class="token string">"&amp;"</span><span class="token operator">+</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	
	<span class="token comment">//初始化ajax请求</span>
	ajx<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span> type <span class="token punctuation">,</span> url <span class="token punctuation">,</span> asyn <span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">//规定传输数据的格式</span>
	ajx<span class="token punctuation">.</span><span class="token function">setRequestHeader</span><span class="token punctuation">(</span><span class="token string">'content-type'</span><span class="token punctuation">,</span><span class="token string">'application/x-www-form-urlencoded'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">//发送ajax请求（包括post数据的传输）</span>
	type <span class="token operator">==</span> <span class="token string">"get"</span> <span class="token operator">?</span>ajx<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span>ajx<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span>aJson<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
	
	<span class="token comment">//处理请求</span>
	ajx<span class="token punctuation">.</span><span class="token function-variable function">onreadystatechange</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">aJson</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
		
	<span class="token keyword">if</span><span class="token punctuation">(</span>ajx<span class="token punctuation">.</span>readState <span class="token operator">==</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
			
		<span class="token keyword">if</span> <span class="token punctuation">(</span>ajx<span class="token punctuation">.</span>status <span class="token operator">==</span> <span class="token number">200</span> <span class="token operator">&amp;&amp;</span> ajx<span class="token punctuation">.</span>status<span class="token operator">&lt;</span><span class="token number">300</span><span class="token punctuation">)</span><span class="token comment">//200是HTTP 请求成功的状态码</span>
		<span class="token punctuation">{</span>
			<span class="token comment">//请求成功处理数据</span>
			success <span class="token operator">&amp;&amp;</span> <span class="token function">success</span><span class="token punctuation">(</span>ajx<span class="token punctuation">.</span>responseText<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
			<span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">"请求出错"</span><span class="token operator">+</span>ajx<span class="token punctuation">.</span>status<span class="token punctuation">)</span><span class="token punctuation">;</span>
			
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
		
	<span class="token punctuation">}</span>
</code></pre></div><h4 id="jquery中的ajax的一些方法"><a href="#jquery中的ajax的一些方法" class="header-anchor">#</a> jQuery中的Ajax的一些方法</h4> <p><code>jquery</code>对<code>Ajax</code>操作进行了封装，在<code>jquery</code>中的<code>$.ajax()</code>方法属于最底层的方法，第<code>2</code>层是<code>load()</code>、<code>$.get()</code>、<code>$.post();</code>第<code>3</code>层是<code>$.getScript()</code>、<code>$.getJSON()</code>，第<code>2</code>层使用频率很高</p> <h5 id="load-方法"><a href="#load-方法" class="header-anchor">#</a> <code>load()</code>方法</h5> <ul><li><code>load()</code>方法是<code>jquery</code>中最简单和常用的<code>ajax</code>方法，能载入远程<code>HTML</code>代码并插入<code>DOM</code>中 结构为：<code>load(url,[data],[callback])</code></li> <li>使用<code>url</code>参数指定选择符可以加载页面内的某些元素 <code>load</code>方法中<code>url</code>语法：<code>url selector</code> 注意：<code>url</code>和选择器之间有一个空格</li> <li>传递方式
<ul><li><code>load()</code>方法的传递方式根据参数<code>data</code>来自动指定，如果没有参数传递，则采用<code>GET</code>方式传递，反之，采用<code>POST</code></li></ul></li> <li>回调参数
<ul><li>必须在加载完成后才执行的操作，该函数有三个参数 分别代表请求返回的内容、请求状态、<code>XMLHttpRequest</code>对象</li> <li>只要请求完成，回调函数就会被触发</li></ul></li></ul> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"#testTest"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span><span class="token string">"test.html"</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">responseText<span class="token punctuation">,</span>textStatus<span class="token punctuation">,</span>XMLHttpRequest</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token comment">//respnoseText 请求返回的内容</span>
    <span class="token comment">//textStatus 请求状态 ：sucess、error、notmodified、timeout</span>
    <span class="token comment">//XMLHttpRequest </span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><ul><li><strong>load方法参数</strong></li></ul> <table><thead><tr><th>参数名称</th> <th>类型</th> <th>说明</th></tr></thead> <tbody><tr><td><code>url</code></td> <td><code>String</code></td> <td>请求<code>HTML</code>页面的<code>URL</code>地址</td></tr> <tr><td><code>data(可选)</code></td> <td><code>Object</code></td> <td>发送至服务器的<code>key</code> / <code>value</code>数据</td></tr> <tr><td><code>callback(可选)</code></td> <td><code>Function</code></td> <td>请求完成时的回调函数，无论是请求成功还是失败</td></tr></tbody></table> <h5 id="get-和-post-方法"><a href="#get-和-post-方法" class="header-anchor">#</a> <code>$.get()</code>和<code>$.post()</code>方法</h5> <p><code>load()</code>方法通常用来从web服务器上获取静态的数据文件。在项目中需要传递一些参数给服务器中的页面，那么可以使用<code>$.get()</code>和<code>$.post()</code>或<code>$.ajax()</code>方法</p> <ul><li><p>注意：<code>$.get()</code>和<code>$.post()</code>方法是<code>jquery</code>中的全局函数</p></li> <li><p><strong>$.get()方法</strong></p> <ul><li><code>$.get()</code>方法使用<code>GET</code>方式来进行异步请求</li> <li>结构为：<code>$.get(url,[data],callback,type)</code> <ul><li>如果服务器返回的内容格式是<code>xml</code>文档，需要在服务器端设置<code>Content-Type</code>类型 代码如下：<code>header("Content-Type:text/xml:charset=utf-8")</code> //<code>php</code></li></ul></li></ul></li> <li><p><strong><code>$.get()</code>方法参数解析</strong></p></li></ul> <table><thead><tr><th>参数</th> <th>类型</th> <th>说明</th></tr></thead> <tbody><tr><td><code>url</code></td> <td><code>String</code></td> <td>请求<code>HTML</code>页的地址</td></tr> <tr><td><code>data(可选)</code></td> <td><code>Object</code></td> <td>发送至服务器的<code>key</code>/ <code>value</code> 数据会作为<code>QueryString</code>附加到请求URL中</td></tr> <tr><td><code>callback(可选)</code></td> <td><code>Function</code></td> <td>载入成功的回调函数（只有当<code>Response</code>的返回状态是success才调用该方法）</td></tr> <tr><td><code>type(可选)</code></td> <td><code>String</code></td> <td>服务器返回内容的格式，包括<code>xml</code>、<code>html</code>、<code>script</code>、<code>json</code>、<code>text</code>和<code>_default</code></td></tr></tbody></table> <ul><li><p><strong>$.post()方法</strong></p> <ul><li>它与<code>$.get()</code>方法的结构和使用方式相同，有如下区别
<ul><li><code>GET</code>请求会将参数跟张乃URL后进行传递，而<code>POST</code>请求则是作为<code>Http</code>消息的实体内容发送给web服务器，在<code>ajax</code>请求中，这种区别对用户不可见</li> <li><code>GET</code>方式对传输数据有大小限制（通常不能大于<code>2KB</code>），而使用<code>POST</code>方式传递的数据量要比<code>GET</code>方式大得多（理论不受限制）</li> <li><code>GET</code>方式请求的数据会被浏览器缓存起来，因此其他人可以从浏览器的历史纪录中读取这些数据，如：账号、密码。在某种情况下，<code>GET</code>方式会带来严重的安全问题，而<code>POST</code>相对来说可以避免这些问题</li> <li><code>GET</code>和<code>POST</code>方式传递的数据在服务端的获取也不相同。在<code>PHP</code>中，<code>GET</code>方式用<code>$_GET[]</code>获取；<code>POST</code>方式用<code>$_POST[]</code>获取;两种方式都可用<code>$_REQUEST[]</code>来获取</li></ul></li></ul></li> <li><p><strong>总结</strong></p> <ul><li>使用<code>load()</code>、<code>$.get()</code>和<code>$.post()</code>方法完成了一些常规的<code>Ajax</code>程序，如果还需要复杂的<code>Ajax</code>程序，就需要用到<code>$.ajax()</code>方式</li></ul></li></ul> <h5 id="ajax-方法"><a href="#ajax-方法" class="header-anchor">#</a> $.ajax()方法</h5> <ul><li><code>$.ajax()</code>方法是<code>jquery</code>最底层的<code>Ajax</code>实现，它的结构为<code>$.ajax(options)</code></li> <li>该方法只有一个参数，但在这个对象里包含了<code>$.ajax()</code>方式所需要的请求设置以及回调函等信息，参数以<code>key</code> / <code>value</code>存在，所有参数都是可选的</li> <li><strong>$.ajax()方式常用参数解析</strong></li></ul> <table><thead><tr><th>参数</th> <th>类型</th> <th>说明</th></tr></thead> <tbody><tr><td><code>url</code></td> <td><code>String</code></td> <td>(默认为当前页地址)发送请求的地址</td></tr> <tr><td><code>type</code></td> <td><code>String</code></td> <td>请求方式（<code>POST</code>或<code>GET</code>）默认为<code>GET</code></td></tr> <tr><td><code>timeout</code></td> <td><code>Number</code></td> <td>设置请求超时时间（毫秒）</td></tr> <tr><td><code>dataType</code></td> <td><code>String</code></td> <td>预期服务器返回的类型。可用的类型如下<br><br> <strong>xml</strong>:返回<code>XML</code>文档，可用<code>jquery</code>处理<br><strong>html</strong>:返回纯文本的<code>HTML</code>信息，包含的<code>script</code>标签也会在插入<code>DOM</code>时执行<br><strong>script</strong>：返回纯文本的<code>javascript</code>代码。不会自动缓存结果，除非设置<code>cache</code>参数。注意：在远程请求时，所有的<code>POST</code>请求都将转为<code>GET</code>请求<br><strong>json</strong>:返回<code>JSON</code>数据<br><strong>jsonp</strong>:<code>JSONP</code>格式，使用<code>jsonp</code>形式调用函数时，例如：<code>myurl?call back=?,jquery</code>将自动替换后一个<code>？</code>为正确的函数名，以执行回调函数<br><strong>text</strong>:返回纯文本字符串</td></tr> <tr><td><code>beforeSend</code></td> <td><code>Function</code></td> <td>发送请求前可以修改<code>XMLHttpRequest</code>对象的函数，例如添加自定义<code>HTTP</code>头。在<code>beforeSend</code>中如果返回<code>false</code>可以取消本次<code>Ajax</code>请求。<code>XMLHttpRequest</code>对象是唯一的参数<br> function(XMLHttpRequest){<br> <code>this</code>;//调用本次<code>Ajax</code>请求时传递的<code>options</code>参数<br>}</td></tr> <tr><td><code>complete</code></td> <td><code>Function</code></td> <td>请求完成后的回调函数（请求成功或失败时都调用）<br> 参数：<code>XMLHttpRequest</code>对象和一个描述成功请求类型的字符串<br>function(XMLHttpRequest,textStatus){<br> <code>this</code>;//调用本次Ajax请求时传递的<code>options</code>参数<br>}</td></tr> <tr><td><code>success</code></td> <td><code>Function</code></td> <td>请求成功后调用的回调函数，有两个参数<br>(1)由服务器返回，并根据<code>dataTyppe</code>参数进行处理后的数据<br>(2)描述状态的字符串<br><code>function</code>(data,textStatus){<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//<code>data</code>可能是<code>xmlDoc、``jsonObj</code>、<code>html</code>、<code>text</code>等<br> <code>this</code>;//调用本次<code>Ajax</code>请求时传递的<code>options</code>参数<br>}</td></tr> <tr><td><code>error</code></td> <td><code>Function</code></td> <td>请求失败时被调用的函数</td></tr> <tr><td><code>global</code></td> <td><code>Boolean</code></td> <td>默认为<code>true</code>。表示是否触发全局<code>Ajax</code>事件，设置为<code>false</code>将不会触发。<code>AjaxStart</code>或<code>AjaxStop</code>可用于控制各种<code>Ajax</code>事件</td></tr></tbody></table> <ul><li>参考
<ul><li>锋利的<code>jQuery</code></li></ul></li></ul></div> <!----> <div class="readMore-wrapper"><span class="readMore">阅读全文</span></div>
                    </div>
                            <p>这是一个信息提示框。</p>
                        </div>

                        <div class="note warning">
                            <div class="note-title"><i class="fas fa-exclamation-triangle"></i> 注意</div>
                            <p>这是一个警告提示框。</p>
                        </div>

                        <div class="note success">
                            <div class="note-title"><i class="fas fa-check-circle"></i> 成功</div>
                            <p>这是一个成功提示框。</p>
                        </div>

                        <h2>代码示例</h2>
                        <pre><code class="language-javascript">// 示例代码
function example() {
    console.log('Hello, FrontendHub!');
}
</code></pre>
                    </div>

                    <!-- 文章底部导航 -->
                    <nav class="article-nav">
                        <a href="#" class="prev-article">
                            <i class="fas fa-chevron-left"></i>
                            <span>上一篇</span>
                        </a>
                        <a href="#" class="next-article">
                            <span>下一篇</span>
                            <i class="fas fa-chevron-right"></i>
                        </a>
                    </nav>
                </article>
            </div>
        </div>
    </main>

    <!-- 页脚 -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h4><i class="fas fa-code"></i> FrontendHub</h4>
                    <p>专注于前端技术学习与面试准备</p>
                </div>
                <div class="footer-section">
                    <h4>快速链接</h4>
                    <ul>
                        <li><a href="../../index.html">首页</a></li>
                        <li><a href="../index.html#courses">课程体系</a></li>
                        <li><a href="../index.html#resources">学习资源</a></li>
                    </ul>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2025 FrontendHub. 用于个人学习使用.</p>
            </div>
        </div>
    </footer>

    <!-- 返回顶部按钮 -->
    <button class="back-to-top" id="backToTop">
        <i class="fas fa-arrow-up"></i>
    </button>

    <script src="../../js/main.js"></script>
    <script src="../../js/content.js"></script>
</body>
</html>

